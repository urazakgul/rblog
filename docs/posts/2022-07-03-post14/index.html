<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>Uraz's R Blog: CNN ile Resim Sınıflandırma: Milletvekillerinin Fotoğrafları Üzerinden Bir Uygulama</title>

<meta property="description" itemprop="description" content="Konvolüsyonel Sinir Ağları&#39;nın ve milletvekillerinin fotoğraflarının kullanıldığı bir sınıflandırma çalışması."/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2022-07-03"/>
<meta property="article:created" itemprop="dateCreated" content="2022-07-03"/>
<meta name="article:author" content="A. Uraz Akgül"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Uraz&#39;s R Blog: CNN ile Resim Sınıflandırma: Milletvekillerinin Fotoğrafları Üzerinden Bir Uygulama"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Konvolüsyonel Sinir Ağları&#39;nın ve milletvekillerinin fotoğraflarının kullanıldığı bir sınıflandırma çalışması."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Uraz&#39;s R Blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="Uraz&#39;s R Blog: CNN ile Resim Sınıflandırma: Milletvekillerinin Fotoğrafları Üzerinden Bir Uygulama"/>
<meta property="twitter:description" content="Konvolüsyonel Sinir Ağları&#39;nın ve milletvekillerinin fotoğraflarının kullanıldığı bir sınıflandırma çalışması."/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","categories"]}},"value":[{"type":"character","attributes":{},"value":["CNN ile Resim Sınıflandırma: Milletvekillerinin Fotoğrafları Üzerinden Bir Uygulama"]},{"type":"character","attributes":{},"value":["Konvolüsyonel Sinir Ağları'nın ve milletvekillerinin fotoğraflarının kullanıldığı bir sınıflandırma çalışması."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["A. Uraz Akgül"]}]}]},{"type":"character","attributes":{},"value":["2022-07-03"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"character","attributes":{},"value":["Deep Learning"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["img1.jpg","img10.jpg","img11.jpg","img2.jpg","img3.jpg","img4.jpg","img5.jpg","img6.jpg","img7.jpg","img8.jpg","img9.jpg","post14_files/anchor-4.2.2/anchor.min.js","post14_files/bowser-1.9.3/bowser.min.js","post14_files/distill-2.2.21/template.v2.js","post14_files/figure-html5/unnamed-chunk-27-1.png","post14_files/figure-html5/unnamed-chunk-30-1.png","post14_files/figure-html5/unnamed-chunk-5-1.png","post14_files/figure-html5/unnamed-chunk-6-1.png","post14_files/header-attrs-2.13/header-attrs.js","post14_files/jquery-3.6.0/jquery-3.6.0.js","post14_files/jquery-3.6.0/jquery-3.6.0.min.js","post14_files/jquery-3.6.0/jquery-3.6.0.min.map","post14_files/popper-2.6.0/popper.min.js","post14_files/tippy-6.2.7/tippy-bundle.umd.min.js","post14_files/tippy-6.2.7/tippy-light-border.css","post14_files/tippy-6.2.7/tippy.css","post14_files/tippy-6.2.7/tippy.umd.min.js","post14_files/webcomponents-2.0.0/webcomponents.js","tbmm/test/akp_rte.jpg","tbmm/test/chp_kk.jpg","tbmm/test/test_face_only/akp_rte.jpg","tbmm/test/test_face_only/chp_kk.jpg","tbmm/training/AKP/AKP_1.jpg","tbmm/training/AKP/AKP_101.jpg","tbmm/training/AKP/AKP_102.jpg","tbmm/training/AKP/AKP_105.jpg","tbmm/training/AKP/AKP_106.jpg","tbmm/training/AKP/AKP_107.jpg","tbmm/training/AKP/AKP_109.jpg","tbmm/training/AKP/AKP_11.jpg","tbmm/training/AKP/AKP_110.jpg","tbmm/training/AKP/AKP_111.jpg","tbmm/training/AKP/AKP_114.jpg","tbmm/training/AKP/AKP_115.jpg","tbmm/training/AKP/AKP_116.jpg","tbmm/training/AKP/AKP_117.jpg","tbmm/training/AKP/AKP_118.jpg","tbmm/training/AKP/AKP_12.jpg","tbmm/training/AKP/AKP_120.jpg","tbmm/training/AKP/AKP_121.jpg","tbmm/training/AKP/AKP_123.jpg","tbmm/training/AKP/AKP_124.jpg","tbmm/training/AKP/AKP_125.jpg","tbmm/training/AKP/AKP_126.jpg","tbmm/training/AKP/AKP_127.jpg","tbmm/training/AKP/AKP_128.jpg","tbmm/training/AKP/AKP_129.jpg","tbmm/training/AKP/AKP_13.jpg","tbmm/training/AKP/AKP_130.jpg","tbmm/training/AKP/AKP_133.jpg","tbmm/training/AKP/AKP_134.jpg","tbmm/training/AKP/AKP_135.jpg","tbmm/training/AKP/AKP_136.jpg","tbmm/training/AKP/AKP_137.jpg","tbmm/training/AKP/AKP_138.jpg","tbmm/training/AKP/AKP_139.jpg","tbmm/training/AKP/AKP_14.jpg","tbmm/training/AKP/AKP_140.jpg","tbmm/training/AKP/AKP_141.jpg","tbmm/training/AKP/AKP_142.jpg","tbmm/training/AKP/AKP_143.jpg","tbmm/training/AKP/AKP_144.jpg","tbmm/training/AKP/AKP_146.jpg","tbmm/training/AKP/AKP_148.jpg","tbmm/training/AKP/AKP_149.jpg","tbmm/training/AKP/AKP_15.jpg","tbmm/training/AKP/AKP_150.jpg","tbmm/training/AKP/AKP_152.jpg","tbmm/training/AKP/AKP_154.jpg","tbmm/training/AKP/AKP_155.jpg","tbmm/training/AKP/AKP_156.jpg","tbmm/training/AKP/AKP_157.jpg","tbmm/training/AKP/AKP_158.jpg","tbmm/training/AKP/AKP_160.jpg","tbmm/training/AKP/AKP_161.jpg","tbmm/training/AKP/AKP_162.jpg","tbmm/training/AKP/AKP_163.jpg","tbmm/training/AKP/AKP_164.jpg","tbmm/training/AKP/AKP_165.jpg","tbmm/training/AKP/AKP_166.jpg","tbmm/training/AKP/AKP_167.jpg","tbmm/training/AKP/AKP_17.jpg","tbmm/training/AKP/AKP_170.jpg","tbmm/training/AKP/AKP_173.jpg","tbmm/training/AKP/AKP_174.jpg","tbmm/training/AKP/AKP_175.jpg","tbmm/training/AKP/AKP_176.jpg","tbmm/training/AKP/AKP_177.jpg","tbmm/training/AKP/AKP_178.jpg","tbmm/training/AKP/AKP_179.jpg","tbmm/training/AKP/AKP_18.jpg","tbmm/training/AKP/AKP_181.jpg","tbmm/training/AKP/AKP_182.jpg","tbmm/training/AKP/AKP_185.jpg","tbmm/training/AKP/AKP_186.jpg","tbmm/training/AKP/AKP_188.jpg","tbmm/training/AKP/AKP_19.jpg","tbmm/training/AKP/AKP_191.jpg","tbmm/training/AKP/AKP_192.jpg","tbmm/training/AKP/AKP_193.jpg","tbmm/training/AKP/AKP_194.jpg","tbmm/training/AKP/AKP_195.jpg","tbmm/training/AKP/AKP_2.jpg","tbmm/training/AKP/AKP_20.jpg","tbmm/training/AKP/AKP_200.jpg","tbmm/training/AKP/AKP_201.jpg","tbmm/training/AKP/AKP_202.jpg","tbmm/training/AKP/AKP_204.jpg","tbmm/training/AKP/AKP_21.jpg","tbmm/training/AKP/AKP_210.jpg","tbmm/training/AKP/AKP_211.jpg","tbmm/training/AKP/AKP_212.jpg","tbmm/training/AKP/AKP_213.jpg","tbmm/training/AKP/AKP_215.jpg","tbmm/training/AKP/AKP_217.jpg","tbmm/training/AKP/AKP_218.jpg","tbmm/training/AKP/AKP_219.jpg","tbmm/training/AKP/AKP_22.jpg","tbmm/training/AKP/AKP_222.jpg","tbmm/training/AKP/AKP_224.jpg","tbmm/training/AKP/AKP_225.jpg","tbmm/training/AKP/AKP_226.jpg","tbmm/training/AKP/AKP_227.jpg","tbmm/training/AKP/AKP_229.jpg","tbmm/training/AKP/AKP_230.jpg","tbmm/training/AKP/AKP_232.jpg","tbmm/training/AKP/AKP_233.jpg","tbmm/training/AKP/AKP_234.jpg","tbmm/training/AKP/AKP_237.jpg","tbmm/training/AKP/AKP_24.jpg","tbmm/training/AKP/AKP_242.jpg","tbmm/training/AKP/AKP_243.jpg","tbmm/training/AKP/AKP_244.jpg","tbmm/training/AKP/AKP_246.jpg","tbmm/training/AKP/AKP_247.jpg","tbmm/training/AKP/AKP_252.jpg","tbmm/training/AKP/AKP_254.jpg","tbmm/training/AKP/AKP_259.jpg","tbmm/training/AKP/AKP_260.jpg","tbmm/training/AKP/AKP_262.jpg","tbmm/training/AKP/AKP_263.jpg","tbmm/training/AKP/AKP_264.jpg","tbmm/training/AKP/AKP_265.jpg","tbmm/training/AKP/AKP_266.jpg","tbmm/training/AKP/AKP_267.jpg","tbmm/training/AKP/AKP_269.jpg","tbmm/training/AKP/AKP_27.jpg","tbmm/training/AKP/AKP_270.jpg","tbmm/training/AKP/AKP_271.jpg","tbmm/training/AKP/AKP_272.jpg","tbmm/training/AKP/AKP_273.jpg","tbmm/training/AKP/AKP_275.jpg","tbmm/training/AKP/AKP_277.jpg","tbmm/training/AKP/AKP_278.jpg","tbmm/training/AKP/AKP_279.jpg","tbmm/training/AKP/AKP_28.jpg","tbmm/training/AKP/AKP_280.jpg","tbmm/training/AKP/AKP_281.jpg","tbmm/training/AKP/AKP_282.jpg","tbmm/training/AKP/AKP_284.jpg","tbmm/training/AKP/AKP_285.jpg","tbmm/training/AKP/AKP_289.jpg","tbmm/training/AKP/AKP_29.jpg","tbmm/training/AKP/AKP_290.jpg","tbmm/training/AKP/AKP_291.jpg","tbmm/training/AKP/AKP_292.jpg","tbmm/training/AKP/AKP_293.jpg","tbmm/training/AKP/AKP_294.jpg","tbmm/training/AKP/AKP_296.jpg","tbmm/training/AKP/AKP_297.jpg","tbmm/training/AKP/AKP_298.jpg","tbmm/training/AKP/AKP_299.jpg","tbmm/training/AKP/AKP_30.jpg","tbmm/training/AKP/AKP_301.jpg","tbmm/training/AKP/AKP_303.jpg","tbmm/training/AKP/AKP_304.jpg","tbmm/training/AKP/AKP_305.jpg","tbmm/training/AKP/AKP_306.jpg","tbmm/training/AKP/AKP_307.jpg","tbmm/training/AKP/AKP_308.jpg","tbmm/training/AKP/AKP_309.jpg","tbmm/training/AKP/AKP_310.jpg","tbmm/training/AKP/AKP_311.jpg","tbmm/training/AKP/AKP_312.jpg","tbmm/training/AKP/AKP_314.jpg","tbmm/training/AKP/AKP_315.jpg","tbmm/training/AKP/AKP_316.jpg","tbmm/training/AKP/AKP_317.jpg","tbmm/training/AKP/AKP_318.jpg","tbmm/training/AKP/AKP_319.jpg","tbmm/training/AKP/AKP_32.jpg","tbmm/training/AKP/AKP_323.jpg","tbmm/training/AKP/AKP_324.jpg","tbmm/training/AKP/AKP_325.jpg","tbmm/training/AKP/AKP_327.jpg","tbmm/training/AKP/AKP_328.jpg","tbmm/training/AKP/AKP_329.jpg","tbmm/training/AKP/AKP_33.jpg","tbmm/training/AKP/AKP_330.jpg","tbmm/training/AKP/AKP_331.jpg","tbmm/training/AKP/AKP_332.jpg","tbmm/training/AKP/AKP_336.jpg","tbmm/training/AKP/AKP_337.jpg","tbmm/training/AKP/AKP_339.jpg","tbmm/training/AKP/AKP_343.jpg","tbmm/training/AKP/AKP_344.jpg","tbmm/training/AKP/AKP_346.jpg","tbmm/training/AKP/AKP_347.jpg","tbmm/training/AKP/AKP_349.jpg","tbmm/training/AKP/AKP_35.jpg","tbmm/training/AKP/AKP_350.jpg","tbmm/training/AKP/AKP_351.jpg","tbmm/training/AKP/AKP_352.jpg","tbmm/training/AKP/AKP_355.jpg","tbmm/training/AKP/AKP_357.jpg","tbmm/training/AKP/AKP_358.jpg","tbmm/training/AKP/AKP_359.jpg","tbmm/training/AKP/AKP_360.jpg","tbmm/training/AKP/AKP_361.jpg","tbmm/training/AKP/AKP_362.jpg","tbmm/training/AKP/AKP_363.jpg","tbmm/training/AKP/AKP_365.jpg","tbmm/training/AKP/AKP_366.jpg","tbmm/training/AKP/AKP_367.jpg","tbmm/training/AKP/AKP_368.jpg","tbmm/training/AKP/AKP_369.jpg","tbmm/training/AKP/AKP_37.jpg","tbmm/training/AKP/AKP_372.jpg","tbmm/training/AKP/AKP_373.jpg","tbmm/training/AKP/AKP_374.jpg","tbmm/training/AKP/AKP_376.jpg","tbmm/training/AKP/AKP_377.jpg","tbmm/training/AKP/AKP_378.jpg","tbmm/training/AKP/AKP_379.jpg","tbmm/training/AKP/AKP_38.jpg","tbmm/training/AKP/AKP_381.jpg","tbmm/training/AKP/AKP_382.jpg","tbmm/training/AKP/AKP_384.jpg","tbmm/training/AKP/AKP_385.jpg","tbmm/training/AKP/AKP_386.jpg","tbmm/training/AKP/AKP_387.jpg","tbmm/training/AKP/AKP_388.jpg","tbmm/training/AKP/AKP_389.jpg","tbmm/training/AKP/AKP_390.jpg","tbmm/training/AKP/AKP_392.jpg","tbmm/training/AKP/AKP_395.jpg","tbmm/training/AKP/AKP_396.jpg","tbmm/training/AKP/AKP_398.jpg","tbmm/training/AKP/AKP_399.jpg","tbmm/training/AKP/AKP_40.jpg","tbmm/training/AKP/AKP_400.jpg","tbmm/training/AKP/AKP_401.jpg","tbmm/training/AKP/AKP_403.jpg","tbmm/training/AKP/AKP_404.jpg","tbmm/training/AKP/AKP_405.jpg","tbmm/training/AKP/AKP_407.jpg","tbmm/training/AKP/AKP_408.jpg","tbmm/training/AKP/AKP_410.jpg","tbmm/training/AKP/AKP_411.jpg","tbmm/training/AKP/AKP_412.jpg","tbmm/training/AKP/AKP_413.jpg","tbmm/training/AKP/AKP_414.jpg","tbmm/training/AKP/AKP_416.jpg","tbmm/training/AKP/AKP_417.jpg","tbmm/training/AKP/AKP_419.jpg","tbmm/training/AKP/AKP_42.jpg","tbmm/training/AKP/AKP_420.jpg","tbmm/training/AKP/AKP_45.jpg","tbmm/training/AKP/AKP_47.jpg","tbmm/training/AKP/AKP_48.jpg","tbmm/training/AKP/AKP_49.jpg","tbmm/training/AKP/AKP_5.jpg","tbmm/training/AKP/AKP_54.jpg","tbmm/training/AKP/AKP_55.jpg","tbmm/training/AKP/AKP_56.jpg","tbmm/training/AKP/AKP_58.jpg","tbmm/training/AKP/AKP_59.jpg","tbmm/training/AKP/AKP_6.jpg","tbmm/training/AKP/AKP_60.jpg","tbmm/training/AKP/AKP_61.jpg","tbmm/training/AKP/AKP_63.jpg","tbmm/training/AKP/AKP_66.jpg","tbmm/training/AKP/AKP_67.jpg","tbmm/training/AKP/AKP_68.jpg","tbmm/training/AKP/AKP_70.jpg","tbmm/training/AKP/AKP_72.jpg","tbmm/training/AKP/AKP_75.jpg","tbmm/training/AKP/AKP_76.jpg","tbmm/training/AKP/AKP_77.jpg","tbmm/training/AKP/AKP_78.jpg","tbmm/training/AKP/AKP_80.jpg","tbmm/training/AKP/AKP_81.jpg","tbmm/training/AKP/AKP_82.jpg","tbmm/training/AKP/AKP_83.jpg","tbmm/training/AKP/AKP_85.jpg","tbmm/training/AKP/AKP_86.jpg","tbmm/training/AKP/AKP_87.jpg","tbmm/training/AKP/AKP_88.jpg","tbmm/training/AKP/AKP_89.jpg","tbmm/training/AKP/AKP_9.jpg","tbmm/training/AKP/AKP_90.jpg","tbmm/training/AKP/AKP_91.jpg","tbmm/training/AKP/AKP_93.jpg","tbmm/training/AKP/AKP_94.jpg","tbmm/training/AKP/AKP_95.jpg","tbmm/training/AKP/AKP_96.jpg","tbmm/training/AKP/AKP_97.jpg","tbmm/training/AKP/AKP_99.jpg","tbmm/training/AKP_face_only/AKP_1.jpg","tbmm/training/AKP_face_only/AKP_101.jpg","tbmm/training/AKP_face_only/AKP_102.jpg","tbmm/training/AKP_face_only/AKP_105.jpg","tbmm/training/AKP_face_only/AKP_106.jpg","tbmm/training/AKP_face_only/AKP_107.jpg","tbmm/training/AKP_face_only/AKP_109.jpg","tbmm/training/AKP_face_only/AKP_11.jpg","tbmm/training/AKP_face_only/AKP_110.jpg","tbmm/training/AKP_face_only/AKP_111.jpg","tbmm/training/AKP_face_only/AKP_114.jpg","tbmm/training/AKP_face_only/AKP_115.jpg","tbmm/training/AKP_face_only/AKP_116.jpg","tbmm/training/AKP_face_only/AKP_117.jpg","tbmm/training/AKP_face_only/AKP_118.jpg","tbmm/training/AKP_face_only/AKP_12.jpg","tbmm/training/AKP_face_only/AKP_120.jpg","tbmm/training/AKP_face_only/AKP_121.jpg","tbmm/training/AKP_face_only/AKP_123.jpg","tbmm/training/AKP_face_only/AKP_124.jpg","tbmm/training/AKP_face_only/AKP_125.jpg","tbmm/training/AKP_face_only/AKP_126.jpg","tbmm/training/AKP_face_only/AKP_127.jpg","tbmm/training/AKP_face_only/AKP_128.jpg","tbmm/training/AKP_face_only/AKP_129.jpg","tbmm/training/AKP_face_only/AKP_13.jpg","tbmm/training/AKP_face_only/AKP_130.jpg","tbmm/training/AKP_face_only/AKP_133.jpg","tbmm/training/AKP_face_only/AKP_134.jpg","tbmm/training/AKP_face_only/AKP_135.jpg","tbmm/training/AKP_face_only/AKP_136.jpg","tbmm/training/AKP_face_only/AKP_137.jpg","tbmm/training/AKP_face_only/AKP_138.jpg","tbmm/training/AKP_face_only/AKP_139.jpg","tbmm/training/AKP_face_only/AKP_14.jpg","tbmm/training/AKP_face_only/AKP_140.jpg","tbmm/training/AKP_face_only/AKP_141.jpg","tbmm/training/AKP_face_only/AKP_142.jpg","tbmm/training/AKP_face_only/AKP_143.jpg","tbmm/training/AKP_face_only/AKP_144.jpg","tbmm/training/AKP_face_only/AKP_146.jpg","tbmm/training/AKP_face_only/AKP_148.jpg","tbmm/training/AKP_face_only/AKP_149.jpg","tbmm/training/AKP_face_only/AKP_15.jpg","tbmm/training/AKP_face_only/AKP_150.jpg","tbmm/training/AKP_face_only/AKP_152.jpg","tbmm/training/AKP_face_only/AKP_154.jpg","tbmm/training/AKP_face_only/AKP_155.jpg","tbmm/training/AKP_face_only/AKP_156.jpg","tbmm/training/AKP_face_only/AKP_157.jpg","tbmm/training/AKP_face_only/AKP_158.jpg","tbmm/training/AKP_face_only/AKP_160.jpg","tbmm/training/AKP_face_only/AKP_161.jpg","tbmm/training/AKP_face_only/AKP_162.jpg","tbmm/training/AKP_face_only/AKP_163.jpg","tbmm/training/AKP_face_only/AKP_164.jpg","tbmm/training/AKP_face_only/AKP_165.jpg","tbmm/training/AKP_face_only/AKP_166.jpg","tbmm/training/AKP_face_only/AKP_167.jpg","tbmm/training/AKP_face_only/AKP_17.jpg","tbmm/training/AKP_face_only/AKP_170.jpg","tbmm/training/AKP_face_only/AKP_173.jpg","tbmm/training/AKP_face_only/AKP_174.jpg","tbmm/training/AKP_face_only/AKP_175.jpg","tbmm/training/AKP_face_only/AKP_176.jpg","tbmm/training/AKP_face_only/AKP_177.jpg","tbmm/training/AKP_face_only/AKP_178.jpg","tbmm/training/AKP_face_only/AKP_179.jpg","tbmm/training/AKP_face_only/AKP_18.jpg","tbmm/training/AKP_face_only/AKP_181.jpg","tbmm/training/AKP_face_only/AKP_182.jpg","tbmm/training/AKP_face_only/AKP_185.jpg","tbmm/training/AKP_face_only/AKP_186.jpg","tbmm/training/AKP_face_only/AKP_188.jpg","tbmm/training/AKP_face_only/AKP_19.jpg","tbmm/training/AKP_face_only/AKP_191.jpg","tbmm/training/AKP_face_only/AKP_192.jpg","tbmm/training/AKP_face_only/AKP_193.jpg","tbmm/training/AKP_face_only/AKP_194.jpg","tbmm/training/AKP_face_only/AKP_195.jpg","tbmm/training/AKP_face_only/AKP_2.jpg","tbmm/training/AKP_face_only/AKP_20.jpg","tbmm/training/AKP_face_only/AKP_200.jpg","tbmm/training/AKP_face_only/AKP_201.jpg","tbmm/training/AKP_face_only/AKP_202.jpg","tbmm/training/AKP_face_only/AKP_204.jpg","tbmm/training/AKP_face_only/AKP_21.jpg","tbmm/training/AKP_face_only/AKP_210.jpg","tbmm/training/AKP_face_only/AKP_211.jpg","tbmm/training/AKP_face_only/AKP_212.jpg","tbmm/training/AKP_face_only/AKP_213.jpg","tbmm/training/AKP_face_only/AKP_215.jpg","tbmm/training/AKP_face_only/AKP_217.jpg","tbmm/training/AKP_face_only/AKP_218.jpg","tbmm/training/AKP_face_only/AKP_219.jpg","tbmm/training/AKP_face_only/AKP_22.jpg","tbmm/training/AKP_face_only/AKP_222.jpg","tbmm/training/AKP_face_only/AKP_224.jpg","tbmm/training/AKP_face_only/AKP_225.jpg","tbmm/training/AKP_face_only/AKP_226.jpg","tbmm/training/AKP_face_only/AKP_227.jpg","tbmm/training/AKP_face_only/AKP_229.jpg","tbmm/training/AKP_face_only/AKP_230.jpg","tbmm/training/AKP_face_only/AKP_232.jpg","tbmm/training/AKP_face_only/AKP_233.jpg","tbmm/training/AKP_face_only/AKP_234.jpg","tbmm/training/AKP_face_only/AKP_237.jpg","tbmm/training/AKP_face_only/AKP_24.jpg","tbmm/training/AKP_face_only/AKP_242.jpg","tbmm/training/AKP_face_only/AKP_243.jpg","tbmm/training/AKP_face_only/AKP_244.jpg","tbmm/training/AKP_face_only/AKP_246.jpg","tbmm/training/AKP_face_only/AKP_247.jpg","tbmm/training/AKP_face_only/AKP_252.jpg","tbmm/training/AKP_face_only/AKP_254.jpg","tbmm/training/AKP_face_only/AKP_259.jpg","tbmm/training/AKP_face_only/AKP_260.jpg","tbmm/training/AKP_face_only/AKP_262.jpg","tbmm/training/AKP_face_only/AKP_263.jpg","tbmm/training/AKP_face_only/AKP_264.jpg","tbmm/training/AKP_face_only/AKP_265.jpg","tbmm/training/AKP_face_only/AKP_266.jpg","tbmm/training/AKP_face_only/AKP_267.jpg","tbmm/training/AKP_face_only/AKP_269.jpg","tbmm/training/AKP_face_only/AKP_27.jpg","tbmm/training/AKP_face_only/AKP_270.jpg","tbmm/training/AKP_face_only/AKP_271.jpg","tbmm/training/AKP_face_only/AKP_272.jpg","tbmm/training/AKP_face_only/AKP_273.jpg","tbmm/training/AKP_face_only/AKP_275.jpg","tbmm/training/AKP_face_only/AKP_277.jpg","tbmm/training/AKP_face_only/AKP_278.jpg","tbmm/training/AKP_face_only/AKP_279.jpg","tbmm/training/AKP_face_only/AKP_28.jpg","tbmm/training/AKP_face_only/AKP_280.jpg","tbmm/training/AKP_face_only/AKP_281.jpg","tbmm/training/AKP_face_only/AKP_282.jpg","tbmm/training/AKP_face_only/AKP_285.jpg","tbmm/training/AKP_face_only/AKP_289.jpg","tbmm/training/AKP_face_only/AKP_29.jpg","tbmm/training/AKP_face_only/AKP_290.jpg","tbmm/training/AKP_face_only/AKP_291.jpg","tbmm/training/AKP_face_only/AKP_292.jpg","tbmm/training/AKP_face_only/AKP_293.jpg","tbmm/training/AKP_face_only/AKP_294.jpg","tbmm/training/AKP_face_only/AKP_296.jpg","tbmm/training/AKP_face_only/AKP_297.jpg","tbmm/training/AKP_face_only/AKP_298.jpg","tbmm/training/AKP_face_only/AKP_299.jpg","tbmm/training/AKP_face_only/AKP_30.jpg","tbmm/training/AKP_face_only/AKP_301.jpg","tbmm/training/AKP_face_only/AKP_303.jpg","tbmm/training/AKP_face_only/AKP_304.jpg","tbmm/training/AKP_face_only/AKP_305.jpg","tbmm/training/AKP_face_only/AKP_306.jpg","tbmm/training/AKP_face_only/AKP_307.jpg","tbmm/training/AKP_face_only/AKP_308.jpg","tbmm/training/AKP_face_only/AKP_309.jpg","tbmm/training/AKP_face_only/AKP_310.jpg","tbmm/training/AKP_face_only/AKP_311.jpg","tbmm/training/AKP_face_only/AKP_312.jpg","tbmm/training/AKP_face_only/AKP_314.jpg","tbmm/training/AKP_face_only/AKP_315.jpg","tbmm/training/AKP_face_only/AKP_316.jpg","tbmm/training/AKP_face_only/AKP_317.jpg","tbmm/training/AKP_face_only/AKP_318.jpg","tbmm/training/AKP_face_only/AKP_319.jpg","tbmm/training/AKP_face_only/AKP_32.jpg","tbmm/training/AKP_face_only/AKP_323.jpg","tbmm/training/AKP_face_only/AKP_324.jpg","tbmm/training/AKP_face_only/AKP_325.jpg","tbmm/training/AKP_face_only/AKP_327.jpg","tbmm/training/AKP_face_only/AKP_328.jpg","tbmm/training/AKP_face_only/AKP_329.jpg","tbmm/training/AKP_face_only/AKP_33.jpg","tbmm/training/AKP_face_only/AKP_330.jpg","tbmm/training/AKP_face_only/AKP_331.jpg","tbmm/training/AKP_face_only/AKP_332.jpg","tbmm/training/AKP_face_only/AKP_336.jpg","tbmm/training/AKP_face_only/AKP_337.jpg","tbmm/training/AKP_face_only/AKP_339.jpg","tbmm/training/AKP_face_only/AKP_343.jpg","tbmm/training/AKP_face_only/AKP_344.jpg","tbmm/training/AKP_face_only/AKP_346.jpg","tbmm/training/AKP_face_only/AKP_347.jpg","tbmm/training/AKP_face_only/AKP_349.jpg","tbmm/training/AKP_face_only/AKP_35.jpg","tbmm/training/AKP_face_only/AKP_350.jpg","tbmm/training/AKP_face_only/AKP_351.jpg","tbmm/training/AKP_face_only/AKP_352.jpg","tbmm/training/AKP_face_only/AKP_355.jpg","tbmm/training/AKP_face_only/AKP_357.jpg","tbmm/training/AKP_face_only/AKP_358.jpg","tbmm/training/AKP_face_only/AKP_359.jpg","tbmm/training/AKP_face_only/AKP_360.jpg","tbmm/training/AKP_face_only/AKP_361.jpg","tbmm/training/AKP_face_only/AKP_362.jpg","tbmm/training/AKP_face_only/AKP_363.jpg","tbmm/training/AKP_face_only/AKP_365.jpg","tbmm/training/AKP_face_only/AKP_366.jpg","tbmm/training/AKP_face_only/AKP_367.jpg","tbmm/training/AKP_face_only/AKP_368.jpg","tbmm/training/AKP_face_only/AKP_369.jpg","tbmm/training/AKP_face_only/AKP_37.jpg","tbmm/training/AKP_face_only/AKP_372.jpg","tbmm/training/AKP_face_only/AKP_373.jpg","tbmm/training/AKP_face_only/AKP_374.jpg","tbmm/training/AKP_face_only/AKP_376.jpg","tbmm/training/AKP_face_only/AKP_377.jpg","tbmm/training/AKP_face_only/AKP_378.jpg","tbmm/training/AKP_face_only/AKP_379.jpg","tbmm/training/AKP_face_only/AKP_38.jpg","tbmm/training/AKP_face_only/AKP_381.jpg","tbmm/training/AKP_face_only/AKP_384.jpg","tbmm/training/AKP_face_only/AKP_385.jpg","tbmm/training/AKP_face_only/AKP_386.jpg","tbmm/training/AKP_face_only/AKP_387.jpg","tbmm/training/AKP_face_only/AKP_388.jpg","tbmm/training/AKP_face_only/AKP_389.jpg","tbmm/training/AKP_face_only/AKP_390.jpg","tbmm/training/AKP_face_only/AKP_392.jpg","tbmm/training/AKP_face_only/AKP_395.jpg","tbmm/training/AKP_face_only/AKP_396.jpg","tbmm/training/AKP_face_only/AKP_398.jpg","tbmm/training/AKP_face_only/AKP_399.jpg","tbmm/training/AKP_face_only/AKP_40.jpg","tbmm/training/AKP_face_only/AKP_400.jpg","tbmm/training/AKP_face_only/AKP_401.jpg","tbmm/training/AKP_face_only/AKP_403.jpg","tbmm/training/AKP_face_only/AKP_404.jpg","tbmm/training/AKP_face_only/AKP_405.jpg","tbmm/training/AKP_face_only/AKP_407.jpg","tbmm/training/AKP_face_only/AKP_408.jpg","tbmm/training/AKP_face_only/AKP_410.jpg","tbmm/training/AKP_face_only/AKP_411.jpg","tbmm/training/AKP_face_only/AKP_412.jpg","tbmm/training/AKP_face_only/AKP_413.jpg","tbmm/training/AKP_face_only/AKP_414.jpg","tbmm/training/AKP_face_only/AKP_416.jpg","tbmm/training/AKP_face_only/AKP_417.jpg","tbmm/training/AKP_face_only/AKP_419.jpg","tbmm/training/AKP_face_only/AKP_42.jpg","tbmm/training/AKP_face_only/AKP_420.jpg","tbmm/training/AKP_face_only/AKP_45.jpg","tbmm/training/AKP_face_only/AKP_47.jpg","tbmm/training/AKP_face_only/AKP_48.jpg","tbmm/training/AKP_face_only/AKP_49.jpg","tbmm/training/AKP_face_only/AKP_5.jpg","tbmm/training/AKP_face_only/AKP_54.jpg","tbmm/training/AKP_face_only/AKP_55.jpg","tbmm/training/AKP_face_only/AKP_56.jpg","tbmm/training/AKP_face_only/AKP_58.jpg","tbmm/training/AKP_face_only/AKP_59.jpg","tbmm/training/AKP_face_only/AKP_6.jpg","tbmm/training/AKP_face_only/AKP_60.jpg","tbmm/training/AKP_face_only/AKP_61.jpg","tbmm/training/AKP_face_only/AKP_63.jpg","tbmm/training/AKP_face_only/AKP_66.jpg","tbmm/training/AKP_face_only/AKP_67.jpg","tbmm/training/AKP_face_only/AKP_68.jpg","tbmm/training/AKP_face_only/AKP_70.jpg","tbmm/training/AKP_face_only/AKP_72.jpg","tbmm/training/AKP_face_only/AKP_75.jpg","tbmm/training/AKP_face_only/AKP_76.jpg","tbmm/training/AKP_face_only/AKP_77.jpg","tbmm/training/AKP_face_only/AKP_78.jpg","tbmm/training/AKP_face_only/AKP_80.jpg","tbmm/training/AKP_face_only/AKP_81.jpg","tbmm/training/AKP_face_only/AKP_82.jpg","tbmm/training/AKP_face_only/AKP_83.jpg","tbmm/training/AKP_face_only/AKP_85.jpg","tbmm/training/AKP_face_only/AKP_86.jpg","tbmm/training/AKP_face_only/AKP_87.jpg","tbmm/training/AKP_face_only/AKP_88.jpg","tbmm/training/AKP_face_only/AKP_89.jpg","tbmm/training/AKP_face_only/AKP_9.jpg","tbmm/training/AKP_face_only/AKP_90.jpg","tbmm/training/AKP_face_only/AKP_91.jpg","tbmm/training/AKP_face_only/AKP_93.jpg","tbmm/training/AKP_face_only/AKP_94.jpg","tbmm/training/AKP_face_only/AKP_95.jpg","tbmm/training/AKP_face_only/AKP_96.jpg","tbmm/training/AKP_face_only/AKP_97.jpg","tbmm/training/AKP_face_only/AKP_99.jpg","tbmm/training/CHP/CHP_10.jpg","tbmm/training/CHP/CHP_100.jpg","tbmm/training/CHP/CHP_103.jpg","tbmm/training/CHP/CHP_104.jpg","tbmm/training/CHP/CHP_108.jpg","tbmm/training/CHP/CHP_112.jpg","tbmm/training/CHP/CHP_113.jpg","tbmm/training/CHP/CHP_119.jpg","tbmm/training/CHP/CHP_122.jpg","tbmm/training/CHP/CHP_131.jpg","tbmm/training/CHP/CHP_132.jpg","tbmm/training/CHP/CHP_145.jpg","tbmm/training/CHP/CHP_147.jpg","tbmm/training/CHP/CHP_151.jpg","tbmm/training/CHP/CHP_153.jpg","tbmm/training/CHP/CHP_159.jpg","tbmm/training/CHP/CHP_16.jpg","tbmm/training/CHP/CHP_168.jpg","tbmm/training/CHP/CHP_169.jpg","tbmm/training/CHP/CHP_171.jpg","tbmm/training/CHP/CHP_172.jpg","tbmm/training/CHP/CHP_180.jpg","tbmm/training/CHP/CHP_183.jpg","tbmm/training/CHP/CHP_184.jpg","tbmm/training/CHP/CHP_187.jpg","tbmm/training/CHP/CHP_189.jpg","tbmm/training/CHP/CHP_190.jpg","tbmm/training/CHP/CHP_196.jpg","tbmm/training/CHP/CHP_197.jpg","tbmm/training/CHP/CHP_198.jpg","tbmm/training/CHP/CHP_199.jpg","tbmm/training/CHP/CHP_203.jpg","tbmm/training/CHP/CHP_205.jpg","tbmm/training/CHP/CHP_206.jpg","tbmm/training/CHP/CHP_207.jpg","tbmm/training/CHP/CHP_208.jpg","tbmm/training/CHP/CHP_209.jpg","tbmm/training/CHP/CHP_214.jpg","tbmm/training/CHP/CHP_216.jpg","tbmm/training/CHP/CHP_220.jpg","tbmm/training/CHP/CHP_221.jpg","tbmm/training/CHP/CHP_223.jpg","tbmm/training/CHP/CHP_228.jpg","tbmm/training/CHP/CHP_23.jpg","tbmm/training/CHP/CHP_231.jpg","tbmm/training/CHP/CHP_235.jpg","tbmm/training/CHP/CHP_236.jpg","tbmm/training/CHP/CHP_238.jpg","tbmm/training/CHP/CHP_239.jpg","tbmm/training/CHP/CHP_240.jpg","tbmm/training/CHP/CHP_241.jpg","tbmm/training/CHP/CHP_245.jpg","tbmm/training/CHP/CHP_248.jpg","tbmm/training/CHP/CHP_249.jpg","tbmm/training/CHP/CHP_25.jpg","tbmm/training/CHP/CHP_250.jpg","tbmm/training/CHP/CHP_251.jpg","tbmm/training/CHP/CHP_253.jpg","tbmm/training/CHP/CHP_255.jpg","tbmm/training/CHP/CHP_256.jpg","tbmm/training/CHP/CHP_257.jpg","tbmm/training/CHP/CHP_258.jpg","tbmm/training/CHP/CHP_26.jpg","tbmm/training/CHP/CHP_261.jpg","tbmm/training/CHP/CHP_268.jpg","tbmm/training/CHP/CHP_274.jpg","tbmm/training/CHP/CHP_276.jpg","tbmm/training/CHP/CHP_283.jpg","tbmm/training/CHP/CHP_286.jpg","tbmm/training/CHP/CHP_287.jpg","tbmm/training/CHP/CHP_288.jpg","tbmm/training/CHP/CHP_295.jpg","tbmm/training/CHP/CHP_3.jpg","tbmm/training/CHP/CHP_300.jpg","tbmm/training/CHP/CHP_302.jpg","tbmm/training/CHP/CHP_31.jpg","tbmm/training/CHP/CHP_313.jpg","tbmm/training/CHP/CHP_320.jpg","tbmm/training/CHP/CHP_321.jpg","tbmm/training/CHP/CHP_322.jpg","tbmm/training/CHP/CHP_326.jpg","tbmm/training/CHP/CHP_333.jpg","tbmm/training/CHP/CHP_334.jpg","tbmm/training/CHP/CHP_335.jpg","tbmm/training/CHP/CHP_338.jpg","tbmm/training/CHP/CHP_34.jpg","tbmm/training/CHP/CHP_340.jpg","tbmm/training/CHP/CHP_341.jpg","tbmm/training/CHP/CHP_342.jpg","tbmm/training/CHP/CHP_345.jpg","tbmm/training/CHP/CHP_348.jpg","tbmm/training/CHP/CHP_353.jpg","tbmm/training/CHP/CHP_354.jpg","tbmm/training/CHP/CHP_356.jpg","tbmm/training/CHP/CHP_36.jpg","tbmm/training/CHP/CHP_364.jpg","tbmm/training/CHP/CHP_370.jpg","tbmm/training/CHP/CHP_371.jpg","tbmm/training/CHP/CHP_375.jpg","tbmm/training/CHP/CHP_380.jpg","tbmm/training/CHP/CHP_383.jpg","tbmm/training/CHP/CHP_39.jpg","tbmm/training/CHP/CHP_391.jpg","tbmm/training/CHP/CHP_393.jpg","tbmm/training/CHP/CHP_394.jpg","tbmm/training/CHP/CHP_397.jpg","tbmm/training/CHP/CHP_4.jpg","tbmm/training/CHP/CHP_402.jpg","tbmm/training/CHP/CHP_406.jpg","tbmm/training/CHP/CHP_409.jpg","tbmm/training/CHP/CHP_41.jpg","tbmm/training/CHP/CHP_415.jpg","tbmm/training/CHP/CHP_418.jpg","tbmm/training/CHP/CHP_421.jpg","tbmm/training/CHP/CHP_43.jpg","tbmm/training/CHP/CHP_44.jpg","tbmm/training/CHP/CHP_46.jpg","tbmm/training/CHP/CHP_50.jpg","tbmm/training/CHP/CHP_51.jpg","tbmm/training/CHP/CHP_52.jpg","tbmm/training/CHP/CHP_53.jpg","tbmm/training/CHP/CHP_57.jpg","tbmm/training/CHP/CHP_62.jpg","tbmm/training/CHP/CHP_64.jpg","tbmm/training/CHP/CHP_65.jpg","tbmm/training/CHP/CHP_69.jpg","tbmm/training/CHP/CHP_7.jpg","tbmm/training/CHP/CHP_71.jpg","tbmm/training/CHP/CHP_73.jpg","tbmm/training/CHP/CHP_74.jpg","tbmm/training/CHP/CHP_79.jpg","tbmm/training/CHP/CHP_8.jpg","tbmm/training/CHP/CHP_84.jpg","tbmm/training/CHP/CHP_92.jpg","tbmm/training/CHP/CHP_98.jpg","tbmm/training/CHP_face_only/CHP_10.jpg","tbmm/training/CHP_face_only/CHP_100.jpg","tbmm/training/CHP_face_only/CHP_103.jpg","tbmm/training/CHP_face_only/CHP_104.jpg","tbmm/training/CHP_face_only/CHP_108.jpg","tbmm/training/CHP_face_only/CHP_112.jpg","tbmm/training/CHP_face_only/CHP_113.jpg","tbmm/training/CHP_face_only/CHP_119.jpg","tbmm/training/CHP_face_only/CHP_122.jpg","tbmm/training/CHP_face_only/CHP_131.jpg","tbmm/training/CHP_face_only/CHP_132.jpg","tbmm/training/CHP_face_only/CHP_145.jpg","tbmm/training/CHP_face_only/CHP_147.jpg","tbmm/training/CHP_face_only/CHP_151.jpg","tbmm/training/CHP_face_only/CHP_153.jpg","tbmm/training/CHP_face_only/CHP_159.jpg","tbmm/training/CHP_face_only/CHP_16.jpg","tbmm/training/CHP_face_only/CHP_168.jpg","tbmm/training/CHP_face_only/CHP_169.jpg","tbmm/training/CHP_face_only/CHP_171.jpg","tbmm/training/CHP_face_only/CHP_172.jpg","tbmm/training/CHP_face_only/CHP_180.jpg","tbmm/training/CHP_face_only/CHP_184.jpg","tbmm/training/CHP_face_only/CHP_187.jpg","tbmm/training/CHP_face_only/CHP_189.jpg","tbmm/training/CHP_face_only/CHP_190.jpg","tbmm/training/CHP_face_only/CHP_196.jpg","tbmm/training/CHP_face_only/CHP_197.jpg","tbmm/training/CHP_face_only/CHP_198.jpg","tbmm/training/CHP_face_only/CHP_199.jpg","tbmm/training/CHP_face_only/CHP_203.jpg","tbmm/training/CHP_face_only/CHP_205.jpg","tbmm/training/CHP_face_only/CHP_206.jpg","tbmm/training/CHP_face_only/CHP_207.jpg","tbmm/training/CHP_face_only/CHP_208.jpg","tbmm/training/CHP_face_only/CHP_209.jpg","tbmm/training/CHP_face_only/CHP_214.jpg","tbmm/training/CHP_face_only/CHP_216.jpg","tbmm/training/CHP_face_only/CHP_220.jpg","tbmm/training/CHP_face_only/CHP_221.jpg","tbmm/training/CHP_face_only/CHP_223.jpg","tbmm/training/CHP_face_only/CHP_228.jpg","tbmm/training/CHP_face_only/CHP_23.jpg","tbmm/training/CHP_face_only/CHP_231.jpg","tbmm/training/CHP_face_only/CHP_235.jpg","tbmm/training/CHP_face_only/CHP_236.jpg","tbmm/training/CHP_face_only/CHP_238.jpg","tbmm/training/CHP_face_only/CHP_239.jpg","tbmm/training/CHP_face_only/CHP_240.jpg","tbmm/training/CHP_face_only/CHP_241.jpg","tbmm/training/CHP_face_only/CHP_245.jpg","tbmm/training/CHP_face_only/CHP_248.jpg","tbmm/training/CHP_face_only/CHP_249.jpg","tbmm/training/CHP_face_only/CHP_25.jpg","tbmm/training/CHP_face_only/CHP_250.jpg","tbmm/training/CHP_face_only/CHP_251.jpg","tbmm/training/CHP_face_only/CHP_253.jpg","tbmm/training/CHP_face_only/CHP_255.jpg","tbmm/training/CHP_face_only/CHP_256.jpg","tbmm/training/CHP_face_only/CHP_257.jpg","tbmm/training/CHP_face_only/CHP_258.jpg","tbmm/training/CHP_face_only/CHP_26.jpg","tbmm/training/CHP_face_only/CHP_261.jpg","tbmm/training/CHP_face_only/CHP_268.jpg","tbmm/training/CHP_face_only/CHP_274.jpg","tbmm/training/CHP_face_only/CHP_276.jpg","tbmm/training/CHP_face_only/CHP_283.jpg","tbmm/training/CHP_face_only/CHP_286.jpg","tbmm/training/CHP_face_only/CHP_287.jpg","tbmm/training/CHP_face_only/CHP_288.jpg","tbmm/training/CHP_face_only/CHP_295.jpg","tbmm/training/CHP_face_only/CHP_3.jpg","tbmm/training/CHP_face_only/CHP_300.jpg","tbmm/training/CHP_face_only/CHP_302.jpg","tbmm/training/CHP_face_only/CHP_31.jpg","tbmm/training/CHP_face_only/CHP_313.jpg","tbmm/training/CHP_face_only/CHP_320.jpg","tbmm/training/CHP_face_only/CHP_321.jpg","tbmm/training/CHP_face_only/CHP_322.jpg","tbmm/training/CHP_face_only/CHP_326.jpg","tbmm/training/CHP_face_only/CHP_333.jpg","tbmm/training/CHP_face_only/CHP_334.jpg","tbmm/training/CHP_face_only/CHP_335.jpg","tbmm/training/CHP_face_only/CHP_338.jpg","tbmm/training/CHP_face_only/CHP_34.jpg","tbmm/training/CHP_face_only/CHP_340.jpg","tbmm/training/CHP_face_only/CHP_341.jpg","tbmm/training/CHP_face_only/CHP_342.jpg","tbmm/training/CHP_face_only/CHP_345.jpg","tbmm/training/CHP_face_only/CHP_348.jpg","tbmm/training/CHP_face_only/CHP_353.jpg","tbmm/training/CHP_face_only/CHP_354.jpg","tbmm/training/CHP_face_only/CHP_356.jpg","tbmm/training/CHP_face_only/CHP_36.jpg","tbmm/training/CHP_face_only/CHP_364.jpg","tbmm/training/CHP_face_only/CHP_370.jpg","tbmm/training/CHP_face_only/CHP_371.jpg","tbmm/training/CHP_face_only/CHP_375.jpg","tbmm/training/CHP_face_only/CHP_380.jpg","tbmm/training/CHP_face_only/CHP_383.jpg","tbmm/training/CHP_face_only/CHP_39.jpg","tbmm/training/CHP_face_only/CHP_391.jpg","tbmm/training/CHP_face_only/CHP_393.jpg","tbmm/training/CHP_face_only/CHP_394.jpg","tbmm/training/CHP_face_only/CHP_397.jpg","tbmm/training/CHP_face_only/CHP_4.jpg","tbmm/training/CHP_face_only/CHP_402.jpg","tbmm/training/CHP_face_only/CHP_406.jpg","tbmm/training/CHP_face_only/CHP_409.jpg","tbmm/training/CHP_face_only/CHP_41.jpg","tbmm/training/CHP_face_only/CHP_415.jpg","tbmm/training/CHP_face_only/CHP_418.jpg","tbmm/training/CHP_face_only/CHP_421.jpg","tbmm/training/CHP_face_only/CHP_43.jpg","tbmm/training/CHP_face_only/CHP_44.jpg","tbmm/training/CHP_face_only/CHP_46.jpg","tbmm/training/CHP_face_only/CHP_50.jpg","tbmm/training/CHP_face_only/CHP_51.jpg","tbmm/training/CHP_face_only/CHP_52.jpg","tbmm/training/CHP_face_only/CHP_53.jpg","tbmm/training/CHP_face_only/CHP_57.jpg","tbmm/training/CHP_face_only/CHP_62.jpg","tbmm/training/CHP_face_only/CHP_64.jpg","tbmm/training/CHP_face_only/CHP_65.jpg","tbmm/training/CHP_face_only/CHP_69.jpg","tbmm/training/CHP_face_only/CHP_7.jpg","tbmm/training/CHP_face_only/CHP_71.jpg","tbmm/training/CHP_face_only/CHP_73.jpg","tbmm/training/CHP_face_only/CHP_74.jpg","tbmm/training/CHP_face_only/CHP_79.jpg","tbmm/training/CHP_face_only/CHP_8.jpg","tbmm/training/CHP_face_only/CHP_84.jpg","tbmm/training/CHP_face_only/CHP_92.jpg","tbmm/training/CHP_face_only/CHP_98.jpg"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      if ($(this).children()[0].nodeName == "D-FOOTNOTE") {
        var fn = $(this).children()[0]
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        return "<p>" + $('#ref-' + ref).html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.13/header-attrs.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"CNN ile Resim Sınıflandırma: Milletvekillerinin Fotoğrafları Üzerinden Bir Uygulama","description":"Konvolüsyonel Sinir Ağları'nın ve milletvekillerinin fotoğraflarının kullanıldığı bir sınıflandırma çalışması.","authors":[{"author":"A. Uraz Akgül","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-07-03T00:00:00.000+03:00","citationText":"Akgül, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Uraz's R Blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Books
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://rpydaneogrendim.github.io/rEkonometri/">R'da Ekonometri Uygulamaları</a>
<a href="https://rpydaneogrendim.github.io/rViz/">R'da Veri Görselleştirme</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
Packages
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="https://github.com/rpydaneogrendim/TCMB">TCMB</a>
<a href="https://github.com/rpydaneogrendim/isyhisse">isyhisse</a>
<a href="https://github.com/rpydaneogrendim/KantitatifTurk">KantitatifTurk</a>
</div>
</div>
<a href="https://twitter.com/rpydaneogrendim">
<i class="fab fa-twitter" aria-hidden="true"></i>
</a>
<a href="https://github.com/rpydaneogrendim">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>CNN ile Resim Sınıflandırma: Milletvekillerinin Fotoğrafları Üzerinden Bir Uygulama</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:Deep_Learning" class="dt-tag">Deep Learning</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>Konvolüsyonel Sinir Ağları’nın ve milletvekillerinin
fotoğraflarının kullanıldığı bir sınıflandırma çalışması.</p></p>
</div>

<div class="d-byline">
  A. Uraz Akgül  
  
<br/>2022-07-03
</div>

<div class="d-article">
<p>Konvolüsyonel Sinir Ağı (Convolutional Neural
Network-<strong>CNN</strong>), genellikle görsel bilginin analiz
edilmesinde kullanılan bir Yapay Sinir Ağı (Artificial Neural
Network-<strong>ANN</strong>) sınıfıdır.</p>
<p>En basit şekilde CNN’i aşağıdaki gibi tanımlayabiliriz.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-1"></span>
<img src="img1.jpg" alt="https://www.mdpi.com/2076-3417/9/21/4500" width="50%" />
<p class="caption">
Figure 1: <a href="https://www.mdpi.com/2076-3417/9/21/4500"
class="uri">https://www.mdpi.com/2076-3417/9/21/4500</a>
</p>
</div>
</div>
<p>Girdi (Input) bölümü uygulamamızdaki milletvekillerinin
fotoğraflarıdır. Yani, verinin ham olarak ağa verildiği bölümdür.
Konvolüsyon (Convolution) ve Ortaklama/Havuzlama (Pooling) denilen
bölümde görsellerdeki özellikler yakalanır (feature extraction).
Ardından Tam Bağlantı (Fully Connected) ve Çıktı (Output) denilen bölüme
geçilir ve burada sınıflandırma (classification) gerçekleştirilir.</p>
<p>Konvolüsyon, ortaklama ve tam bağlantı katmanlarına yakından
bakalım.</p>
<p>Konvolüsyon: Görselden belirli özelliklerin çıkarılması konvolüsyon
katmanında olur. Bu katmanda, tüm görüntüye 2x2, 3x3, 5x5 gibi küçük
boyutlu filtrelerin uygulanması yapılmaktadır. Böylelikle görüntüdeki
daha ayırt edici özellikler çıkartılarak yeni bir görüntü elde edilir.
AKP’li bir milletvekili ile CHP’li bir milletvekilini birbirinden ayıran
özelliklerin belirleneceği katman konvolüsyon katmanı olacaktır.</p>
<p>Bu bölümü daha iyi anlayabilmek için bilgisayarın bir resmi nasıl
okuduğuna bakalım.</p>
<p>Tüm renkler üç renkten oluşur: Kırmızı, Yeşil ve Mavi. Bunu RGB (Red,
Green, Blue) olarak kısaltabiliriz. Bu uygulamada göreceğimiz resimler
renklidir ve her biri RGB’den oluşuyor. Aynı zamanda renkli resimler 3
katmandan oluşur da diyebiliriz.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-2"></span>
<img src="img2.jpg" alt="Image Credit: Diane Rohrer" width="50%" />
<p class="caption">
Figure 2: Image Credit: Diane Rohrer
</p>
</div>
</div>
<p>Her renk 0 ile 255 arasında değer alır.</p>
<ul>
<li><p>RGB(255,0,0): Kırmızı</p></li>
<li><p>RGB(0,255,0): Yeşil</p></li>
<li><p>RGB(0,0,255): Mavi</p></li>
</ul>
<p>Örnek olarak, RGB(87,51,100) ile oluşturduğum renk aşağıdadır.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-3"></span>
<img src="img3.jpg" alt="RGB(87,51,100)" width="50%" />
<p class="caption">
Figure 3: RGB(87,51,100)
</p>
</div>
</div>
<p>R’da RGB renklerinin yoğunluğunu örnek olarak seçtiğim bir tablo
üzerinden aşağıdaki gibi inceleyebiliriz.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-4"></span>
<img src="img4.jpg" alt="The Kiss, Gustav Klimt" width="50%" />
<p class="caption">
Figure 4: The Kiss, Gustav Klimt
</p>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>img4</span> <span class='op'>&lt;-</span> <span class='fu'>EBImage</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/EBImage/man/io.html'>readImage</a></span><span class='op'>(</span><span class='st'>"img4.jpg"</span><span class='op'>)</span>
<span class='fu'>EBImage</span><span class='fu'>::</span><span class='fu'>hist</span><span class='op'>(</span><span class='va'>img4</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="post14_files/figure-html5/unnamed-chunk-5-1.png" width="624" /></p>
</div>
<p>0’a yaklaştıkça koyuluk; 1’e yaklaştıkça açıklık artar. Örneğin,
RGB(0,0,0) siyah; RGB(255,255,255) beyazdır.</p>
<p>Bakalım tabloda hangi renkler kullanılmış. Başta da öğrendiğimiz
üzere bu renkler RGB’nin karışımı ile oluşur.</p>
<p>Aşağıdaki resim 1200x1204x3 boyutundadır ki bu da 4,334,400 piksel
demektir.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>thekiss</span> <span class='op'>&lt;-</span> <span class='fu'>jpeg</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/jpeg/man/readJPEG.html'>readJPEG</a></span><span class='op'>(</span><span class='st'>"img4.jpg"</span><span class='op'>)</span>
<span class='va'>m_thekiss</span> <span class='op'>&lt;-</span> <span class='fu'>RImagePalette</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/RImagePalette/man/image_palette.html'>image_palette</a></span><span class='op'>(</span><span class='va'>thekiss</span>, n <span class='op'>=</span> <span class='fl'>20</span><span class='op'>)</span>
<span class='fu'>scales</span><span class='fu'>::</span><span class='fu'><a href='https://scales.r-lib.org/reference/show_col.html'>show_col</a></span><span class='op'>(</span><span class='va'>m_thekiss</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="post14_files/figure-html5/unnamed-chunk-6-1.png" width="624" /></p>
</div>
<p>Konumuzla pek alakalı değil ama madem yukarıdaki çıktıyı aldık,
ekstra bir bilgi vermek isterim. Yukarıda görülen #’li değerler
Hex/Hexadecimal (16 tabanlı sayı sistemi) kodudur ve RGB’yi temsil
etmenin bir yoludur. Örneğin, RGB(255,0,0) kırmızıdır. Bunu Hex kodu ile
#FF0000 şeklinde gösteririz. Burada # sonrası 6 digit vardır. İlk ikisi
R, sonraki ikisi G ve kalan ikisi B’yi temsil eder. Peki, #FF0000 neden
kırmızıdır? Hex sisteminde değerler, 0’dan 9’a kadar bildiğimiz rakamlar
ile; 10’dan 16’ya kadar da sırasıyla A, B, C, D, E ve F ile temsil
edilirler. O halde, FF’i şöyle çevirebiliriz:</p>
<p><span class="math inline">\(15 * (16^0) + 15 * (16^1) = 15 + 240 =
255\)</span> ki bu da <span class="math inline">\(R = FF_{16} =
255_{10}, G = 00_{16} = 0_{10}\)</span> ve <span class="math inline">\(B
= 00_{16} = 0_{10}\)</span>’dur.</p>
<p>Devam edelim ve içinde bulunduğumuz konvolüsyon katmanında
hesaplamanın nasıl yapıldığına bakalım.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-7"></span>
<img src="img5.jpg" alt="https://www.youtube.com/watch?v=1GUgD2SBl9A" width="50%" />
<p class="caption">
Figure 5: <a
href="https://www.youtube.com/watch?v=1GUgD2SBl9A"
class="uri">https://www.youtube.com/watch?v=1GUgD2SBl9A</a>
</p>
</div>
</div>
<p>Yukarıda 5x5 boyutunda bir matris görüyoruz. Burada renkler matris
şeklinde verilmiş. Sağda görülen 3x3’lük matris ise filtre (Kernel). Bu
filtre soldaki matrisin üzerinde gezdirilir ve elde edilen değerler yeni
matrise yazdırılır.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img6.jpg" width="50%" style="display: block; margin: auto;" /></p>
</div>
<p><span class="math inline">\((-1x170) + (0x245) + (1x0) + (2x234) +
(1x42) + (2x64) + (1x32) + (-2x53) + (0x128) = 394\)</span></p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img7.jpg" width="50%" style="display: block; margin: auto;" /></p>
</div>
<p>Yukarıdaki işlemi bir ya da birkaç adım kaydırarak devam ettiririz.
Burada, kodun içerisinde de göreceğimiz Stride’ın alacağı değer
belirlenir. Stride ne kadar piksel kaydıracağımızı belirlediğimiz
parametredir. Stride 1 olursa aşağıdaki gibi kaydırılır ve Kernel
işlemine devam edilir.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="img8.jpg" width="50%" style="display: block; margin: auto;" /></p>
</div>
<p>Günün sonunda bu işlemler bittiğinde 3x3’lük bir çıktı matrisi
(convolved feature) elde edilmiş olunur.</p>
<p>Peki, renkli bir resim için bu işlemler nasıl yapılır?</p>
<p>Yukarıdaki işlem 2 defa daha olmak üzere toplamda 3 defa yapılır (RGB
üç boyutludur) ve elde edilen değerler toplanarak çıktı matrisine
yazılır.</p>
<p>Ortaklama: Büyük bir resmin piksel sayısının azaltıldığı işlem
ortaklama ile yapılır. Burada bir Max Pooling veya Average Pooling
işlemi tercih edilir. Bu işlem ile resmin özellikleri kaybedilmeden
boyut küçültmeye geçilir. Ayrıca, ortaklama ile görüntüdeki gürültü,
yani görüntünün sınıflandırmaya katkıda bulunmayan öğeleri de
filtrelenmiş olur. Uygulamada kullanacağımız fotoğraflar gürültüden uzak
olacaktır.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-11"></span>
<img src="img9.jpg" alt="https://www.researchgate.net/figure/Max-pooling-and-average-pooling_fig5_343675998" width="50%" />
<p class="caption">
Figure 6: <a
href="https://www.researchgate.net/figure/Max-pooling-and-average-pooling_fig5_343675998"
class="uri">https://www.researchgate.net/figure/Max-pooling-and-average-pooling_fig5_343675998</a>
</p>
</div>
</div>
<p>Yukarıda görüldüğü gibi burada da kaydırarak ya her penceredeki
maksimum değeri ya da ortalama değeri alarak boyut küçültmüş
oluyoruz.</p>
<p>Konvolüsyon ve ortaklama aşamaları istenildiği kadar tekrar
ettirilebilir.</p>
<p>Tam Bağlantı: Tam bağlantıya kadar verilerimiz matris şeklinde gelir.
Tam bağlantı katmanına geçmeden önce bir Flattening (düzleştirme) işlemi
yapılır. Bu katman sınıflandırmada kullanılan standart sinir ağlarından
oluşur.</p>
<p>Düzleştirme işlemini matristen vektöre dönüştürmek gibi
düşünebiliriz.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-12"></span>
<img src="img10.jpg" alt="https://towardsai.net/p/machine-learning/beginner-guides-to-convolutional-neural-network-from-scratch-kuzushiji-mnist-75f42c175b21" width="50%" />
<p class="caption">
Figure 7: <a
href="https://towardsai.net/p/machine-learning/beginner-guides-to-convolutional-neural-network-from-scratch-kuzushiji-mnist-75f42c175b21"
class="uri">https://towardsai.net/p/machine-learning/beginner-guides-to-convolutional-neural-network-from-scratch-kuzushiji-mnist-75f42c175b21</a>
</p>
</div>
</div>
<p>Öğrendiklerimizi toparlamak adına <a
href="https://poloclub.github.io/cnn-explainer/">şurada</a> CNN’i
açıklayan çok güzel bir sayfanın adresini verebilirim. Örnek olarak
pizza resmini seçtim. Buraya kadar öğrendiğimiz tüm bilgiler aşağıdaki
resmin üzerinde yer almaktadır.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-13"></span>
<img src="img11.jpg" alt="https://poloclub.github.io/cnn-explainer/" width="50%" />
<p class="caption">
Figure 8: <a
href="https://poloclub.github.io/cnn-explainer/"
class="uri">https://poloclub.github.io/cnn-explainer/</a>
</p>
</div>
</div>
<p>Bu uygulamada üzerinde çok durmayacağız ama birazdan model
oluştururken Adam isimli bir optimizasyon algoritması kullanacağız.
Sadece bunu neden yaptığımıza bakalım. Derin öğrenmede, öğrenme
işleminin sağlıklı bir sonuca ulaşması için hata fonksiyonunun mutlak
minimum değerinin bulunması gerekir. Bu da optimizasyon yöntemleri
kullanılarak gerçekleştiriliyor. Hatayı en küçük yapmada (ağın ürettiği
çıkış değeri ile gerçek değer arasındaki farkın minimizasyonu)
kullanılan yöntemlere optimizasyon deniliyor. Yapay sinir ağlarında da
optimizasyon için en çok kullanılan yöntemlerden biri Gradyan İnişi’dir
(Gradient Descent). Optimizasyon algoritmalarında öğrenme katsayısının
ayarlanması modelin eğitimi için kritiktir. Biz burada Adam’ı
seçeceğiz.</p>
<p>Bunun dışında yine üzerinde çok durmayacağımız ama bilgimizin
olmasında fayda olacak aktivasyon fonksiyonlarından bahsedelim.
Aktivasyon fonksiyonları, bir katmanda bulunan nöronlara ait çıktı
değerini sonraki katmanlara aktarırken kullanılır. Biz ReLU (Rectified
Linear) ve Sigmoid’i kullanacağız. ReLU’da, giriş değeri sıfırın altında
iken çıktı sıfırdır, ancak giriş değeri sıfırın üzerinde ise çıkış giriş
değerine eşittir ve bağımlı değişkenle doğrusal bir ilişki oluşmaktadır.
Sigmoid ise tanım kümesindeki elemanların her biri için 0-1 arasında bir
değer üretir.</p>
<p>CNN’i anlatmak bu kadar basit değil tabiki de. Bu uygulama bir giriş
niteliğinde olsun istedim. Umuyorum başlangıç için yeterli olmuştur.</p>
<p><strong><em>Uygulama bölümüne geçebiliriz.</em></strong></p>
<p>Bu çalışmada, TBMM’nin 27. dönem milletvekillerine ait fotoğrafları
kullanacağız. Milletvekilleri sayı nedeniyle AKP ve CHP ile
sınırlandırılmıştır. Yani, çalışmanın sonunda ikili bir sınıflandırma
yapmış olacağız.</p>
<p>Verilere, çalışmanın sonunda paylaşacağım kod ile ulaşabileceğiniz
gibi <a
href="https://github.com/rpydaneogrendim/rblog/tree/main/data">GitHub
hesabımdan</a> <em>post14</em> dosyasını indirerek de
ulaşabilirsiniz.</p>
<p>Detaylara geçmeden önce fotoğraflar ile ilgili bir not düşmek
istiyorum. Bu çalışmada amacım süreç boyunca sadece yüze odaklanmak
oldu. Yani, fotoğrafın geri kalanı ile ilgilenmek istemedim. Evet, CNN
de resimler arasındaki farka odaklanır ve etiketlerin hangi özellik ile
öne çıktığını öğrenir ancak kişisel deneyimim beni validasyonda da
başarıyı arttıracak bir yola yönlendirdi. Bu çalışmaya ilk başladığımda
bir fotoğrafın tamamını eğitmeye çalıştım ancak validasyon sırasında
düşük doğrulama (accuracy) alıyordum. Çeşitli denemelerden sonra tatmin
edici sonuç alamayınca (ki bu sürede PC de ciddi yoruluyor) yüzleri
nasıl kırparım sorusuna cevap bulmaya çalıştım ve aşağıdaki paketler ve
kod yardımı ile tüm yüzleri tespit ettirip yeni bir eğitim ve test seti
yarattım.</p>
<p>Kullanacağımız paket <a
href="https://github.com/bnosac/image">image.libfacedetection</a>
olacak. Bu paket, görüntülerdeki yüzleri algılamak için önceden
eğitilmiş bir konvolüsyonel sinir ağı imkanı sunuyor.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://docs.ropensci.org/magick/'>magick</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/bnosac/image'>image.libfacedetection</a></span><span class='op'>)</span>

<span class='co'>########## fotoğrafların isimlerinin aktarımı ##########</span>

<span class='va'>img_face_akp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span><span class='st'>"tbmm/training/AKP/"</span>, pattern <span class='op'>=</span> <span class='st'>"*.jpg"</span><span class='op'>)</span>
<span class='va'>img_face_chp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span><span class='st'>"tbmm/training/CHP/"</span>, pattern <span class='op'>=</span> <span class='st'>"*.jpg"</span><span class='op'>)</span>
<span class='va'>img_face_train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>img_face_akp</span>,<span class='va'>img_face_chp</span><span class='op'>)</span>
<span class='va'>img_face_test</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span><span class='st'>"tbmm/test/"</span>, pattern <span class='op'>=</span> <span class='st'>"*.jpg"</span><span class='op'>)</span>

<span class='co'>########## fotoğrafların okutulması ##########</span>

<span class='va'>img_train_read</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>img_face_train</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  
  <span class='kw'>if</span><span class='op'>(</span><span class='va'>i</span> <span class='op'>&lt;=</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>img_face_akp</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
    
    <span class='va'>img_train_read</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/magick/reference/editing.html'>image_read</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"tbmm/training/AKP/"</span>,<span class='va'>img_face_train</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>
    
  <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span>
    
    <span class='va'>img_train_read</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/magick/reference/editing.html'>image_read</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"tbmm/training/CHP/"</span>,<span class='va'>img_face_train</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>
    
  <span class='op'>}</span>
  
<span class='op'>}</span>

<span class='va'>img_test_read</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>img_face_test</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  
  <span class='va'>img_test_read</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/magick/reference/editing.html'>image_read</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"tbmm/test/"</span>,<span class='va'>img_face_test</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>
  
<span class='op'>}</span>

<span class='co'>########## yüzlerin elde edilip kaydedilmesi ##########</span>

<span class='co'># training:</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>img_train_read</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  
  <span class='co'># Hata veren fotoğraf(lar) için tryCatch() koyuldu</span>
  <span class='co'># Hatalı fotoğraf(lar) otomatik olarak silinmiş olacak</span>
  
  <span class='kw'><a href='https://rdrr.io/r/base/conditions.html'>tryCatch</a></span><span class='op'>(</span>
    expr <span class='op'>=</span> <span class='op'>{</span>
      
      <span class='va'>face</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/image.libfacedetection/man/image_detect_faces.html'>image_detect_faces</a></span><span class='op'>(</span><span class='va'>img_train_read</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>
      
      <span class='fu'><a href='https://docs.ropensci.org/magick/reference/transform.html'>image_crop</a></span><span class='op'>(</span>
        <span class='va'>img_train_read</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span>,
        <span class='fu'><a href='https://docs.ropensci.org/magick/reference/geometry.html'>geometry_area</a></span><span class='op'>(</span>
          x <span class='op'>=</span> <span class='va'>face</span><span class='op'>$</span><span class='va'>detections</span><span class='op'>$</span><span class='va'>x</span>,
          y <span class='op'>=</span> <span class='va'>face</span><span class='op'>$</span><span class='va'>detections</span><span class='op'>$</span><span class='va'>y</span>,
          width <span class='op'>=</span> <span class='va'>face</span><span class='op'>$</span><span class='va'>detections</span><span class='op'>$</span><span class='va'>width</span>,
          height <span class='op'>=</span> <span class='va'>face</span><span class='op'>$</span><span class='va'>detections</span><span class='op'>$</span><span class='va'>height</span>
        <span class='op'>)</span>
      <span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>imageCrop</span>
      
      <span class='fu'><a href='https://docs.ropensci.org/magick/reference/editing.html'>image_write</a></span><span class='op'>(</span>
        <span class='va'>imageCrop</span>,
        path <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>i</span> <span class='op'>&lt;=</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>img_face_akp</span><span class='op'>)</span>,
                      <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"tbmm/training/AKP_face_only/"</span>, <span class='va'>img_face_train</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span>,
                      <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"tbmm/training/CHP_face_only/"</span>, <span class='va'>img_face_train</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>,
        format <span class='op'>=</span> <span class='st'>"jpg"</span>
      <span class='op'>)</span>
      
    <span class='op'>}</span>,
    
    error <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>e</span><span class='op'>)</span> <span class='op'>{</span>
      <span class='fu'><a href='https://rdrr.io/r/base/message.html'>message</a></span><span class='op'>(</span><span class='st'>"Caught an error!"</span>,<span class='va'>img_face_train</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span>
    <span class='op'>}</span>
  <span class='op'>)</span>
  
<span class='op'>}</span>

<span class='co'># test:</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>img_test_read</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  
  <span class='kw'><a href='https://rdrr.io/r/base/conditions.html'>tryCatch</a></span><span class='op'>(</span>
    expr <span class='op'>=</span> <span class='op'>{</span>
      
      <span class='va'>face</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/image.libfacedetection/man/image_detect_faces.html'>image_detect_faces</a></span><span class='op'>(</span><span class='va'>img_test_read</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span><span class='op'>)</span>
      
      <span class='fu'><a href='https://docs.ropensci.org/magick/reference/transform.html'>image_crop</a></span><span class='op'>(</span>
        <span class='va'>img_test_read</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span>,
        <span class='fu'><a href='https://docs.ropensci.org/magick/reference/geometry.html'>geometry_area</a></span><span class='op'>(</span>
          x <span class='op'>=</span> <span class='va'>face</span><span class='op'>$</span><span class='va'>detections</span><span class='op'>$</span><span class='va'>x</span>,
          y <span class='op'>=</span> <span class='va'>face</span><span class='op'>$</span><span class='va'>detections</span><span class='op'>$</span><span class='va'>y</span>,
          width <span class='op'>=</span> <span class='va'>face</span><span class='op'>$</span><span class='va'>detections</span><span class='op'>$</span><span class='va'>width</span>,
          height <span class='op'>=</span> <span class='va'>face</span><span class='op'>$</span><span class='va'>detections</span><span class='op'>$</span><span class='va'>height</span>
        <span class='op'>)</span>
      <span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>imageCrop</span>
      
      <span class='fu'><a href='https://docs.ropensci.org/magick/reference/editing.html'>image_write</a></span><span class='op'>(</span>
        <span class='va'>imageCrop</span>,
        path <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"tbmm/test/test_face_only/"</span>, <span class='va'>img_face_test</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span>,
        format <span class='op'>=</span> <span class='st'>"jpg"</span>
      <span class='op'>)</span>
      
    <span class='op'>}</span>,
    
    error <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>e</span><span class='op'>)</span> <span class='op'>{</span>
      <span class='fu'><a href='https://rdrr.io/r/base/message.html'>message</a></span><span class='op'>(</span><span class='st'>"Caught an error!"</span>,<span class='va'>img_face_test</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span>
    <span class='op'>}</span>
  <span class='op'>)</span>
  
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>Eğitilecek veri setine ulaşalım. Eğitim (train) veri setinin
içerisinde yer alan sınıfları iki dosyaya ayırdım: AKP ve CHP.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://keras.rstudio.com'>keras</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/rstudio/tensorflow'>tensorflow</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/aoles/EBImage'>EBImage</a></span><span class='op'>)</span>

<span class='va'>imgs_akp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span><span class='st'>"tbmm/training/AKP_face_only/"</span><span class='op'>)</span>
<span class='va'>imgs_chp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span><span class='st'>"tbmm/training/CHP_face_only/"</span><span class='op'>)</span>
<span class='va'>imgs</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>imgs_akp</span>,<span class='va'>imgs_chp</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Toplamda 418 adet fotoğraf bulunmaktadır. Ancak eğitilecek veri seti
dengesiz verilerden (imbalanced data) oluşmaktadır ki bu da bir
problemdir. Aşağıda görüldüğü üzere AKP sınıfından 284; CHP sınıfından
134 milletvekili bulunmaktadır.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='st'>"AKP"</span>,<span class='va'>imgs</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 284</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='st'>"CHP"</span>,<span class='va'>imgs</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 134</code></pre>
</div>
<p>Burada, AKP daha fazla olduğu için AKP’den 150 adet milletvekilini
random bir şekilde kaldırabiliriz. Seçtiğimiz bu yöntemin karşılığı
Undersampling olarak geçiyor. Kolay bir yöntem olmasının yanında önemli
bilgileri kaybetmemize büyük olasılıkla neden olacak da bir
yöntemdir.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>imgs_akp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='st'>"AKP"</span>,<span class='va'>imgs</span>, value <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>imgs_chp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grep</a></span><span class='op'>(</span><span class='st'>"CHP"</span>,<span class='va'>imgs</span>, value <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>imgs_akp</span> <span class='op'>&lt;-</span> <span class='va'>imgs_akp</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs_akp</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs_chp</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>removed_akp</span> <span class='op'>&lt;-</span> <span class='va'>imgs</span><span class='op'>[</span><span class='op'>!</span><span class='op'>(</span><span class='va'>imgs</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>imgs_akp</span>,<span class='va'>imgs_chp</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>imgs</span> <span class='op'>&lt;-</span> <span class='va'>imgs</span><span class='op'>[</span><span class='va'>imgs</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>imgs_akp</span>,<span class='va'>imgs_chp</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<p>Undersampling ile iki kategoriye de 134 fotoğraf vererek eğitim
setini dengelemiş olduk.</p>
<p>Eğitim setindeki dosyaların içerisinde bulunan fotoğraflara
ulaşalım.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  
  <span class='kw'>if</span><span class='op'>(</span><span class='va'>i</span> <span class='op'>&lt;=</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs_akp</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
    
    <span class='va'>train</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/EBImage/man/io.html'>readImage</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"tbmm/training/AKP_face_only/"</span>,<span class='va'>imgs</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>
    
  <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span>
    
    <span class='va'>train</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/EBImage/man/io.html'>readImage</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"tbmm/training/CHP_face_only/"</span>,<span class='va'>imgs</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>
    
  <span class='op'>}</span>
  
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>Şimdi de test seti dosyasındaki iki fotoğrafı alalım.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>imgs_test</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span><span class='st'>"tbmm/test/test_face_only/"</span><span class='op'>)</span>

<span class='va'>test</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs_test</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  
  <span class='va'>test</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/EBImage/man/io.html'>readImage</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"tbmm/test/test_face_only/"</span>,<span class='va'>imgs_test</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>
  
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>Eğitim setindeki fotoğraflar birbirine yakın boyutlu olsalar da
farklılık bulunmaktadır. Tüm fotoğrafları aynı boyutlu yapacağız. Aynı
boyuta getirirken şuna dikkat etmeliyiz: Daha büyük boyutlar daha fazla
özelliğe sahip olacaktır ancak daha büyük boyut aynı zamanda eğitim
aşamasında daha çok zaman alacaktır. Tam tersi, daha küçük boyutta da
işimize yarayacak özellikleri kaybetmiş olabiliriz. Bu noktada
sanatımızı konuşturacağız. Ön bir inceleme ile 64x64 olabilir diye
düşündüm.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  
  <span class='va'>train</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/EBImage/man/spatial.html'>resize</a></span><span class='op'>(</span><span class='va'>train</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span>, <span class='fl'>64</span>, <span class='fl'>64</span><span class='op'>)</span>
  
  <span class='kw'>if</span><span class='op'>(</span><span class='va'>i</span> <span class='op'>==</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
    
    <span class='va'>train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/EBImage/man/combine.html'>combine</a></span><span class='op'>(</span><span class='va'>train</span><span class='op'>)</span>
    
  <span class='op'>}</span>
  
<span class='op'>}</span>

<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>train</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Formal class &#39;Image&#39; [package &quot;EBImage&quot;] with 2 slots
  ..@ .Data    : num [1:64, 1:64, 1:3, 1:268] 0.9191 0.9625 0.7857 0.4149 0.0428 ...
  ..@ colormode: int 2
  ..$ dim: int [1:4] 64 64 3 268</code></pre>
</div>
<p>Eğitim setindeki fotoğrafları bir araya getirdik. Bu fotoğraflar
64x64x3 boyutunda ve 268 adet.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs_test</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  
  <span class='va'>test</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/EBImage/man/spatial.html'>resize</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>[[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>]</span>, <span class='fl'>64</span>, <span class='fl'>64</span><span class='op'>)</span>
  
  <span class='kw'>if</span><span class='op'>(</span><span class='va'>i</span> <span class='op'>==</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs_test</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
    
    <span class='va'>test</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/EBImage/man/combine.html'>combine</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>)</span>
    
  <span class='op'>}</span>
  
<span class='op'>}</span>

<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Formal class &#39;Image&#39; [package &quot;EBImage&quot;] with 2 slots
  ..@ .Data    : num [1:64, 1:64, 1:3, 1:2] 0.305 0.343 0.428 0.522 0.605 ...
  ..@ colormode: int 2
  ..$ dim: int [1:4] 64 64 3 2</code></pre>
</div>
<p>Aynı şekilde, test setindeki fotoğrafları bir araya getirdik. Bu
fotoğraflar 64x64x3 boyutunda ve 2 adet.</p>
<p>Fakat yukarıdaki format model aşamasında çalışmayacaktır. Aşağıdaki
gibi yeniden sıralayıp çalışmasını sağlayacağız.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>train</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/aperm.html'>aperm</a></span><span class='op'>(</span><span class='va'>train</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>,<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># 268, 64, 64, 3</span>
<span class='va'>test</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/aperm.html'>aperm</a></span><span class='op'>(</span><span class='va'>test</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>,<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># 2, 64, 64, 3</span>
</code></pre>
</div>
</div>
<p>Etiketleri belirleyelim.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>train_y</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs_akp</span><span class='op'>)</span><span class='op'>)</span>, <span class='co'># AKP: 0</span>
  <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>imgs_chp</span><span class='op'>)</span><span class='op'>)</span> <span class='co'># CHP: 1</span>
<span class='op'>)</span>

<span class='va'>test_y</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
  <span class='fl'>0</span>, <span class='co'># AKP</span>
  <span class='fl'>1</span> <span class='co'># CHP</span>
<span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Kategorik değişkenleri ikili olarak temsil eden One Hot Encoding
yapacağız.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>trainLabels</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/keras/man/to_categorical.html'>to_categorical</a></span><span class='op'>(</span><span class='va'>train_y</span><span class='op'>)</span>
<span class='va'>testLabels</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/keras/man/to_categorical.html'>to_categorical</a></span><span class='op'>(</span><span class='va'>test_y</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>İlk kolonun AKP’yi; ikinci kolonun CHP’yi temsil ettiğini
görebiliriz.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>trainLabels</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>     [,1] [,2]
[1,]    1    0
[2,]    1    0
[3,]    1    0
[4,]    1    0
[5,]    1    0
[6,]    1    0</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>tail</a></span><span class='op'>(</span><span class='va'>trainLabels</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>       [,1] [,2]
[263,]    0    1
[264,]    0    1
[265,]    0    1
[266,]    0    1
[267,]    0    1
[268,]    0    1</code></pre>
</div>
<p>Model kurma aşamasına geçmeden önce Keras ve Tensorflow’a
bakalım.</p>
<p>Keras, Python ile yazılmış etkili bir üst düzey sinir ağı API’dır.
Keras kütüphanesi CNTK, TensorFlow ve Theano üzerinde çalışabilir.
TensorFlow ise uçtan uca açık kaynak bir derin öğrenme framework’üdür.
Yani, derin öğrenme için geliştirilmiş açık kaynak bir matematik
kütüphanesidir.</p>
<p>Şimdi modele geçebiliriz.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>model</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/keras/man/keras_model_sequential.html'>keras_model_sequential</a></span><span class='op'>(</span>name <span class='op'>=</span> <span class='st'>"CNN"</span><span class='op'>)</span> <span class='op'><a href='https://rdrr.io/pkg/keras/man/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://rdrr.io/pkg/keras/man/layer_conv_2d.html'>layer_conv_2d</a></span><span class='op'>(</span>
    filters <span class='op'>=</span> <span class='fl'>8</span>,
    kernel_size <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>5</span><span class='op'>)</span>,
    activation <span class='op'>=</span> <span class='st'>"relu"</span>,
    input_shape <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>64</span>, <span class='fl'>64</span>, <span class='fl'>3</span><span class='op'>)</span>
  <span class='op'>)</span> <span class='op'><a href='https://rdrr.io/pkg/keras/man/pipe.html'>%&gt;%</a></span> <span class='co'># Convolution, ReLU</span>
  <span class='fu'><a href='https://rdrr.io/pkg/keras/man/layer_max_pooling_2d.html'>layer_max_pooling_2d</a></span><span class='op'>(</span>pool_size <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://rdrr.io/pkg/keras/man/pipe.html'>%&gt;%</a></span> <span class='co'># Max Pooling</span>
  <span class='fu'><a href='https://rdrr.io/pkg/keras/man/layer_flatten.html'>layer_flatten</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://rdrr.io/pkg/keras/man/pipe.html'>%&gt;%</a></span> <span class='co'># Flattening</span>
  <span class='fu'><a href='https://rdrr.io/pkg/keras/man/layer_dense.html'>layer_dense</a></span><span class='op'>(</span>units <span class='op'>=</span> <span class='fl'>16</span>,
              activation <span class='op'>=</span> <span class='st'>"relu"</span><span class='op'>)</span> <span class='op'><a href='https://rdrr.io/pkg/keras/man/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/pkg/keras/man/layer_dense.html'>layer_dense</a></span><span class='op'>(</span>units <span class='op'>=</span> <span class='fl'>2</span>,
              activation <span class='op'>=</span> <span class='st'>"sigmoid"</span>,
              name <span class='op'>=</span> <span class='st'>"Output"</span><span class='op'>)</span> <span class='op'><a href='https://rdrr.io/pkg/keras/man/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://generics.r-lib.org/reference/compile.html'>compile</a></span><span class='op'>(</span>
    loss <span class='op'>=</span> <span class='st'>"binary_crossentropy"</span>,
    optimizer <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/keras/man/optimizer_adam.html'>optimizer_adam</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='co'># Adam</span>
    metrics <span class='op'>=</span> <span class='st'>"accuracy"</span>
  <span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>history</span> <span class='op'>&lt;-</span> <span class='va'>model</span> <span class='op'><a href='https://rdrr.io/pkg/keras/man/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://generics.r-lib.org/reference/fit.html'>fit</a></span><span class='op'>(</span>
    <span class='va'>train</span>,
    <span class='va'>trainLabels</span>,
    epochs <span class='op'>=</span> <span class='fl'>50</span>,
    batch_size <span class='op'>=</span> <span class='fl'>64</span>,
    validation_split <span class='op'>=</span> <span class='fl'>0.1</span>
  <span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>history</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="post14_files/figure-html5/unnamed-chunk-27-1.png" width="624" /></p>
</div>
<p>Aşağıda hata matrisi (confusion matrix) oluşturalım.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>

<span class='va'>train_prob</span> <span class='op'>&lt;-</span> <span class='va'>model</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>train</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span><span class='st'>"AKP"</span><span class='op'>=</span><span class='fl'>1</span>,<span class='st'>"CHP"</span><span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='st'>"Actual"</span> <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>train_y</span> <span class='op'>==</span> <span class='fl'>0</span>, <span class='st'>"AKP"</span>, <span class='st'>"CHP"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='st'>"Pred"</span> <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>AKP</span> <span class='op'>&gt;</span> <span class='fl'>0.5</span>, <span class='st'>"AKP"</span>, <span class='st'>"CHP"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>tbl1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span>Predicted <span class='op'>=</span> <span class='va'>train_prob</span><span class='op'>$</span><span class='va'>Pred</span>, Actual <span class='op'>=</span> <span class='va'>train_prob</span><span class='op'>$</span><span class='va'>Actual</span><span class='op'>)</span>
<span class='va'>tbl1</span>
</code></pre>
</div>
<pre><code>         Actual
Predicted AKP CHP
      AKP 124  31
      CHP  10 103</code></pre>
</div>
<p>Hata matrisine göre 227 milletvekilinin partisini doğru; 41
milletvekilinin partisini yanlış tahmin etti. Buradan da Doğruluk oranı
(Accuracy rate) 0.8470149 olur.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>test_prob</span> <span class='op'>&lt;-</span> <span class='va'>model</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span><span class='va'>test</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span><span class='st'>"AKP"</span><span class='op'>=</span><span class='fl'>1</span>,<span class='st'>"CHP"</span><span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='st'>"Actual"</span> <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>test_y</span> <span class='op'>==</span> <span class='fl'>0</span>, <span class='st'>"AKP"</span>, <span class='st'>"CHP"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span><span class='st'>"Pred"</span> <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>AKP</span> <span class='op'>&gt;</span> <span class='fl'>0.5</span>, <span class='st'>"AKP"</span>, <span class='st'>"CHP"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>tbl2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/table.html'>table</a></span><span class='op'>(</span>Predicted <span class='op'>=</span> <span class='va'>test_prob</span><span class='op'>$</span><span class='va'>Pred</span>, Actual <span class='op'>=</span> <span class='va'>test_prob</span><span class='op'>$</span><span class='va'>Actual</span><span class='op'>)</span>
<span class='va'>tbl2</span>
</code></pre>
</div>
<pre><code>         Actual
Predicted AKP CHP
      AKP   1   0
      CHP   0   1</code></pre>
</div>
<p>Test verilerini kullandığımızda karşımıza aşağıdaki gibi bir sonuç
çıkmaktadır.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="post14_files/figure-html5/unnamed-chunk-30-1.png" width="624" data-distill-preview=1 /></p>
</div>
<p>Erdoğan’ın AKP’li bir yüze sahip olma olasılığı 0.66 iken;
Kılıçdaroğlu’nun CHP’li bir yüze sahip olma olasılığı 0.63</p>
<p>Bu uygulamanın ardından güzel bir Shiny Web uygulaması yapıp
paylaşmak isterdim ancak hem veri setinin yetersiz oluşu hem de etik
sebepler ile böyle bir şeyi paylaşmayı uygun görmedim. Çalışmaya konu
veri setindeki fotoğrafların bugün itibarıyla hangi
etiketin/sınıfın/kategorinin/partinin içinden olduğu net bir şekilde
bellidir ancak dışarıdan uygulamaya girecek bir fotoğraf için bu tahmin
şu şartlarda riskli olabilir. Çalışmanın eğitim amaçlı paylaşıldığını ve
bu alanda neler yapılabileceği konusunda fikir vermeyi amaçladığını
belirtmek isterim.</p>
<p>Çalışmanın diğer R kodlarına aşağıdan ulaşabilirsiniz.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Python entegrasyonu</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rstudio.github.io/reticulate/'>reticulate</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rstudio.github.io/reticulate/reference/use_python.html'>use_python</a></span><span class='op'>(</span><span class='st'>"C:/Users/.../Documents/.virtualenvs/myenv/Scripts/python.exe"</span><span class='op'>)</span>

<span class='co'># Web kazıma ile verilerin elde edilmesi</span>

<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rvest.tidyverse.org/'>rvest</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>

<span class='va'>urlsList</span> <span class='op'>&lt;-</span> <span class='fu'><a href='http://xml2.r-lib.org/reference/read_xml.html'>read_html</a></span><span class='op'>(</span><span class='st'>"https://www.tbmm.gov.tr/Milletvekilleri/liste"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rvest.tidyverse.org/reference/rename.html'>html_nodes</a></span><span class='op'>(</span><span class='st'>"div.col-md-8 a"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rvest.tidyverse.org/reference/html_attr.html'>html_attr</a></span><span class='op'>(</span><span class='st'>"href"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span><span class='st'>"urls"</span><span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>urls <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"https://www.tbmm.gov.tr"</span>,<span class='va'>urls</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>partyList</span> <span class='op'>&lt;-</span> <span class='fu'><a href='http://xml2.r-lib.org/reference/read_xml.html'>read_html</a></span><span class='op'>(</span><span class='st'>"https://www.tbmm.gov.tr/Milletvekilleri/liste"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rvest.tidyverse.org/reference/rename.html'>html_nodes</a></span><span class='op'>(</span><span class='st'>"div.col-md-4.text-right"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rvest.tidyverse.org/reference/html_text.html'>html_text</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span><span class='st'>"party"</span><span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>party <span class='op'>=</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_trim.html'>str_trim</a></span><span class='op'>(</span><span class='va'>party</span><span class='op'>)</span>,
         party <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"İ"</span>,<span class='st'>"I"</span>,<span class='va'>party</span><span class='op'>)</span>,
         party <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"Ğ"</span>,<span class='st'>"G"</span>,<span class='va'>party</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>master</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='va'>urlsList</span>,<span class='va'>partyList</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>party</span> <span class='op'><a href='https://rdrr.io/r/base/match.html'>%in%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"AK Parti"</span>,<span class='st'>"CHP"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>party <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>party</span> <span class='op'>==</span> <span class='st'>"AK Parti"</span>,<span class='st'>"AKP"</span>,<span class='va'>party</span><span class='op'>)</span><span class='op'>)</span>

<span class='kw'>for</span><span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>master</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  
  <span class='va'>img_mop</span> <span class='op'>&lt;-</span> <span class='fu'><a href='http://xml2.r-lib.org/reference/read_xml.html'>read_html</a></span><span class='op'>(</span><span class='va'>master</span><span class='op'>$</span><span class='va'>urls</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
    <span class='fu'><a href='https://rvest.tidyverse.org/reference/rename.html'>html_nodes</a></span><span class='op'>(</span><span class='st'>"img"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
    <span class='va'>.</span><span class='op'>[[</span><span class='fl'>3</span><span class='op'>]</span><span class='op'>]</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
    <span class='fu'><a href='https://rvest.tidyverse.org/reference/html_attr.html'>html_attr</a></span><span class='op'>(</span><span class='st'>"src"</span><span class='op'>)</span>
  
  <span class='fu'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='op'>(</span><span class='va'>img_mop</span>,
                <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>"C:/.../"</span>, <span class='co'># fotoğrafların ineceği yer</span>
                       <span class='va'>master</span><span class='op'>$</span><span class='va'>party</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>,<span class='st'>"_"</span>,<span class='va'>i</span>,<span class='st'>".jpg"</span><span class='op'>)</span>, mode <span class='op'>=</span> <span class='st'>"wb"</span><span class='op'>)</span>
  
<span class='op'>}</span>

<span class='co'># Test görselleştirme</span>

<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  Test <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Recep Tayyip Erdoğan"</span>, <span class='st'>"Kemal Kılıçdaroğlu"</span><span class='op'>)</span>,
  AKP <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>test_prob</span><span class='op'>[</span><span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>]</span>,<span class='va'>test_prob</span><span class='op'>[</span><span class='fl'>2</span>,<span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>,
  CHP <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>test_prob</span><span class='op'>[</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>]</span>,<span class='va'>test_prob</span><span class='op'>[</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>]</span><span class='op'>)</span>,
  Img <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"https://pbs.twimg.com/profile_images/1151410974240444416/yVvaD7hU_400x400.jpg"</span>,
          <span class='st'>"https://pbs.twimg.com/profile_images/1446836678832922629/UB3uap87_400x400.jpg"</span><span class='op'>)</span>
<span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> 
  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/pivot_longer.html'>pivot_longer</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>Test</span>,<span class='va'>Img</span><span class='op'>)</span>, names_to <span class='op'>=</span> <span class='st'>"Party"</span>, values_to <span class='op'>=</span> <span class='st'>"Prob"</span><span class='op'>)</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>df</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>Test</span>, y <span class='op'>=</span> <span class='va'>Prob</span>, fill <span class='op'>=</span> <span class='va'>Party</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_bar.html'>geom_bar</a></span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"identity"</span>, position <span class='op'>=</span> <span class='st'>"dodge"</span>, alpha <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>ggimage</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/ggimage/man/geom_image.html'>geom_image</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>image <span class='op'>=</span> <span class='va'>Img</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>0.15</span>,
                      position <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/position_dodge.html'>position_dodge</a></span><span class='op'>(</span>width <span class='op'>=</span> <span class='fl'>0.9</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_fill_manual</a></span><span class='op'>(</span>values <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"orange"</span>,<span class='st'>"red"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggtheme.html'>theme_minimal</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/theme.html'>theme</a></span><span class='op'>(</span>plot.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_text</a></span><span class='op'>(</span>face <span class='op'>=</span> <span class='st'>"bold"</span>, hjust <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>,
        legend.title <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/element.html'>element_blank</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span>limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>labs</a></span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"İki Politik Liderin Yüzleri Hangi Olasılıkla Hangi Partiye Ait?"</span>,
       y <span class='op'>=</span> <span class='st'>"Olasılık"</span>, x <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="sourceCode" id="cb9"><pre
class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
