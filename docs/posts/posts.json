[
  {
    "path": "posts/2022-08-21-post20/",
    "title": "Sentiment Comparisons on Interest Rate Releases",
    "description": "Sentiment analysis of the CBRT's interest rates on press releases.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-08-21",
    "categories": [
      "Text",
      "Finance"
    ],
    "contents": "\r\nThe CBRT cut its interest rate by 100 bps to 13% in its August 2022\r\nmeeting. In a country where official inflation goes to 100% and the\r\nexchange rate moves towards 20, the central bank of that country decides\r\nto cut interest rates. Hakan Kara, former chief economist of the CBRT,\r\ntweeted the day the decision was announced:\r\nEconomists are discussing why the CBRT cut its interest rate. I\r\nthink this is no longer economistsâ€™ question. Sociologists, political\r\nscientists, psychologists, etc. should evaluate the issue.\r\nAlthough, Press Releases on Interest Rates are not taken seriously\r\nbecause the credibility of the CBRT has been shaken, we will take it\r\nseriously for sentiment analysis. You can access the data I collected\r\nusing web scraping by downloading post20_1.xlsx file on my GitHub\r\naccount. The codes I used to collect the data will be available at\r\nthe end of the post. The reason I started the analysis date from 2014 is\r\nthat the CBRT stopped publishing its press releases in pdf format as of\r\n2014.\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\nmaster <- readxl::read_excel(\"data1.xlsx\") %>% \r\n  group_by(date) %>% \r\n  slice(-1) %>% # remove dates from 'text' column\r\n  ungroup()\r\n\r\n\r\nIn the table below, you can see the CBRTâ€™s latest press release on\r\ninterest rates.\r\n\r\n\r\ntext\r\n\r\n\r\nThe Monetary Policy Committee (MPC) has decided to reduce the policy\r\nrate (one-week repo auction rate) from 14 percent to 13 percent.\r\n\r\n\r\nThe weakening effects of geopolitical risks on global economic activity\r\ncontinue to increase. Global growth forecasts for the upcoming period\r\nare being revised downwards and recession is increasingly assessed as an\r\ninevitable risk factor. While the negative consequences of supply\r\nconstraints in some sectors, particularly basic food, have been\r\nalleviated by the strategic solutions facilitated by TÃ¼rkiye, the upward\r\ntrend in producer and consumer prices continues on an international\r\nscale. The effects of high global inflation on inflation expectations\r\nand international financial markets are closely monitored. Moreover,\r\ncentral banks in advanced economies emphasize that the rise in inflation\r\nmay last longer than previously anticipated due to rising energy prices,\r\nimbalances between supply and demand, and rigidities in labor markets.\r\nThe divergence in monetary policy steps and communications of central\r\nbanks in advanced economies continue due to their diverse economic\r\noutlook. It is observed that central banks continue their efforts to\r\ndevelop new supportive measures and tools to cope with the increasing\r\nuncertainties in financial markets.\r\n\r\n\r\nRobust growth in the beginning of the year continued in the second\r\nquarter as well, with the support of external demand. Compared to peer\r\neconomies, job creation has been stronger. Considering the sectors that\r\ncontribute to the employment increase, it is observed that the growth\r\ndynamics are supported by structural gains. While share of sustainable\r\ncomponents of economic growth increases, the stronger than expected\r\ncontribution of tourism revenues to the current account balance\r\ncontinues. On the other hand, high course of energy prices and the\r\nlikelihood of a recession in main trade partners keep the risks on\r\ncurrent account balance alive. Sustainable current account balance is\r\nimportant for price stability. The rate of credit growth and allocation\r\nof funds for real economic activity purposes are closely monitored. In\r\naddition, the recent increase in spread between policy rate and the loan\r\ninterest rate is considered to reduce the effectiveness of monetary\r\ntransmission. In this context, the Committee decided to further\r\nstrengthen the macroprudential policy set with tools supporting the\r\neffectiveness of the monetary transmission mechanism.\r\n\r\n\r\nIncrease in inflation is driven by the lagged and indirect effects of\r\nrising energy costs resulting from geopolitical developments, effects of\r\npricing formations that are not supported by economic fundamentals,\r\nstrong negative supply shocks caused by the rise in global energy, food\r\nand agricultural commodity prices. The Committee expects disinflation\r\nprocess to start on the back of measures taken and decisively\r\nimplemented for strengthening sustainable price and financial stability\r\nalong with the resolution of the ongoing regional conflict.\r\nAdditionally, leading indicators for the third quarter point to some\r\nloss of momentum in economic activity. It is important that financial\r\nconditions remain supportive to preserve the growth momentum in\r\nindustrial production and the positive trend in employment in a period\r\nof increasing uncertainties regarding global growth as well as\r\nescalating geopolitical risk. Accordingly, the Committee has decided to\r\nreduce the policy rate by 100 basis points, and has assessed that the\r\nupdated level of policy rate is adequate under the current outlook. To\r\ncreate an institutional basis for sustainable price stability, the\r\ncomprehensive review of the policy framework continues with the aim of\r\nencouraging permanent and strengthened liraization in all policy tools\r\nof the CBRT. The credit, collateral and liquidity policy actions, of\r\nwhich the review process is finalized, will continue to be implemented\r\nto strengthen the effectiveness of the monetary policy transmission\r\nmechanism.\r\n\r\n\r\nThe CBRT will continue to use all available instruments decisively\r\nwithin the framework of liraization strategy until strong indicators\r\npoint to a permanent fall in inflation and the medium-term 5 percent\r\ntarget is achieved in pursuit of the primary objective of price\r\nstability. Stability in the general price level will foster\r\nmacroeconomic stability and financial stability through the fall in\r\ncountry risk premium, continuation of the reversal in currency\r\nsubstitution and the upward trend in foreign exchange reserves, and\r\ndurable decline in financing costs. This would create a viable\r\nfoundation for investment, production and employment to continue growing\r\nin a healthy and sustainable way.\r\n\r\n\r\nThe Committee will continue to take its decisions in a transparent,\r\npredictable and data-driven framework.\r\n\r\n\r\nThe summary of the Monetary Policy Committee Meeting will be released\r\nwithin five working days.\r\n\r\n\r\nCombining the rows of each date group into a single row is as\r\nfollows.\r\n\r\n\r\nmaster2 <- data.frame()\r\n\r\nfor(m in seq_along(unique(master$date))){\r\n  \r\n  master_filtered <- master %>% \r\n    filter(date == unique(master$date)[m]) %>% \r\n    pull(text) %>% \r\n    paste(., collapse = \" \") %>% \r\n    str_replace_all(., \"[\\r\\n]\" , \"\") %>% \r\n    as.data.frame() %>% \r\n    rename(\"text\"=1) %>% \r\n    mutate(date = unique(master$date)[m])\r\n  \r\n  master2 <- master2 %>% \r\n    bind_rows(master_filtered)\r\n  \r\n}\r\n\r\n\r\nWe can move on to sentiment analysis and we are going to use the\r\nsentimentr package to do it at sentence level. sentiment_by(), one of\r\nthe functions of the sentimentr package, is used to calculate polarity\r\nscore by groups.\r\n\r\n\r\n#install.packages(\"sentimentr\")\r\nlibrary(sentimentr)\r\n\r\ndf_sentiment <- data.frame()\r\n\r\nfor(s in 1:nrow(master2)){\r\n  \r\n  sentiment_by_date <- as.data.frame(sentiment_by(master2$text[s])) %>% \r\n    mutate(date = master2$date[s])\r\n  \r\n  df_sentiment <- df_sentiment %>% \r\n    bind_rows(sentiment_by_date)\r\n  \r\n}\r\n\r\n\r\n\r\n\r\nfor(p in 2:4){\r\n  \r\n  df_sentiment %>% \r\n    select(5,all_of(p)) %>% \r\n    ggplot(aes(x = .[[1]], y = .[[2]])) +\r\n    geom_line() +\r\n    ggthemes::theme_fivethirtyeight() +\r\n    theme(plot.title = element_text(size = 30),\r\n          axis.text = element_text(size = 20)) +\r\n    labs(title = names(df_sentiment)[p]) -> plt\r\n  \r\n  plot(plt)\r\n  \r\n}\r\n\r\n\r\n\r\nwords_count: Since the middle of 2019, there has been an increase in\r\nthe number of words. The latest press release is at its peak. I leave\r\nthe press release of the day the sharp rise started and the previous day\r\nbelow.\r\n2019-06-12:\r\n\r\n\r\ntext\r\n\r\n\r\nThe Monetary Policy Committee (the Committee) has decided to keep the\r\npolicy rate (one-week repo auction rate) constant at 24 percent.\r\n\r\n\r\nRecently released data show that rebalancing trend in the economy has\r\ncontinued. External demand maintains its relative strength while\r\neconomic activity displays a slow pace, partly due to tight financial\r\nconditions. Current account balance is expected to maintain its\r\nimproving trend.\r\n\r\n\r\nDevelopments in domestic demand conditions and the tight monetary policy\r\nsupport disinflation. In order to contain the risks to the pricing\r\nbehavior and to reinforce the disinflation process, the Committee has\r\ndecided to maintain the tight monetary policy stance.\r\n\r\n\r\nThe Central Bank will continue to use all available instruments in\r\npursuit of the price stability objective. Factors affecting inflation\r\nwill be closely monitored and, monetary stance will be determined to\r\nkeep inflation in line with the targeted path.\r\n\r\n\r\nIt should be emphasized that any new data or information may lead the\r\nCommittee to revise its stance.\r\n\r\n\r\nThe summary of the Monetary Policy Committee Meeting will be released\r\nwithin five working days.\r\n\r\n\r\n2019-07-25:\r\nMurat Uysal, the former governor of the CBRT, took office in July\r\n2019.\r\n\r\n\r\ntext\r\n\r\n\r\nThe Monetary Policy Committee (the Committee) has decided to reduce the\r\npolicy rate (one-week repo auction rate) from 24 percent to 19.75\r\npercent.\r\n\r\n\r\nRecently released data indicate a moderate recovery in the economic\r\nactivity. Goods and services exports continue to display an upward trend\r\ndespite the weakening in the global economic outlook, indicating\r\nimproved competitiveness. In particular, strong tourism revenues support\r\nthe economic activity through direct and indirect channels. Looking\r\nforward, net exports are expected to contribute to the economic growth\r\nand the gradual recovery is likely to continue with the help of the\r\ndisinflation trend and the partial improvement in financial conditions.\r\nThe composition of growth is having a positive impact on the external\r\nbalance. Current account balance is expected to maintain its improving\r\ntrend.\r\n\r\n\r\nRecently, weaker global economic activity and heightened downside risks\r\nto inflation have strengthened the possibility that advanced economy\r\ncentral banks will take expansionary monetary policy steps. While these\r\ndevelopments support the demand for emerging market assets and the risk\r\nappetite, rising protectionism and uncertainty regarding global economic\r\npolicies are closely monitored in terms of their impact on both capital\r\nflows and international trade.\r\n\r\n\r\nInflation outlook continued to improve. In the second quarter, inflation\r\ndisplayed a significant fall with the contribution from a deceleration\r\nin unprocessed food and energy prices. Domestic demand conditions and\r\nthe tight monetary policy continue to support disinflation. Underlying\r\ntrend indicators, supply side factors, and import prices lead to an\r\nimprovement in the inflation outlook. In light of these developments,\r\nrecent forecast revisions suggest that inflation is likely to\r\nmaterialize slightly below the projections of the April Inflation Report\r\nby the end of the year. Accordingly, considering all the factors\r\naffecting inflation outlook, the Committee decided to reduce the policy\r\nrate by 425 basis points.\r\n\r\n\r\nThe Committee assesses that maintaining a sustained disinflation process\r\nis the key for achieving lower sovereign risk, lower long-term interest\r\nrates, and stronger economic recovery.Â  Keeping the disinflation process\r\nin track with the targeted path requires the continuation of a cautious\r\nmonetary stance. In this respect, the extent of the monetary tightness\r\nwill be determined by considering the indicators of the underlying\r\ninflation trend to ensure the continuation of the disinflation process.\r\nThe Central Bank will continue to use all available instruments in\r\npursuit of the price stability and financial stability objectives.\r\n\r\n\r\nIt should be emphasized that any new data or information may lead the\r\nCommittee to revise its stance.\r\n\r\n\r\nThe summary of the Monetary Policy Committee Meeting will be released\r\nwithin five working days.\r\n\r\n\r\nsd: The ups and downs after 2018 are more volatile than before 2018.\r\nThe worsening in inflation can be seen more clearly after 2018.\r\nave_sentiment: Although it is a series with ups and downs, it can be\r\nseen that the average score is on the positive side and is in an upward\r\ntrend after 2022. The first thing that comes to my mind here is that the\r\ncentral banks at least try to stabilize the situation with their verbal\r\nguidance, even though it is getting worse.\r\nInflation in Turkey started to give signals of getting out of control\r\nas of 2018. The reason I shared the inflation graph is both to read it\r\ntogether with the graphs above and because the primary objective of the\r\nBank is to achieve and maintain price stability.\r\n\r\n\r\n# post20_2.xlsx\r\n\r\ncpi <- readxl::read_excel(\"data2.xlsx\") %>% \r\n  mutate(date = as.Date(paste0(date,\"-\",1)))\r\n\r\nggplot(cpi, aes(x = date, y = inflation)) +\r\n  geom_line() +\r\n  ggthemes::theme_fivethirtyeight()\r\n\r\n\r\n\r\nWe may wonder: Have we succeeded in perceiving emotions? Letâ€™s take a\r\nlook at the latest press release as an example.\r\n\r\n\r\nhighlight(sentiment_by(master2$text[nrow(master2)]))\r\n\r\n\r\n\r\n\r\n\r\nThe weakening effects of geopolitical risks on global economic\r\nactivity continue to increase.\r\nThe above sentence is negative but perceived as positive. Letâ€™s take\r\na closer look.\r\n\r\n\r\n\"The weakening effects of geopolitical risks on global economic activity continue to increase.\" %>% \r\n  extract_sentiment_terms() %>% \r\n  unlist(.)\r\n\r\n                                                                                     element_id \r\n                                                                                            \"1\" \r\n                                                                                    sentence_id \r\n                                                                                            \"1\" \r\n                                                                                      negative1 \r\n                                                                                    \"weakening\" \r\n                                                                                      negative2 \r\n                                                                                        \"risks\" \r\n                                                                                      negative3 \r\n                                                                                     \"economic\" \r\n                                                                                       neutral1 \r\n                                                                                          \"the\" \r\n                                                                                       neutral2 \r\n                                                                                      \"effects\" \r\n                                                                                       neutral3 \r\n                                                                                           \"of\" \r\n                                                                                       neutral4 \r\n                                                                                 \"geopolitical\" \r\n                                                                                       neutral5 \r\n                                                                                           \"on\" \r\n                                                                                       neutral6 \r\n                                                                                     \"activity\" \r\n                                                                                       neutral7 \r\n                                                                                           \"to\" \r\n                                                                                      positive1 \r\n                                                                                       \"global\" \r\n                                                                                      positive2 \r\n                                                                                     \"continue\" \r\n                                                                                      positive3 \r\n                                                                                     \"increase\" \r\n                                                                                       sentence \r\n\"The weakening effects of geopolitical risks on global economic activity continue to increase.\" \r\n\r\nAlthough the content of the package used is useful, it will be useful\r\nto use it carefully. This study also shows that a sentiment analysis\r\npackage can be made for central banks, for example.\r\nYou can access the other codes I mentioned at the beginning\r\nbelow.\r\n\r\n\r\nlibrary(rvest)\r\nlibrary(tidyverse)\r\n\r\nurls <- str_c(\r\n  \"https://www.tcmb.gov.tr/wps/wcm/connect/EN/TCMB+EN/Main+Menu/Announcements/Press+Releases/\",\r\n  seq(2014,2022,1)\r\n)\r\n\r\ndf_urls <- data.frame()\r\n\r\nfor(i in seq_along(urls)){\r\n  \r\n  c1 <- read_html(urls[i]) %>% \r\n    html_nodes(\"div.collection-content.w-clearfix a.collection-title\") %>% \r\n    html_attr(\"href\")\r\n  \r\n  c2 <- read_html(urls[i]) %>% \r\n    html_nodes(\"div.collection-content.w-clearfix a.collection-title\") %>% \r\n    html_text()\r\n  \r\n  tbl <- data.frame(\r\n    c1 = c1,\r\n    c2 = c2\r\n  )\r\n  \r\n  df_urls <- df_urls %>% \r\n    bind_rows(tbl)\r\n  \r\n  Sys.sleep(3)\r\n  \r\n}\r\n\r\ndf_urls <- df_urls %>% \r\n  filter(grepl(\"Press Release on Interest Rates\",c2)) %>% \r\n  mutate(c1 = paste0(\"https://www.tcmb.gov.tr\",c1))\r\n\r\ndf_text <- data.frame()\r\n\r\nfor(j in 1:nrow(df_urls)){\r\n  \r\n  txt <- read_html(df_urls$c1[j]) %>% \r\n    html_nodes(\"div.tcmb-content.type-prg p\") %>% \r\n    html_text() %>% \r\n    as.data.frame() %>% \r\n    rename(\"text\"=1) %>% \r\n    filter(text != \"\") %>% \r\n    mutate(\"date\"=.$text[2])\r\n  \r\n  df_text <- df_text %>% \r\n    bind_rows(txt)\r\n  \r\n  print(j)\r\n  \r\n  Sys.sleep(30)\r\n  \r\n}\r\n\r\ngovernors <- c(\r\n  \"Åžahap KavcÄ±oÄŸlu\",\r\n  \"Naci AÄŸbal\",\r\n  \"Murat Uysal\",\r\n  \"Murat Ã‡etinkaya\",\r\n  \"Erdem BaÅŸÃ§Ä±\"\r\n)\r\n\r\ndf_text2 <- df_text %>% \r\n  mutate(date = gsub(\"Release Date: \",\"\",date),\r\n         date = gsub(\"Aygust\",\"August\",date),\r\n         date = lubridate::dmy(date),\r\n         text = as.character(text)) %>% \r\n  filter(!(grepl(\"No:|No.\",text)) & grepl(\"[[:space:]]\",text) & !(grepl(paste(governors,collapse=\"|\"),text))) %>% \r\n  arrange(date)\r\n\r\n#openxlsx::write.xlsx(df_text2,\"data.xlsx\")\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-08-21-post20/img1.PNG",
    "last_modified": "2022-08-21T16:22:40+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-08-22-post21/",
    "title": "Which Twitter Account You Follow is Most Similar to Your Tweets?",
    "description": "Finding the most similar account based on tweets using cosine similarity.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-08-22",
    "categories": [
      "Text",
      "Web"
    ],
    "contents": "\r\nHave you ever thought about which account is the most similar to your\r\ntweets among the accounts you follow? Even if you havenâ€™t thought about\r\nit, keep reading. Because you will learn both how to get data from\r\nTwitter and how to calculate cosine similarity, which is a similarity\r\nmetric.\r\nThe following steps will be followed.\r\nGetting our own tweets\r\nGetting tweets of each account\r\n{rtweet} package can be used to get data from Twitter.\r\n\r\n\r\nlibrary(rtweet)\r\nlibrary(lsa)\r\nlibrary(tidytext)\r\nlibrary(stopwords)\r\nlibrary(widyr)\r\nlibrary(tidyverse)\r\n\r\n\r\nCalculating cosine similarity\r\nGetting our own tweets\r\n\r\n\r\nmyTweets <- get_timeline(\r\n  user = \"@rpydaneogrendim\",\r\n  n = Inf\r\n)\r\n\r\n\r\nTweets that meet the following conditions will be used:\r\nc1. retweeted = FALSE\r\nc2. in_repy_to_screen_name = NA\r\n\r\n\r\nmyTweets <- myTweets %>% \r\n  filter(\r\n    is.na(unlist(in_reply_to_screen_name))\r\n  ) %>% \r\n  filter(\r\n    !grepl(\"\\\\RT \",full_text)\r\n  ) %>% \r\n  select(full_text) %>% \r\n  mutate(account_name = \"A. Uraz AkgÃ¼l\", .before = full_text)\r\n\r\n\r\nGetting tweets of each account\r\n\r\n\r\n# Step-1\r\n\r\nfriends <- get_friends(\r\n  users = \"@rpydaneogrendim\",\r\n  n = Inf\r\n) %>% \r\n  select(to_id)\r\n\r\nfriends$account_name <- lookup_users(\r\n  users = friends$to_id\r\n)\r\n\r\nfriends$account_name <- friends$account_name$name\r\n\r\n\r\nSince the number of accounts I follow is too many, I reduce this\r\nnumber to 10.\r\n\r\n\r\nfriends_10 <- friends %>% \r\n  filter(\r\n    to_id %in% c(\"1856880644\",\r\n                 \"387319855\",\r\n                 \"1025123826156429314\",\r\n                 \"160488562\",\r\n                 \"1288037057496076288\",\r\n                 \"1138822334423412736\",\r\n                 \"1328826265097416707\",\r\n                 \"86315961\",\r\n                 \"312965239\",\r\n                 \"1022579538658779151\")\r\n  )\r\n\r\n\r\n\r\n\r\nto_id\r\n\r\n\r\naccount_name\r\n\r\n\r\n1856880644\r\n\r\n\r\nÄ°rem DaÅŸtan\r\n\r\n\r\n1328826265097416707\r\n\r\n\r\nFirat Gundem\r\n\r\n\r\n86315961\r\n\r\n\r\nSerkan Erden\r\n\r\n\r\n1288037057496076288\r\n\r\n\r\nOzancan Ã–zdemir\r\n\r\n\r\n387319855\r\n\r\n\r\nHavva KOÃ‡\r\n\r\n\r\n312965239\r\n\r\n\r\nAycan HepsaÄŸ\r\n\r\n\r\n1022579538658779151\r\n\r\n\r\nAyben Koy\r\n\r\n\r\n160488562\r\n\r\n\r\nMehmet Hakan Satman\r\n\r\n\r\n1138822334423412736\r\n\r\n\r\nMustafa Ã‡avuÅŸ\r\n\r\n\r\n1025123826156429314\r\n\r\n\r\nAnlaÅŸÄ±lÄ±r EkonomiðŸ’¸ðŸ’¸ðŸ’¸\r\n\r\n\r\n\r\n\r\n# Step-2\r\n\r\ntweets <- data.frame()\r\n\r\nfor(i in 1:nrow(friends_10)){\r\n  \r\n  tbl <- get_timeline(\r\n    user = friends_10$to_id[i],\r\n    n = Inf\r\n  ) %>% \r\n    filter(\r\n      is.na(unlist(in_reply_to_screen_name))\r\n  ) %>% \r\n    select(full_text) %>% \r\n    filter(\r\n    !grepl(\"\\\\RT \",full_text)\r\n  ) %>% \r\n    mutate(account_name = friends_10$account_name[i], .before = full_text)\r\n  \r\n  tweets <- tweets %>% \r\n    bind_rows(tbl)\r\n  \r\n  print(i)\r\n  \r\n  Sys.sleep(1)\r\n  \r\n}\r\n\r\n\r\nCalculating cosine similarity\r\nCosine similarity is a metric used to measure how similar the\r\ndocuments are. It is measured by the cosine of the angle between two\r\nvectors and determines whether two vectors are pointing in roughly the\r\nsame direction. The formula to find the cosine similarity between two\r\nvectors is:\r\n\\(cos(\\theta) = \\frac{x.y}{||x||||y||} =\r\n\\frac{\\sum_{i=1}^{n}x_iy_i}{\\sqrt{\\sum_{i=1}^{n}x_i^2}\\sqrt{\\sum_{i=1}^{n}y_i^2}}\\)\r\nAnd the cosine distance can be defined as follows:\r\n\\(Cosine Distance = 1 - Cosine\r\nSimilarity\\)\r\nLetâ€™s see how it is calculated with a simple example.\r\n\r\n\r\nx <- c(3,4,1,0)\r\ny <- c(3,4,4,8)\r\n\r\n\r\n\\(x.y = 3*3 + 4*4 + 1*4 + 0*8 =\r\n29\\)\r\n\\(||x|| = \\sqrt{3^2 + 4^2 + 1^2 + 0^2} =\r\n5.09902\\)\r\n\\(||y|| = \\sqrt{3^2 + 4^2 + 4^2 + 8^2} =\r\n10.24695\\)\r\n\\(cos(x,y) = cos(\\theta) =\r\n\\frac{29}{5.09902*10.24695} = 0.5550303\\)\r\nIf the cosine angle is 0 (\\(cos(\\theta) =\r\n0\\)), there is perfect similarity between the two vectors (\\(cos(0) = 1\\)).\r\nIf the cosine angle is 90 (\\(cos(\\theta) =\r\n90\\)), there is no similarity between the two vectors. (\\(cos(90) = 0\\)).\r\nThe smaller the angle between the two vectors, the more similar\r\nthey are to each other.\r\nInstead of doing it manually, cosine similarity can be found with the\r\nhelp of {lsa} package.\r\n\r\n\r\nas.numeric(lsa::cosine(x,y))\r\n\r\n[1] 0.5550303\r\n\r\nSo, how is this similarity calculated in the documents? Letâ€™s examine\r\nit with an example.\r\n\r\n\r\ntext1 <- \"I am learning R programming language.\"\r\ntext2 <- \"I am learning Python programming language.\"\r\n\r\n\r\nIn the above example, the words are the same except for the words R\r\nand Python. If we write the word frequencies to coincide with each\r\nother;\r\n\r\n\r\n# I, am, learning, R, Python, programming, language\r\n\r\ntext1_n <- c(1,1,1,0,1,1,1)\r\ntext2_n <- c(1,1,1,1,0,1,1)\r\n\r\nas.numeric(lsa::cosine(text1_n,text2_n))\r\n\r\n[1] 0.8333333\r\n\r\nAs can be seen, the cosine similarity is 0.83 or 83%.\r\nLetâ€™s find out which account is most similar!\r\n\r\n\r\nmaster <- rbind(myTweets,tweets)\r\n\r\n\r\n\r\n\r\nmaster <- readxl::read_excel(\"data.xlsx\")\r\n\r\n\r\nRemoving urls containing http from tweets.\r\n\r\n\r\nmaster <- master %>% \r\n  mutate(full_text = gsub(\"http.+\",\"\",full_text))\r\n\r\n\r\nAt the same time, it may be useful to remove Turkish and English stop\r\nwords. Stop words are ineffective words. It would not be wrong to say\r\nthat it includes frequently used words.\r\n\r\n\r\ntr_sw <- stopwords(language = \"tr\", source = \"stopwords-iso\")\r\nen_sw <- stopwords(language = \"en\", source = \"stopwords-iso\")\r\n\r\n\r\nWe are going to calculate cosine similarity based on two methods:\r\nWord Frequencies and TF-IDF.\r\n\r\n\r\nmaster <- master %>% \r\n  unnest_tokens(output = \"word\", input = \"full_text\") %>% \r\n  filter(!(word %in% tr_sw) & !(word %in% en_sw)) %>% \r\n  count(word, account_name) %>% \r\n  bind_tf_idf(word, account_name, n)\r\n\r\n\r\nCosine Similarity - Word Frequencies\r\nAs we have seen above, the cosine similarity under this heading was\r\nfound by using the frequencies of the words.\r\n\r\n\r\nmaster_freq <- master %>% \r\n  pairwise_similarity(account_name, word, n, upper = FALSE, sort = TRUE) %>% \r\n  mutate(item = paste0(item1,\"-\",item2), .before = similarity) %>% \r\n  select(-c(item1,item2)) %>% \r\n  rename(\"similarity_freq\"=2) %>% \r\n  filter(grepl(\"A. Uraz AkgÃ¼l\",item))\r\n\r\n\r\n\r\n\r\nitem\r\n\r\n\r\nsimilarity_freq\r\n\r\n\r\nA. Uraz AkgÃ¼l-Mustafa Ã‡avuÅŸ\r\n\r\n\r\n0.5653844\r\n\r\n\r\nA. Uraz AkgÃ¼l-AnlaÅŸÄ±lÄ±r EkonomiðŸ’¸ðŸ’¸ðŸ’¸\r\n\r\n\r\n0.4959665\r\n\r\n\r\nA. Uraz AkgÃ¼l-Havva KOÃ‡\r\n\r\n\r\n0.4398995\r\n\r\n\r\nA. Uraz AkgÃ¼l-Serkan Erden\r\n\r\n\r\n0.4351157\r\n\r\n\r\nAyben Koy-A. Uraz AkgÃ¼l\r\n\r\n\r\n0.4123548\r\n\r\n\r\nA. Uraz AkgÃ¼l-Aycan HepsaÄŸ\r\n\r\n\r\n0.3715642\r\n\r\n\r\nA. Uraz AkgÃ¼l-Ozancan Ã–zdemir\r\n\r\n\r\n0.2867811\r\n\r\n\r\nA. Uraz AkgÃ¼l-Mehmet Hakan Satman\r\n\r\n\r\n0.2464099\r\n\r\n\r\nA. Uraz AkgÃ¼l-Firat Gundem\r\n\r\n\r\n0.2132682\r\n\r\n\r\nA. Uraz AkgÃ¼l-Ä°rem DaÅŸtan\r\n\r\n\r\n0.1940974\r\n\r\n\r\nCosine Similarity - TF-IDF\r\nTF-IDF stands for Term Frequency-Inverse Document Frequency, and it\r\nshows the importance of a word in a document. TF-IDF consists of TF\r\nmultiplied by IDF.\r\nTF: It is the ratio of the number of repetitions of the word in the\r\ndocument to the total number of words in the document.\r\nIDF: It is the logarithm of the ratio of the total number of\r\ndocuments to the total number of documents in which the selected word is\r\nmentioned. Increasing the frequency of the related word in other\r\ndocuments increases the DF value; Decreases the IDF value.\r\n\\(w_{i,j} = tf_{i,j}\\ x\\\r\nlog(\\frac{N}{df_i})\\)\r\n\\(tf_{i,j}:\\) ratio of i in j\r\n\\(df_i:\\) Number of documents\r\ncontaining i\r\n\\(N:\\) Number of documents\r\n\r\n\r\nmaster_tf_idf <- master %>% \r\n  pairwise_similarity(account_name, word, tf_idf, upper = FALSE, sort = TRUE) %>% \r\n  mutate(item = paste0(item1,\"-\",item2), .before = similarity) %>% \r\n  select(-c(item1,item2)) %>% \r\n  rename(\"similarity_tf_idf\"=2) %>% \r\n  filter(grepl(\"A. Uraz AkgÃ¼l\",item))\r\n\r\n\r\n\r\n\r\nitem\r\n\r\n\r\nsimilarity_tf_idf\r\n\r\n\r\nA. Uraz AkgÃ¼l-Mustafa Ã‡avuÅŸ\r\n\r\n\r\n0.1449044\r\n\r\n\r\nA. Uraz AkgÃ¼l-AnlaÅŸÄ±lÄ±r EkonomiðŸ’¸ðŸ’¸ðŸ’¸\r\n\r\n\r\n0.0927952\r\n\r\n\r\nA. Uraz AkgÃ¼l-Serkan Erden\r\n\r\n\r\n0.0758531\r\n\r\n\r\nAyben Koy-A. Uraz AkgÃ¼l\r\n\r\n\r\n0.0737836\r\n\r\n\r\nA. Uraz AkgÃ¼l-Aycan HepsaÄŸ\r\n\r\n\r\n0.0613983\r\n\r\n\r\nA. Uraz AkgÃ¼l-Havva KOÃ‡\r\n\r\n\r\n0.0592472\r\n\r\n\r\nA. Uraz AkgÃ¼l-Mehmet Hakan Satman\r\n\r\n\r\n0.0488667\r\n\r\n\r\nA. Uraz AkgÃ¼l-Firat Gundem\r\n\r\n\r\n0.0372470\r\n\r\n\r\nA. Uraz AkgÃ¼l-Ozancan Ã–zdemir\r\n\r\n\r\n0.0353855\r\n\r\n\r\nA. Uraz AkgÃ¼l-Ä°rem DaÅŸtan\r\n\r\n\r\n0.0181132\r\n\r\n\r\n\r\n\r\ndf_result <- master_freq %>% \r\n  inner_join(master_tf_idf, by = \"item\")\r\n\r\nggplot(df_result, aes(x = similarity_freq, y = similarity_tf_idf, color  = similarity_freq)) +\r\n  geom_point(alpha = .2, size = 4) +\r\n  ggrepel::geom_text_repel(\r\n    data = df_result %>% \r\n      arrange(desc(similarity_freq)) %>% \r\n      slice(c(1:10)),\r\n    aes(label = item), size = 3\r\n  ) +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", hjust = 0.5),\r\n        plot.caption = element_text(face = \"italic\"),\r\n        legend.position = \"none\") +\r\n  scale_color_gradient(low = \"orange\", high = \"red\") +\r\n  labs(\r\n    caption = \"The upper right corner is where the similarity increases.\",\r\n    x = \"Word Frequencies\",\r\n    y = \"TF-IDF\"\r\n  )\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-08-22-post21/post21_files/figure-html5/unnamed-chunk-21-1.png",
    "last_modified": "2022-08-22T22:47:16+03:00",
    "input_file": "post21.knit.md"
  },
  {
    "path": "posts/2022-08-17-post19/",
    "title": "Pay Attention to Every Little Detail",
    "description": "Knowing the data and visualizing it in all its details.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-08-17",
    "categories": [
      "Data Visualization"
    ],
    "contents": "\r\nIs there any value in visualizing data that you do not know? What is\r\nthe value of visualizing the data we know in a bad way?\r\nIn this post, I would like to answer the two questions I asked above.\r\nIâ€™m going to use TURKSTATâ€™s Consumer Confidence Index (CCI) data to\r\nanswer my questions. TURKSTAT or Turkish Statistical Institute is an\r\ninstitution which is gathering and publishing national data of specific\r\nissues in different areas in Turkey. You can access the site by clicking\r\nthe link here. If you encounter a\r\nTurkish page, you can change the TR abbreviation in the upper right\r\ncorner to EN.\r\nAfter clicking the link above, you can follow the steps below.\r\nYou can access the data (post19.xls) on my GitHub\r\naccount.\r\nStatistics\r\nEconomic Confidence\r\nStatistical Tables\r\nConsumer Confidence Index\r\n4.1. Consumer Confidence Index, 2004-2011\r\n4.2. Indices Concerning the Consumer Tendency and Monthly Changes\r\nAccording to the definition in the metadata on TURKSTATâ€™s website,\r\nMonthly Consumer Tendency Survey aims to measure present situation\r\nassessments and future period expectations of consumersâ€™ on personal\r\nfinancial standing and general economic course and determining\r\nconsumersâ€™ expenditure and saving tendencies for near future.\r\nWe know little about the data. Letâ€™s import and visualize it.\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\ndf <- readxl::read_excel(\"data.xls\") %>% \r\n  mutate(date = as.Date(date))\r\n\r\nggplot(df, aes(x = date, y = cons_conf_index)) +\r\n  geom_line()\r\n\r\n\r\n\r\nAt first glance, we see a falling index, right? Yes, itâ€™s true! We\r\ncan add one more function, although itâ€™s obvious that itâ€™s falling.\r\n\r\n\r\nggplot(df, aes(x = date, y = cons_conf_index)) +\r\n  geom_line() +\r\n  geom_smooth(method = \"lm\") +\r\n  geom_smooth(method = \"loess\")\r\n\r\n\r\n\r\nHow about coloring it?\r\n\r\n\r\nggplot(df, aes(x = date, y = cons_conf_index)) +\r\n  geom_line() +\r\n  geom_smooth(method = \"lm\", color = \"red\") +\r\n  geom_smooth(method = \"loess\", color = \"blue\")\r\n\r\n\r\n\r\nThe main thing I want to draw your attention to is the y-axis values.\r\nA confidence level below 100 reflects a pessimistic outlook, while a\r\nreading above 100 indicates optimism.\r\nLetâ€™s redraw the graph taking into account the above information. Iâ€™m\r\nremoving the function we added in the previous graph for now.\r\n\r\n\r\nggplot(df, aes(x = date, y = cons_conf_index)) +\r\n  geom_line() +\r\n  geom_hline(yintercept = 100)\r\n\r\n\r\n\r\nThe consumers of Turkey have almost always been pessimistic!\r\nAnother piece of information is that the index is evaluated between 0\r\nand 200.\r\n\r\n\r\nggplot(df, aes(x = date, y = cons_conf_index)) +\r\n  geom_line() +\r\n  geom_hline(yintercept = 100) +\r\n  scale_y_continuous(limits = c(0,200))\r\n\r\n\r\n\r\nIn the previous graphs, there was a perception that the index had\r\nreached its bottom point. Although the index is still bad, at least we\r\nhave eliminated this perception.\r\nI would like to show you step-by-step the ways to make a graphic more\r\neye-catching, based on my experience.\r\nI prefer the geom_ribbon() function when I need to color the above\r\nand below of a value. In our example, this value is 100.\r\nFirst of all, I want to split the index values into two groups.\r\n\r\n\r\ndf <- df %>% \r\n  mutate(\r\n    IndexGroups = case_when(\r\n      cons_conf_index > 100 ~ \"Optimistic\",\r\n      cons_conf_index < 100 ~ \"Pessimistic\"\r\n    )\r\n  )\r\n\r\n\r\nWe splitted them into groups and we can use the geom_ribbon()\r\nfunction. Before making the graph, some values need to be created.\r\n\r\n\r\n# Part - I\r\n\r\ndf$ymin_below <- pmin(df$cons_conf_index,100)\r\ndf$ymax_below <- 100\r\n\r\nggplot(df, aes(x = date, y = cons_conf_index)) +\r\n  geom_line() +\r\n  geom_hline(yintercept = 100) +\r\n  scale_y_continuous(limits = c(0,200)) +\r\n  geom_ribbon(\r\n    aes(ymin = ymin_below, ymax = ymax_below),\r\n    color = \"red\", #line\r\n    fill = \"red\", #area\r\n    alpha = .5 #transparency\r\n  )\r\n\r\n\r\n\r\n\r\n\r\n# Part - II\r\n\r\ndf$ymin_above <- 100\r\ndf$ymax_above <- pmax(df$cons_conf_index,100)\r\n\r\nggplot(df, aes(x = date, y = cons_conf_index)) +\r\n  geom_line() +\r\n  geom_hline(yintercept = 100) +\r\n  scale_y_continuous(limits = c(0,200)) +\r\n  geom_ribbon(\r\n    aes(ymin = ymin_above, ymax = ymax_above),\r\n    color = \"orange\", #line\r\n    fill = \"orange\", #area\r\n    alpha = .5 #transparency\r\n  )\r\n\r\n\r\n\r\nCombining two graphs into oneâ€¦\r\n\r\n\r\nggplot(df, aes(x = date, y = cons_conf_index)) +\r\n  geom_line() +\r\n  #geom_hline(yintercept = 100) + ---> We don't need this line anymore\r\n  scale_y_continuous(limits = c(0,200)) +\r\n  geom_ribbon(\r\n    aes(ymin = ymin_below, ymax = ymax_below),\r\n    color = \"red\", #line\r\n    fill = \"red\", #area\r\n    alpha = .5 #transparency\r\n  ) +\r\n  geom_ribbon(\r\n    aes(ymin = ymin_above, ymax = ymax_above),\r\n    color = \"orange\", #line\r\n    fill = \"orange\", #area\r\n    alpha = .5 #transparency\r\n  )\r\n\r\n\r\n\r\nIâ€™m one of those who like FiveThirtyEightâ€™s theme! Use it to make it\r\nlook good!\r\n\r\n\r\nggplot(df, aes(x = date, y = cons_conf_index)) +\r\n  geom_line() +\r\n  #geom_hline(yintercept = 100) + ---> We don't need this line anymore\r\n  scale_y_continuous(limits = c(0,200)) +\r\n  geom_ribbon(\r\n    aes(ymin = ymin_below, ymax = ymax_below),\r\n    color = \"red\", #line\r\n    fill = \"red\", #area\r\n    alpha = .5 #transparency\r\n  ) +\r\n  geom_ribbon(\r\n    aes(ymin = ymin_above, ymax = ymax_above),\r\n    color = \"orange\", #line\r\n    fill = \"orange\", #area\r\n    alpha = .5 #transparency\r\n  ) +\r\n  ggthemes::theme_fivethirtyeight()\r\n\r\n\r\n\r\nA little more information?\r\n\r\n\r\nggplot(df, aes(x = date, y = cons_conf_index)) +\r\n  geom_line() +\r\n  #geom_hline(yintercept = 100) + ---> We don't need this line anymore\r\n  scale_y_continuous(limits = c(0,200)) +\r\n  geom_ribbon(\r\n    aes(ymin = ymin_below, ymax = ymax_below),\r\n    color = \"red\", #line\r\n    fill = \"red\", #area\r\n    alpha = .5 #transparency\r\n  ) +\r\n  geom_ribbon(\r\n    aes(ymin = ymin_above, ymax = ymax_above),\r\n    color = \"orange\", #line\r\n    fill = \"orange\", #area\r\n    alpha = .5 #transparency\r\n  ) +\r\n  ggthemes::theme_fivethirtyeight() +\r\n  labs(\r\n    title = \"Turkish Consumer Confidence\",\r\n    subtitle = paste0(\r\n      format(min(df$date),\"%Y/%m\"),\r\n      \"-\",\r\n      format(max(df$date),\"%Y/%m\")\r\n    ), # To make it dynamic\r\n    caption = \"The data were collected from TURKSTAT\"\r\n  ) +\r\n  theme(\r\n    plot.subtitle = element_text(face = \"italic\", size = 10),\r\n    plot.caption = element_text(face = \"italic\")\r\n  )\r\n\r\n\r\n\r\nIn this post, I wanted to show you the importance of obtaining\r\ninformation about data and also showed you ways to visualize it better.\r\nI hope that you enjoyed reading and found this post helpful.\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-08-17-post19/post19_files/figure-html5/unnamed-chunk-11-1.png",
    "last_modified": "2022-08-17T19:11:05+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-08-14-post18/",
    "title": "Does Linear Regression Work? A Study on BIST-100",
    "description": "Testing the Linear Regression method in a non-quantitative way.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-08-14",
    "categories": [
      "Finance",
      "Technical Analysis"
    ],
    "contents": "\r\nIn\r\nthe previous post, I shared a study using BIST-100 data and linear\r\nregression method. In this post, we are going to test the success of the\r\nmethod again using the same index.\r\nAs I mentioned before, we can get the data from the Electronic Data\r\nDelivery System of the Central Bank of the Republic of Turkey. Please\r\ncheck the previous post. You can also access the data\r\n(post18.xlsx) on my GitHub\r\naccount.\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\ndf_xu100 <- readxl::read_excel(\"data.xlsx\") %>% \r\n  mutate(\r\n    date = lubridate::dmy(date)\r\n  )\r\n\r\n\r\nIn order to measure the success of the method, we are going to split\r\nthe time series into a certain number of small series. Let me put it\r\nthis way, data splitting is when data is divided into two or more\r\nsubsets. Using the ntile() function to split the series is an\r\noption.\r\n\r\n\r\ndf <- df_xu100 %>% \r\n  slice(1:4900) %>% \r\n  mutate(\r\n    cluster = ntile(date, 49)\r\n  )\r\n\r\n\r\nAssuming there are 4900 rows instead of 4914, we can split it into 49\r\ndifferent series. In this case, each series will have 100\r\nobservations.\r\nAfter splitting the series, itâ€™s time to build the model. If the data\r\nyou have is grouped, you can make different models as shown below.\r\n\r\n\r\ndf_models <- df %>% \r\n  group_by(cluster) %>% \r\n  mutate(rn = row_number()) %>% \r\n  do(model = lm(close ~ rn, data = .))\r\n\r\n\r\nLetâ€™s look at the first model as an example.\r\n\r\n\r\nsummary(df_models[[2]][[1]])\r\n\r\n\r\nCall:\r\nlm(formula = close ~ rn, data = .)\r\n\r\nResiduals:\r\n     Min       1Q   Median       3Q      Max \r\n-18.2203  -2.9681   0.4508   4.2494  11.3862 \r\n\r\nCoefficients:\r\n             Estimate Std. Error t value Pr(>|t|)    \r\n(Intercept) 105.42839    1.22710  85.917   <2e-16 ***\r\nrn            0.03242    0.02110   1.537    0.128    \r\n---\r\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\r\n\r\nResidual standard error: 6.09 on 98 degrees of freedom\r\nMultiple R-squared:  0.02354,   Adjusted R-squared:  0.01357 \r\nF-statistic: 2.362 on 1 and 98 DF,  p-value: 0.1275\r\n\r\nWe can get the fitted values and confidence intervals from the models\r\nwe built as follows.\r\n\r\n\r\ndf_model_final <- data.frame()\r\n\r\nfor(i in unique(df$cluster)){\r\n  \r\n  df_filtered <- df %>% \r\n    filter(cluster == i)\r\n  \r\n  df_filtered$fitted <- df_models[[2]][[i]][[\"fitted.values\"]]\r\n  df_filtered$lwr <- predict(df_models[[2]][[i]], interval = \"prediction\", level = 0.95)[,2]\r\n  df_filtered$upr <- predict(df_models[[2]][[i]], interval = \"prediction\", level = 0.95)[,3]\r\n  \r\n  df_model_final <- df_model_final %>% \r\n    bind_rows(df_filtered)\r\n  \r\n}\r\n\r\n\r\nWe are almost there!\r\n\r\n\r\ndf_model_final <- df_model_final %>% \r\n  group_by(cluster) %>% \r\n  mutate(rn = row_number())\r\n\r\n\r\n\r\n\r\n\r\nWeâ€™ve finished most of the work but need to brainstorm. How do we\r\nmeasure success? We can examine some series in a non-quantitative way\r\nunder some assumptions. Maybe I can come up with different methods in\r\nthe next posts.\r\nOur assumption is to make a 100-day decision with a 100-day\r\ntrend.\r\nLetâ€™s start with 2-3 and continue with 37-38.\r\n\r\n\r\ndf_2_3 <- df_model_final %>% \r\n  ungroup() %>% \r\n  filter(cluster %in% c(2,3)) %>% \r\n  mutate(t = row_number())\r\n\r\n\r\n\r\n\r\n\r\nIn the graph above, I could expect a drop from here as the index is\r\nin contact with the upper band. The index which was 153.81 became 201.85\r\nafter 100 days.\r\n\r\n\r\ndf_37_38 <- df_model_final %>% \r\n  ungroup() %>% \r\n  filter(cluster %in% c(37,38)) %>% \r\n  mutate(t = row_number())\r\n\r\n\r\n\r\n\r\n\r\nIn the graph above, since the index is below the lower band, I could\r\nexpect a rise from here. The index which was 1012.18 became 1165.10\r\nafter 100 days.\r\nSome more graphsâ€¦\r\n\r\n\r\ndf_18_19 <- df_model_final %>% \r\n  ungroup() %>% \r\n  filter(cluster %in% c(18,19)) %>% \r\n  mutate(t = row_number())\r\n\r\n\r\n\r\n\r\n\r\nThe index is actually close to the fitted line here. Most of the time\r\nit can be difficult to decide the direction around the fitted line, but\r\nthere is a movement from the lower band here. Therefore, I could expect\r\nan upward movement. The index, which was 529.59, became 607.37 at the\r\nend of the series.\r\nWell, based on the 49th series, what will be the situation for the\r\n50th series we are currently in?\r\n\r\n\r\ndf_49_50 <- df_model_final %>% \r\n  ungroup() %>% \r\n  filter(cluster %in% c(49,50)) %>% \r\n  mutate(t = row_number())\r\n\r\n\r\n\r\n\r\n\r\nA movement of the series beginning from the lower band stands out.\r\nThe index is still below the fitted line. An upward movement can be\r\nexpected from here.\r\nBring back the 14 days we removed from the series earlier. When we\r\nadd this, it becomes 114 days in total.\r\n\r\n\r\ndf_50 <- df_xu100 %>% \r\n  filter(date > as.Date(\"2022-07-22\")) %>% \r\n  mutate(\r\n    cluster = rep(50,14),\r\n    fitted = rep(NA,14),\r\n    lwr = rep(NA,14),\r\n    upr = rep(NA,14),\r\n    rn = seq(101,114,1),\r\n    t = seq(101,114,1)\r\n  )\r\n\r\ndf_49_50 <- rbind(df_49_50,df_50)\r\n\r\n\r\n\r\n\r\n\r\nPerfect, just as we expected! In the coming days, we may see a trend\r\nbreak just like the other graphs!\r\nRemember, we said: As can be seen from the graph, the real value\r\nis further away, which means that it is both moving away from the fitted\r\nvalue and in the overbought zone.\r\nI should point out that we reached this conclusion from the monthly\r\nfrequency series. In this study, we used daily frequency series. I mean,\r\nshort-term rises can be expected, but it is necessary to pay attention\r\nto a possible bubble in longer term.\r\nMore is coming, stay tuned!\r\nThe codes of the graphics used in the study can be found below.\r\n\r\n\r\nggplot(df_model_final) +\r\n  geom_line(aes(x = rn, y = close)) +\r\n  geom_line(aes(x = rn, y = fitted), color = \"blue\") +\r\n  geom_line(aes(x = rn, y = lwr), color = \"red\", linetype = \"dashed\") +\r\n  geom_line(aes(x = rn, y = upr), color = \"red\", linetype = \"dashed\") +\r\n  facet_wrap(~cluster, scales = \"free\") +\r\n  theme(axis.title = element_blank())\r\n\r\nggplot(df_2_3) +\r\n  geom_line(aes(x = t, y = close)) +\r\n  geom_vline(xintercept = (100+101)/2, linetype = \"dashed\") +\r\n  geom_line(aes(x = t, y = fitted, group = cluster), color = \"blue\") +\r\n  geom_line(aes(x = t, y = lwr, group = cluster), color = \"red\", linetype = \"dashed\") +\r\n  geom_line(aes(x = t, y = upr, group = cluster), color = \"red\", linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank())\r\n\r\nggplot(df_37_38) +\r\n  geom_line(aes(x = t, y = close)) +\r\n  geom_vline(xintercept = (100+101)/2, linetype = \"dashed\") +\r\n  geom_line(aes(x = t, y = fitted, group = cluster), color = \"blue\") +\r\n  geom_line(aes(x = t, y = lwr, group = cluster), color = \"red\", linetype = \"dashed\") +\r\n  geom_line(aes(x = t, y = upr, group = cluster), color = \"red\", linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank())\r\n\r\nggplot(df_18_19) +\r\n  geom_line(aes(x = t, y = close)) +\r\n  geom_vline(xintercept = (100+101)/2, linetype = \"dashed\") +\r\n  geom_line(aes(x = t, y = fitted, group = cluster), color = \"blue\") +\r\n  geom_line(aes(x = t, y = lwr, group = cluster), color = \"red\", linetype = \"dashed\") +\r\n  geom_line(aes(x = t, y = upr, group = cluster), color = \"red\", linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank())\r\n\r\nggplot(df_49_50) +\r\n  geom_line(aes(x = t, y = close)) +\r\n  geom_vline(xintercept = (100+101)/2, linetype = \"dashed\") +\r\n  geom_line(aes(x = t, y = fitted, group = cluster), color = \"blue\") +\r\n  geom_line(aes(x = t, y = lwr, group = cluster), color = \"red\", linetype = \"dashed\") +\r\n  geom_line(aes(x = t, y = upr, group = cluster), color = \"red\", linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank())\r\n\r\nggplot(df_49_50) +\r\n  geom_line(aes(x = t, y = close)) +\r\n  geom_vline(xintercept = (100+101)/2, linetype = \"dashed\") +\r\n  geom_line(aes(x = t, y = fitted, group = cluster), color = \"blue\") +\r\n  geom_line(aes(x = t, y = lwr, group = cluster), color = \"red\", linetype = \"dashed\") +\r\n  geom_line(aes(x = t, y = upr, group = cluster), color = \"red\", linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank())\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-08-14-post18/post18_files/figure-html5/unnamed-chunk-7-1.png",
    "last_modified": "2022-08-14T22:31:23+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-08-07-post17/",
    "title": "KantitatifTurk 0.0.0.9000",
    "description": "KantitatifTurk paketi.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-08-07",
    "categories": [
      "Development",
      "Finance"
    ],
    "contents": "\r\nTÃ¼rkÃ§e iÃ§erikli ve finans alanÄ±ndaki konulara odaklanacak ÅŸekilde\r\ntasarladÄ±ÄŸÄ±m {KantitatifTurk} paketinin baÅŸlangÄ±Ã§ sayÄ±labilecek\r\nversiyonunu bugÃ¼n itibarÄ±yla paylaÅŸtÄ±m. Hem kendi tarafÄ±mdan hem de\r\nprojeye destek olmak isteyenler tarafÄ±ndan zamanla bÃ¼yÃ¼mesini istediÄŸim\r\nbu projenin, finans alanÄ±na ilgi duyan ve bu alanÄ± R ile birleÅŸtirenlere\r\nfaydalÄ± olmasÄ±nÄ± dilerim.\r\nPaketi, {devtools} yardÄ±mÄ± ile GitHub Ã¼zerinden aÅŸaÄŸÄ±daki gibi\r\nindirebilirsiniz.\r\n\r\n\r\ndevtools::install_github(\"rpydaneogrendim/KantitatifTurk\")\r\n\r\n\r\nPaketin yÃ¼klenme iÅŸlemi tamamlandÄ±ktan sonra aÅŸaÄŸÄ±daki gibi\r\nÃ§aÄŸrÄ±labilir.\r\n\r\n\r\nlibrary(KantitatifTurk)\r\n\r\n\r\nPaketin fonksiyonlarÄ±nÄ± kÃ¼tÃ¼phaneyi Ã§aÄŸÄ±rmadan aÅŸaÄŸÄ±daki gibi\r\nkullanmak da mÃ¼mkÃ¼ndÃ¼r.\r\n\r\nKantitatifTurk::\r\n\r\nÄ°lk kullanÄ±lmasÄ± gereken fonksiyon veri()â€™dir. Bu fonksiyon\r\nyardÄ±mÄ± ile veriler tarihsel olarak Ã§ekilecek ve\r\nvarlik_tarihsel adÄ±nda bir obje yaratÄ±lacak. Bu objenin hiÃ§bir\r\nÅŸekilde deÄŸiÅŸtirilmemesi veya silinmemesi gerekiyor. Tarihsel veriler\r\niÃ§in ÅŸimdilik tek kaynak Ä°ÅŸ YatÄ±rÄ±mâ€™dÄ±r. Bu da paketin hisseler Ã¶zelinde\r\nolduÄŸu algÄ±sÄ± oluÅŸturabilir ancak hisseler dÄ±ÅŸÄ±nda da varlÄ±klarÄ±\r\nhedeflediÄŸim iÃ§in zamanla veri kaynaÄŸÄ±nÄ± geniÅŸleteceÄŸim.\r\nÃ–rnek olarak, 9 adet hissenin 253 gÃ¼nlÃ¼k tarihsel verilerini\r\nÃ§ekelim.\r\nveri() fonksiyonu ile ilgili dokÃ¼mantasyona ulaÅŸmak iÃ§in\r\naÅŸaÄŸÄ±daki komutu Ã§alÄ±ÅŸtÄ±rabilirsiniz.\r\n\r\n\r\n?veri\r\n\r\n\r\n\r\n\r\nhisseler <- c(\r\n  \"THYAO\",\r\n  \"SISE\",\r\n  \"SASA\",\r\n  \"BIMAS\",\r\n  \"GARAN\",\r\n  \"TCELL\",\r\n  \"PETKM\",\r\n  \"TUPRS\",\r\n  \"SOKM\"\r\n)\r\n\r\nveri(\r\n  varlik_kod = hisseler,\r\n  baslangic_tarih = \"2021-08-05\",\r\n  bitis_tarih = \"2022-08-05\",\r\n  gorsel = TRUE, # varsayilan\r\n  kaynak = \"isyatirim\" # varsayilan\r\n)\r\n\r\n\r\n\r\nGÃ¶rsel olarak incelenebilen varlÄ±klarÄ±n verileri\r\nvarlik_tarihsel olarak ortamÄ±nÄ±zda oluÅŸturulmuÅŸtur.\r\n\r\n\r\nTARIH\r\n\r\n\r\nTHYAO\r\n\r\n\r\nSISE\r\n\r\n\r\nSASA\r\n\r\n\r\nBIMAS\r\n\r\n\r\nGARAN\r\n\r\n\r\nTCELL\r\n\r\n\r\nPETKM\r\n\r\n\r\nTUPRS\r\n\r\n\r\nSOKM\r\n\r\n\r\n2022-07-29\r\n\r\n\r\n50.40\r\n\r\n\r\n21.82\r\n\r\n\r\n44.48\r\n\r\n\r\n92.10\r\n\r\n\r\n14.52\r\n\r\n\r\n16.92\r\n\r\n\r\n8.98\r\n\r\n\r\n268.4\r\n\r\n\r\n14.02\r\n\r\n\r\n2022-08-01\r\n\r\n\r\n51.50\r\n\r\n\r\n23.10\r\n\r\n\r\n46.50\r\n\r\n\r\n95.15\r\n\r\n\r\n14.71\r\n\r\n\r\n17.25\r\n\r\n\r\n9.18\r\n\r\n\r\n273.0\r\n\r\n\r\n14.68\r\n\r\n\r\n2022-08-02\r\n\r\n\r\n52.35\r\n\r\n\r\n22.86\r\n\r\n\r\n48.26\r\n\r\n\r\n93.45\r\n\r\n\r\n14.68\r\n\r\n\r\n17.03\r\n\r\n\r\n9.06\r\n\r\n\r\n270.8\r\n\r\n\r\n14.17\r\n\r\n\r\n2022-08-03\r\n\r\n\r\n55.00\r\n\r\n\r\n23.28\r\n\r\n\r\n49.84\r\n\r\n\r\n94.05\r\n\r\n\r\n14.84\r\n\r\n\r\n17.20\r\n\r\n\r\n9.07\r\n\r\n\r\n273.0\r\n\r\n\r\n13.97\r\n\r\n\r\n2022-08-04\r\n\r\n\r\n55.30\r\n\r\n\r\n23.76\r\n\r\n\r\n50.05\r\n\r\n\r\n95.30\r\n\r\n\r\n15.20\r\n\r\n\r\n17.30\r\n\r\n\r\n9.17\r\n\r\n\r\n270.4\r\n\r\n\r\n14.60\r\n\r\n\r\n2022-08-05\r\n\r\n\r\n58.20\r\n\r\n\r\n23.40\r\n\r\n\r\n49.80\r\n\r\n\r\n95.55\r\n\r\n\r\n15.68\r\n\r\n\r\n17.44\r\n\r\n\r\n9.23\r\n\r\n\r\n269.0\r\n\r\n\r\n14.40\r\n\r\n\r\nÄ°ncelenmek istenen varlÄ±klarÄ±n getirilerine ait Ã¶zet bilgiye\r\nozet_getiri() fonksiyonu yardÄ±mÄ± ile ulaÅŸÄ±labilir.\r\n\r\n\r\n?ozet_getiri\r\n\r\n\r\nBu fonksiyon yardÄ±mÄ± ile logaritmik veya aritmetik olarak\r\nhesaplanabilen getirilerin minimum, maksimum, ortalama, ortanca ve\r\nstandart sapma bilgilerine ulaÅŸÄ±labilir.\r\n\r\n\r\nozet_getiri(\r\n  getiri = \"logaritmik\", # varsayilan\r\n  gorsel = TRUE # varsayilan\r\n)\r\n\r\n# A tibble: 9 Ã— 6\r\n  KOD   Minimum Maksimum Ortalama Ortanca StandartSapma\r\n  <chr>   <dbl>    <dbl>    <dbl>   <dbl>         <dbl>\r\n1 BIMAS -0.0962   0.0605 0.00178  0.00226        0.0216\r\n2 GARAN -0.0688   0.0946 0.00217  0              0.0208\r\n3 PETKM -0.105    0.0764 0.00188  0.00283        0.0265\r\n4 SASA  -0.105    0.0951 0.00481  0.00328        0.0297\r\n5 SISE  -0.105    0.0950 0.00440  0.00256        0.0266\r\n6 SOKM  -0.105    0.0950 0.000831 0              0.0255\r\n7 TCELL -0.105    0.0699 0.000762 0              0.0232\r\n8 THYAO -0.105    0.0953 0.00602  0.00568        0.0303\r\n9 TUPRS -0.105    0.0863 0.00402  0.00204        0.0289\r\n\r\n\r\ngetiri_risk() fonksiyonu ile varlÄ±k getirilerinin\r\nyÄ±llÄ±klandÄ±rÄ±lmÄ±ÅŸ getiri ve risk bilgileri aÅŸaÄŸÄ±daki gibi incelenebilir.\r\nFonksiyon Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±ktan sonra risk_getiri isminde bir obje\r\nyaratacaktÄ±r. Getiriler logaritmik veya aritmetik olarak\r\nhesaplanabilir.\r\n\r\n\r\n?getiri_risk\r\n\r\n\r\n\r\n\r\ngetiri_risk(\r\n  getiri = \"aritmetik\",\r\n  gun = 252, # varsayilan\r\n  gorsel = TRUE # varsayilan\r\n)\r\n\r\n\r\n\r\n\r\n\r\nKOD\r\n\r\n\r\nYillikGetiri\r\n\r\n\r\nYillikRisk\r\n\r\n\r\nOran\r\n\r\n\r\nBIMAS\r\n\r\n\r\n0.5081250\r\n\r\n\r\n0.3407252\r\n\r\n\r\n1.4913044\r\n\r\n\r\nGARAN\r\n\r\n\r\n0.6027357\r\n\r\n\r\n0.3324938\r\n\r\n\r\n1.8127726\r\n\r\n\r\nPETKM\r\n\r\n\r\n0.5629509\r\n\r\n\r\n0.4159958\r\n\r\n\r\n1.3532611\r\n\r\n\r\nSASA\r\n\r\n\r\n1.3261321\r\n\r\n\r\n0.4770458\r\n\r\n\r\n2.7798841\r\n\r\n\r\nSISE\r\n\r\n\r\n1.2007094\r\n\r\n\r\n0.4222509\r\n\r\n\r\n2.8435923\r\n\r\n\r\nSOKM\r\n\r\n\r\n0.2905614\r\n\r\n\r\n0.4021772\r\n\r\n\r\n0.7224710\r\n\r\n\r\nTCELL\r\n\r\n\r\n0.2594781\r\n\r\n\r\n0.3664732\r\n\r\n\r\n0.7080411\r\n\r\n\r\nTHYAO\r\n\r\n\r\n1.6377039\r\n\r\n\r\n0.4825286\r\n\r\n\r\n3.3940038\r\n\r\n\r\nTUPRS\r\n\r\n\r\n1.1192899\r\n\r\n\r\n0.4584011\r\n\r\n\r\n2.4417260\r\n\r\n\r\nmaks_dusme_noktasi() fonksiyonu ile varlÄ±klarÄ±n maksimum\r\ndÃ¼ÅŸme noktasÄ± (Maximum Drawdown) hesaplanabilir. Fonksiyon tek bir\r\nparametre almaktadÄ±r. Ã‡alÄ±ÅŸtÄ±rÄ±ldÄ±ktan sonra\r\nmaks_dusme_noktalari isminde bir obje oluÅŸturacaktÄ±r.\r\n\r\n\r\n?maks_dusme_noktasi\r\n\r\n\r\n\r\n\r\nmaks_dusme_noktasi(\r\n  gorsel = TRUE # varsayilan\r\n)\r\n\r\n\r\n\r\n\r\n\r\nKOD\r\n\r\n\r\nMaksDD\r\n\r\n\r\nBIMAS\r\n\r\n\r\n-27.92473\r\n\r\n\r\nGARAN\r\n\r\n\r\n-16.54275\r\n\r\n\r\nPETKM\r\n\r\n\r\n-31.00848\r\n\r\n\r\nSASA\r\n\r\n\r\n-26.01054\r\n\r\n\r\nSISE\r\n\r\n\r\n-33.70972\r\n\r\n\r\nSOKM\r\n\r\n\r\n-32.73810\r\n\r\n\r\nTCELL\r\n\r\n\r\n-31.18101\r\n\r\n\r\nTHYAO\r\n\r\n\r\n-24.84076\r\n\r\n\r\nTUPRS\r\n\r\n\r\n-30.73194\r\n\r\n\r\nkaydirmali_korelasyon() fonksiyonu ile varlÄ±klar arasÄ±\r\nkorelasyonlar kayan bir ÅŸekilde (Rolling Correlation) hesaplanabilir.\r\nFonksiyon, ne kadarlÄ±k bir kayma olacaÄŸÄ±nÄ± belirten tek bir parametre\r\nile Ã§alÄ±ÅŸmaktadÄ±r.\r\n\r\n\r\n?kaydirmali_korelasyon\r\n\r\n\r\n\r\n\r\nkaydirmali_korelasyon(\r\n  gun = 90\r\n)\r\n\r\n\r\n\r\nPaketin diÄŸer fonksiyonlarÄ±nda Ã¶ngÃ¶rÃ¼yÃ¼ de dikkate aldÄ±m.\r\ndogrusal_regresyon() fonksiyonu, DoÄŸrusal Regresyon yÃ¶ntemi\r\nile tahmin ve Ã¶ngÃ¶rÃ¼ yapÄ±lmasÄ±nÄ± saÄŸlar. KullanÄ±cÄ±, gÃ¼ven aralÄ±ÄŸÄ± ve\r\nÃ¶ngÃ¶rÃ¼sÃ¼ yapÄ±lacak gÃ¼n uzunluÄŸunu belirleyebilir. Fonksiyon\r\nÃ§alÄ±ÅŸtÄ±rÄ±ldÄ±ktan sonra DR_varlik_ongoru isminde bir obje\r\noluÅŸacaktÄ±r.\r\n\r\n\r\n?dogrusal_regresyon\r\n\r\n\r\n\r\n\r\ndogrusal_regresyon(\r\n  guven = 0.95, # varsayilan\r\n  ongoru_gun = 180,\r\n  gorsel = TRUE # varsayilan\r\n)\r\n\r\n\r\n\r\n\r\n\r\nKOD\r\n\r\n\r\nONGORU\r\n\r\n\r\nALT\r\n\r\n\r\nUST\r\n\r\n\r\nBIMAS\r\n\r\n\r\n107.47772\r\n\r\n\r\n98.29485\r\n\r\n\r\n116.66059\r\n\r\n\r\nGARAN\r\n\r\n\r\n20.22989\r\n\r\n\r\n18.70555\r\n\r\n\r\n21.75423\r\n\r\n\r\nPETKM\r\n\r\n\r\n12.96083\r\n\r\n\r\n11.26202\r\n\r\n\r\n14.65964\r\n\r\n\r\nSASA\r\n\r\n\r\n66.90545\r\n\r\n\r\n60.34000\r\n\r\n\r\n73.47091\r\n\r\n\r\nSISE\r\n\r\n\r\n33.25522\r\n\r\n\r\n29.88172\r\n\r\n\r\n36.62872\r\n\r\n\r\nSOKM\r\n\r\n\r\n14.08098\r\n\r\n\r\n11.65936\r\n\r\n\r\n16.50259\r\n\r\n\r\nTCELL\r\n\r\n\r\n23.12055\r\n\r\n\r\n19.02521\r\n\r\n\r\n27.21590\r\n\r\n\r\nTHYAO\r\n\r\n\r\n82.56969\r\n\r\n\r\n75.99628\r\n\r\n\r\n89.14309\r\n\r\n\r\nTUPRS\r\n\r\n\r\n418.84886\r\n\r\n\r\n389.84658\r\n\r\n\r\n447.85113\r\n\r\n\r\nÃ–ngÃ¶rÃ¼ iÃ§in kullanÄ±labilecek diÄŸer bir fonksiyon\r\ngeometrik_brownian_hareketi() ile varliklarin ileriye yÃ¶nelik\r\nsimÃ¼lasyonu yapÄ±labilir. Ã–ngÃ¶rÃ¼ler, elde edilen simÃ¼le deÄŸerlerin\r\nortanca ya da ortalamasÄ±dÄ±r. Bu fonksiyon, varlik_tarihsel veri\r\nÃ§erÃ§evesinde bulunan tek bir hisse ile Ã§alÄ±ÅŸtÄ±rÄ±lmalÄ±dÄ±r. Bir obje\r\noluÅŸturulmamakla beraber sonuÃ§lara gÃ¶rsel Ã¼zerinden ulaÅŸÄ±labilir.\r\n\r\n\r\n?geometrik_brownian_hareketi\r\n\r\n\r\n\r\n\r\ngeometrik_brownian_hareketi(\r\n  varlik_kod = \"TUPRS\",\r\n  simulasyon_sayisi = 100, # varsayilan\r\n  gun_sayisi = 90,\r\n  beklenen_getiri = 0, # varsayilan\r\n  volatilite = 0.5, # varsayilan\r\n  is_gunu_sayisi = nrow(varlik_tarihsel),\r\n  ongoru_tipi = \"ortanca\", # varsayilan\r\n  gorsel = TRUE # varsayilan\r\n)\r\n\r\n\r\n\r\nÃ–ngÃ¶rÃ¼ iÃ§in kullanÄ±labilecek son bir fonksiyon\r\nmarkov_zinciri() ile varliklarin ileriye yÃ¶nelik yÃ¶n\r\nolasÄ±lÄ±klarÄ± hesaplanabilir. Fonksiyon, Markov Zinciri yÃ¶ntemi ile\r\nvarlÄ±ÄŸÄ±n son hareketinden yola Ã§Ä±karak belirlenen gÃ¼n sayÄ±sÄ± kadar\r\nsonrasÄ± iÃ§in yÃ¶n olasÄ±lÄ±klarÄ± hesaplamaktadÄ±r. Ã‡alÄ±ÅŸtÄ±rÄ±ldÄ±ktan sonra\r\ngÃ¶rsel olarak sonuÃ§lara ulaÅŸÄ±labileceÄŸi gibi markov_olasilik\r\nobjesinden de faydalanÄ±labilir.\r\n\r\n\r\n?markov_zinciri\r\n\r\n\r\n\r\n\r\nmarkov_zinciri(\r\n  n_adim = 1, # varsayilan\r\n  gorsel = TRUE # varsayilan\r\n)\r\n\r\n\r\n\r\n\r\n\r\nGunSonrasi\r\n\r\n\r\nKOD\r\n\r\n\r\nDurum\r\n\r\n\r\nDurum1\r\n\r\n\r\nDurum2\r\n\r\n\r\nOlasilik\r\n\r\n\r\n1\r\n\r\n\r\nTUPRS\r\n\r\n\r\nAyni-Dusus\r\n\r\n\r\nAyni\r\n\r\n\r\nDusus\r\n\r\n\r\n0.0000000\r\n\r\n\r\n1\r\n\r\n\r\nTUPRS\r\n\r\n\r\nAyni-Ayni\r\n\r\n\r\nAyni\r\n\r\n\r\nAyni\r\n\r\n\r\n0.0000000\r\n\r\n\r\n1\r\n\r\n\r\nTUPRS\r\n\r\n\r\nDusus-Ayni\r\n\r\n\r\nDusus\r\n\r\n\r\nAyni\r\n\r\n\r\n0.0039841\r\n\r\n\r\n1\r\n\r\n\r\nTUPRS\r\n\r\n\r\nYukselis-Ayni\r\n\r\n\r\nYukselis\r\n\r\n\r\nAyni\r\n\r\n\r\n0.0159363\r\n\r\n\r\n1\r\n\r\n\r\nTUPRS\r\n\r\n\r\nAyni-Yukselis\r\n\r\n\r\nAyni\r\n\r\n\r\nYukselis\r\n\r\n\r\n0.0199203\r\n\r\n\r\n1\r\n\r\n\r\nTUPRS\r\n\r\n\r\nDusus-Dusus\r\n\r\n\r\nDusus\r\n\r\n\r\nDusus\r\n\r\n\r\n0.1752988\r\n\r\n\r\n1\r\n\r\n\r\nTUPRS\r\n\r\n\r\nDusus-Yukselis\r\n\r\n\r\nDusus\r\n\r\n\r\nYukselis\r\n\r\n\r\n0.2430279\r\n\r\n\r\n1\r\n\r\n\r\nTUPRS\r\n\r\n\r\nYukselis-Dusus\r\n\r\n\r\nYukselis\r\n\r\n\r\nDusus\r\n\r\n\r\n0.2509960\r\n\r\n\r\n1\r\n\r\n\r\nTUPRS\r\n\r\n\r\nYukselis-Yukselis\r\n\r\n\r\nYukselis\r\n\r\n\r\nYukselis\r\n\r\n\r\n0.2908367\r\n\r\n\r\nSon olarak, riske_maruz_deger() fonksiyonu ile ÅŸimdilik\r\nportfÃ¶y bazÄ±nda olmasa da varlÄ±klar bazÄ±nda riske maruz deÄŸerler\r\nparametrik veya tarihsel olarak hesaplanabilir. Fonksiyon, ilgili\r\nhesaplamalarÄ± obje olarak oluÅŸturacaktÄ±r. Hata alÄ±nmamasÄ± iÃ§in girilen\r\ngozlem sayÄ±sÄ±nÄ±n varlik_tarihsel veri Ã§erÃ§evesindeki satÄ±rdan\r\nkÃ¼Ã§Ã¼k olmasÄ±na dikkat edilmelidir. Ã–rneÄŸin, gÃ¶zlem sayÄ±sÄ± 252 girildiÄŸi\r\nzaman son 252 gÃ¼nÃ¼ (getiriler iÃ§in +1 daha 253) alacaÄŸÄ± iÃ§in satÄ±r\r\nsayÄ±sÄ± 253 veya daha bÃ¼yÃ¼k olmalÄ±dÄ±r.\r\n\r\n\r\n?riske_maruz_deger\r\n\r\n\r\n\r\n\r\nriske_maruz_deger(\r\n  rmd = \"parametrik\", # varsayilan\r\n  guven_araligi = 0.99, # varsayilan\r\n  gozlem_sayisi = 252, # varsayilan\r\n  elde_tutma_suresi = 1, # varsayilan\r\n  volatilite = \"standartsapma\", #varsayilan\r\n  getiri = \"logaritmik\", #varsayilan\r\n  piyasa_degeri = 100, #varsayilan\r\n  gorsel = TRUE # varsayilan\r\n)\r\n\r\n\r\n\r\n\r\n\r\nVarlik\r\n\r\n\r\nParametrik_RMD\r\n\r\n\r\nTHYAO\r\n\r\n\r\n7.044808\r\n\r\n\r\nSISE\r\n\r\n\r\n6.194875\r\n\r\n\r\nSASA\r\n\r\n\r\n6.916234\r\n\r\n\r\nBIMAS\r\n\r\n\r\n5.020284\r\n\r\n\r\nGARAN\r\n\r\n\r\n4.844383\r\n\r\n\r\nTCELL\r\n\r\n\r\n5.396344\r\n\r\n\r\nPETKM\r\n\r\n\r\n6.165011\r\n\r\n\r\nTUPRS\r\n\r\n\r\n6.727724\r\n\r\n\r\nSOKM\r\n\r\n\r\n5.925761\r\n\r\n\r\nURL:\r\nBugReports:\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-08-07-post17/post17_files/figure-html5/unnamed-chunk-18-1.png",
    "last_modified": "2022-08-07T19:26:42+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-08-02-post16/",
    "title": "Creating Trend Indicator Using Linear Regression Method: A Study on BIST-100",
    "description": "Trend tracking with Linear Regression method.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-08-02",
    "categories": [
      "Finance",
      "Technical Analysis"
    ],
    "contents": "\r\nLinear Regression is a method already used in technical analysis, but\r\nusing existing methods as they are should not be a rule! So, we should\r\nalways be open to different adventures. In this study, we will focus on\r\na method that identifies both trend and overbought/oversold zones.\r\nThe data we are going to use are taken from the Electronic Data\r\nDelivery System of the Central Bank of the Republic of Turkey.\r\nAfter clicking this\r\nlink follow the steps shown below.\r\ns1. Market Statistics\r\ns2. Borsa Istanbul (BIST) Trading Volume (Thousand TRY, Thousand\r\nUnit)\r\ns3. (PRICE INDICES) BIST-100 (XU100), According to Closing Price\r\n(January, 1986=0.01)\r\ns4. Click the Add button\r\ns5. Report Settings\r\ns5.1. Frequency: Business\r\ns5.2. Date From: 01-01-2003\r\ns5.3. Date To: 01-08-2022\r\ns5.4. Click the Create Report button\r\ns5.5. The file can be downloaded by clicking the export button in the\r\nupper right corner\r\nYou can also access the data (post16.xlsx) on my GitHub\r\naccount.\r\n\r\n\r\nlibrary(tidyverse)\r\n\r\ndf_xu100 <- readxl::read_excel(\"data.xlsx\") %>% \r\n  mutate(\r\n    date = lubridate::dmy(date)\r\n  )\r\n\r\n\r\nIt may be a good idea to visualize before starting a study. You can\r\nfind the codes related to visualization at the end of the post.\r\n\r\n\r\n\r\nWe can say that there is no problem with the data.\r\nIn the next part, we are going to use monthly data. Letâ€™s extract the\r\nyears and months from the date column.\r\n\r\n\r\ndf_xu100 <- df_xu100 %>% \r\n  mutate(\r\n    Year = format(as.Date(date),\"%Y\"),\r\n    Month = format(as.Date(date),\"%m\")\r\n  )\r\n\r\n\r\nAfter running the above code, we get the closing values at the end of\r\nthe month as follows:\r\n\r\n\r\ndf_xu100 <- df_xu100 %>% \r\n  group_by(Month,Year) %>% \r\n  filter(date == max(date)) %>% \r\n  ungroup()\r\n\r\n\r\nA data frame that can be used for monthly data has been created.\r\nMonthly data are as follows:\r\n\r\n\r\nxu100_m <- df_xu100 %>% \r\n  select(date,xu100)\r\n\r\n\r\n\r\n\r\n\r\nLetâ€™s use the first 19 years from 2003 to 2019 and predict the\r\nremaining 1 year, but first let me explain the method we are going to\r\nuse.\r\nA Linear Regression model is created by fitting a trend line to a\r\ndataset where a linear relationship already exists.\r\n\r\n\r\ntrain_xu100_m <- xu100_m %>% \r\n  filter(date <= as.Date(\"2021-12-31\")) %>% \r\n  mutate(t = seq(1,nrow(.),1))\r\n\r\nmodel <- lm(xu100 ~ t, data = train_xu100_m)\r\n#summary(model)\r\n\r\n\r\n\r\n\r\n===============================================\r\n                        Dependent variable:    \r\n                    ---------------------------\r\n                               xu100           \r\n-----------------------------------------------\r\nt                            5.033***          \r\n                              (0.118)          \r\n                                               \r\nConstant                    102.259***         \r\n                             (15.562)          \r\n                                               \r\n-----------------------------------------------\r\nObservations                    228            \r\nR2                             0.890           \r\nAdjusted R2                    0.889           \r\nResidual Std. Error     117.105 (df = 226)     \r\nF Statistic         1,824.293*** (df = 1; 226) \r\n===============================================\r\nNote:               *p<0.1; **p<0.05; ***p<0.01\r\n\r\nAnd a prediction interval captures the uncertainty around a single\r\nvalue.\r\n\r\n\r\ntrain_xu100_m$Fitted <- as.numeric(predict(model))\r\n\r\ntrain_xu100_m$Lwr90 <- as.numeric(predict(model, interval = \"predict\", level = 0.9)[,2])\r\ntrain_xu100_m$Upr90 <- as.numeric(predict(model, interval = \"predict\", level = 0.9)[,3])\r\n\r\n\r\nPut them all together.\r\n\r\n\r\n\r\nSome questions about the method.\r\nHow far are the actual values from the fitted values? If the distance\r\nis positive, it means that the actual values are above the fitted\r\nvalues.\r\n\r\n\r\ntrain_xu100_m$ActualFitted <- train_xu100_m$xu100 - train_xu100_m$Fitted\r\n\r\n\r\nHow far are the actual values from the upper band values? If the\r\ndistance is positive, it means that the real values are above the upper\r\nband values, which is the overbought zone.\r\n\r\n\r\ntrain_xu100_m$ActualUpr <- train_xu100_m$xu100 - train_xu100_m$Upr90\r\n\r\n\r\nHow far are the actual values from the lower band values? If the\r\ndistance is negative, it means that the real values are below the lower\r\nband values, which is the oversold zone. Notice that I multiplied the\r\nresult by minus 1.\r\n\r\n\r\ntrain_xu100_m$ActualLwr <- (train_xu100_m$xu100 - train_xu100_m$Lwr90)*(-1)\r\n\r\n\r\nItâ€™s hard to understand the values we get. In such cases, values can\r\nbe normalized. Hereâ€™s the formula for normalization:\r\n\\(x_{normalized} = \\frac{(x -\r\nx_{minimum})}{(x_{maximum} - x_{minimum})}\\)\r\n\r\n\r\n# Don't run!\r\n\r\ntrain_xu100_m <- train_xu100_m %>% \r\n  mutate_at(vars(4:6), function(x) (x - min(x))/(max(x) - min(x)))\r\n\r\n\r\nIn general, values are normalized to be between 0 and 1, but it is\r\nalso possible to normalize it to be between -1 and 1.\r\n\\(x_{normalized} = 2*\\frac{(x -\r\nx_{minimum})}{(x_{maximum} - x_{minimum})}-1\\)\r\n\r\n\r\ntrain_xu100_m <- train_xu100_m %>% \r\n  mutate_at(vars(7:9), function(x) 2*((x - min(x))/(max(x) - min(x)))-1)\r\n\r\n\r\n\r\n\r\n\r\nIn the above graph, we expect the line to fluctuate around the zero\r\nline, but BIST-100 is far from it which tells us that we should consider\r\na downward move.\r\n\r\n\r\n\r\nIn the graph above, which we created using the upper bands, the\r\ncloseness to the 1 implies that it is in the overbought zone. We can\r\ninterpret that BIST-100 is in this zone.\r\n\r\n\r\n\r\nIn the graph above, which we created using the lower bands, the\r\ncloseness to the 1 implies that it is in the oversold zone. We can say\r\nthat BIST-100 is far from the oversold zone.\r\nWe have 236 observations and we used 228 of them. Letâ€™s try to\r\npredict the remaining 7 months (we didnâ€™t include August) and see how\r\nfar from the line we specified.\r\n\r\n\r\nmaster1 <- train_xu100_m %>% \r\n  select(3,2,4,5,6)\r\n\r\nmaster2 <- data.frame(\r\n  t = seq(nrow(master1)+1,nrow(df_xu100)-1,1),\r\n  xu100 = df_xu100$xu100[c((nrow(master1)+1):(nrow(df_xu100)-1))]\r\n)\r\n\r\nmaster2$Fitted <- predict(model, newdata = data.frame(t = master2$t))\r\nmaster2$Lwr90 <- predict(model, newdata = data.frame(t = master2$t),\r\n                         interval = \"prediction\",\r\n                         level = 0.9)[,2]\r\nmaster2$Upr90 <- predict(model, newdata = data.frame(t = master2$t),\r\n                         interval = \"prediction\",\r\n                         level = 0.9)[,3]\r\n\r\nmaster <- rbind(master1,master2)\r\n\r\n\r\n\r\n\r\n\r\nAs can be seen from the graph, the real value is further away, which\r\nmeans that it is both moving away from the fitted value and in the\r\noverbought zone.\r\nMy in-depth studies will continue here :)\r\nThe codes of the graphics used in the study can be found below.\r\n\r\n\r\nggplot(df_xu100, aes(x = date, y = xu100)) +\r\n  geom_line() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank()) +\r\n  scale_y_continuous(labels = scales::comma)\r\n\r\nggplot(xu100_m, aes(x = date, y = xu100)) +\r\n  geom_line(size = 1) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank()) +\r\n  scale_y_continuous(labels = scales::comma)\r\n\r\nggplot(train_xu100_m, aes(x = t)) +\r\n  geom_line(aes(y = xu100), color = \"gray30\") +\r\n  geom_line(aes(y = Fitted), color = \"blue\") +\r\n  geom_line(aes(y = Lwr90), color = \"red\", linetype = \"dashed\") +\r\n  geom_line(aes(y = Upr90), color = \"red\", linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank()) +\r\n  scale_y_continuous(labels = scales::comma)\r\n\r\nggplot(train_xu100_m, aes(x = t)) +\r\n  geom_line(aes(y = xu100), color = \"gray30\") +\r\n  geom_line(aes(y = Fitted), color = \"blue\") +\r\n  geom_line(aes(y = Lwr90), color = \"red\", linetype = \"dashed\") +\r\n  geom_line(aes(y = Upr90), color = \"red\", linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank()) +\r\n  scale_y_continuous(labels = scales::comma) -> g1\r\n\r\nggplot(train_xu100_m, aes(x = t)) +\r\n  geom_line(aes(y = ActualFitted)) +\r\n  geom_hline(yintercept = 0) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank()) -> g2\r\n\r\ngridExtra::grid.arrange(g1,g2)\r\n\r\nggplot(train_xu100_m, aes(x = t)) +\r\n  geom_line(aes(y = ActualUpr)) +\r\n  geom_hline(yintercept = 0) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank()) -> g3\r\n\r\ngridExtra::grid.arrange(g1,g3)\r\n\r\nggplot(train_xu100_m, aes(x = t)) +\r\n  geom_line(aes(y = ActualLwr)) +\r\n  geom_hline(yintercept = 0) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank()) -> g4\r\n\r\ngridExtra::grid.arrange(g1,g4)\r\n\r\nggplot(master, aes(x = t)) +\r\n  geom_line(aes(y = xu100), color = \"gray30\") +\r\n  geom_line(aes(y = Fitted), color = \"blue\") +\r\n  geom_line(aes(y = Lwr90), color = \"red\", linetype = \"dashed\") +\r\n  geom_line(aes(y = Upr90), color = \"red\", linetype = \"dashed\") +\r\n  geom_vline(xintercept = nrow(master1)+1, linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\", size = 15)) +\r\n  scale_y_continuous(labels = scales::comma) +\r\n  labs(\r\n    title = \"BIST-100 Monthly\",\r\n    subtitle = \"Is it in the overbought zone?\"\r\n  )\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-08-02-post16/post16_files/figure-html5/unnamed-chunk-20-1.png",
    "last_modified": "2022-08-02T20:47:42+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-08-01-post15/",
    "title": "Tarihsel SÄ±caklÄ±klar: Ä°stanbul iÃ§in 2014-2022 YÄ±llarÄ±nÄ±n AylÄ±k Bazda Ä°ncelenmesi",
    "description": "NOAA verileri ve rnoaa paketi ile tarihsel sÄ±caklÄ±klarÄ±n incelenmesi.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-08-01",
    "categories": [
      "Web"
    ],
    "contents": "\r\nNOAA (National Oceanic and Atmospheric Administration/Ulusal Okyanus\r\nve Atmosfer Dairesi), Amerika BirleÅŸik Devletleriâ€™nin DÃ¼nyaâ€™daki hava ve\r\ndeniz olaylarÄ±nÄ± araÅŸtÄ±rmasÄ± amacÄ±yla gÃ¶revlendirilmiÅŸ bir kurumudur.\r\n1807 yÄ±lÄ±nda kurulmuÅŸ olan NOAA, hava, deniz ve gÃ¶kyÃ¼zÃ¼ndeki tehlikeleri\r\naraÅŸtÄ±rÄ±p, okyanus ve kÄ±yÄ± kaynaklarÄ±nÄ±n korunmasÄ± konusunda araÅŸtÄ±rma\r\nve geliÅŸtirme yapmaktadÄ±r (Vikipedi).\r\nNOAAâ€™den faydalanabilmek iÃ§in Ã¶ncelikle bir token almak gerekiyor. Åžu adresten ilgili\r\nsayfaya ulaÅŸÄ±labilir. YapÄ±lmasÄ± gereken adÄ±mlar sitede yazmaktadÄ±r. Bir\r\nmail adresi girerek submit butonuna tÄ±klayÄ±n. An email has been sent\r\ncontaining your CDO web services token mesajÄ±ndan sonra mailinizi\r\nkontrol edin. Ã–rnek olmasÄ± iÃ§in gelen mail gÃ¶rÃ¼ntÃ¼sÃ¼nÃ¼ paylaÅŸÄ±yorum.\r\n\r\n\r\n\r\nNOAAâ€™den verileri Ã§ekebilmek iÃ§in rnoaa paketini kullanacaÄŸÄ±z.\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(ggridges)\r\n\r\n#install.packages(\"rnoaa\")\r\nlibrary(rnoaa)\r\n\r\nmyToken <- \"...\"\r\n\r\n\r\n\r\n\r\n\r\nÃ–nce TÃ¼rkiyeâ€™deki istasyonlarÄ±n listesini alalÄ±m. ghcnd_stations()\r\nfonksiyonunda kullanacaÄŸÄ±mÄ±z id sÃ¼tununun ilk iki harfi Ã¼lke kodunu\r\ntemsil etmektedir. TÃ¼rkiye iÃ§in bu TUâ€™dur.\r\n\r\n\r\ncountries <- ghcnd_countries() %>% \r\n  filter(name == \"Turkey\") %>% \r\n  pull(code)\r\n\r\n# id: The weather stationâ€™s ID number. The first two letters denote the country\r\n# (using FIPS country codes).\r\n\r\nstations <- ghcnd_stations() %>% \r\n  filter(grepl(paste0(\"^\",countries), id))\r\n\r\n\r\nSiz bundan sonrasÄ±nda istediÄŸiniz istasyon ile devam edebilirsiniz.\r\nBen bu yazÄ±da Ä°stanbul iÃ§in bir uygulama yapacaÄŸÄ±m.\r\nAÅŸaÄŸÄ±daki filtreleri yapalÄ±m.\r\nname sÃ¼tunu Ä°stanbul olsun.\r\n\r\n\r\n# name: The stationâ€™s name.\r\n\r\n\r\nelement sÃ¼tununda TAVG olsun. TAVG, ortalama sÄ±caklÄ±ÄŸÄ± temsil\r\nediyor.\r\n\r\n\r\n# TAVG: Average temperature, in tenths of degrees Celsius\r\n\r\n\r\nSon Ã¶lÃ§Ã¼m yÄ±lÄ± olan last_year 2022 olsun.\r\n\r\n\r\n# last_year: The last year of data available at that station for that weather element.\r\n\r\n\r\nÄ°lk Ã¶lÃ§Ã¼m yÄ±lÄ± olan first_year deÄŸiÅŸkeni de en eski yÄ±l olsun.\r\n\r\n\r\n# first_year: The first year of data available at that station for that weather element.\r\n\r\n\r\nFiltreleyelim.\r\n\r\n\r\nistanbul <- stations %>% \r\n  select(id,name,element,first_year,last_year) %>% \r\n  filter(\r\n    grepl(\"ISTANBUL\",name) & element == \"TAVG\" & last_year == 2022\r\n  )\r\n\r\n\r\nYukarÄ±daki filtreye gÃ¶re 1 tane istasyon kaldÄ±. O da bundan sonra\r\nkullanacaÄŸÄ±mÄ±z TUM00017064 idâ€™li istasyondur.\r\nBu istasyondaki ulaÅŸabileceÄŸimiz verilere bakalÄ±m.\r\n\r\n\r\nmyStation <- ncdc_datatypes(stationid = \"GHCND:TUM00017064\",\r\n                            datasetid = \"GHCND\",\r\n                            token = myToken)$data\r\n\r\n\r\n\r\n\r\nmindate\r\n\r\n\r\nmaxdate\r\n\r\n\r\nname\r\n\r\n\r\ndatacoverage\r\n\r\n\r\nid\r\n\r\n\r\n1781-01-01\r\n\r\n\r\n2022-07-28\r\n\r\n\r\nPrecipitation\r\n\r\n\r\n1\r\n\r\n\r\nPRCP\r\n\r\n\r\n1857-01-18\r\n\r\n\r\n2022-07-28\r\n\r\n\r\nSnow depth\r\n\r\n\r\n1\r\n\r\n\r\nSNWD\r\n\r\n\r\n1874-10-13\r\n\r\n\r\n2022-07-28\r\n\r\n\r\nAverage Temperature.\r\n\r\n\r\n1\r\n\r\n\r\nTAVG\r\n\r\n\r\n1763-01-01\r\n\r\n\r\n2022-07-28\r\n\r\n\r\nMaximum temperature\r\n\r\n\r\n1\r\n\r\n\r\nTMAX\r\n\r\n\r\n1763-01-01\r\n\r\n\r\n2022-07-28\r\n\r\n\r\nMinimum temperature\r\n\r\n\r\n1\r\n\r\n\r\nTMIN\r\n\r\n\r\nVerileri Ã§ekelim.\r\n\r\n\r\navg34 <- ncdc(\r\n  datasetid = \"GHCND\",\r\n  stationid = \"GHCND:TUM00017064\",\r\n  datatypeid = \"TAVG\",\r\n  startdate = \"2014-01-01\",\r\n  enddate = \"2022-07-31\",\r\n  token = myToken,\r\n  units = \"metric\",\r\n  limit = 1000\r\n)$data\r\n\r\n\r\nYukarÄ±daki kodu Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±mÄ±zda tarih aralÄ±ÄŸÄ±nÄ±n 1 yÄ±ldan az olmasÄ±\r\ngerektiÄŸini belirten The date range must be less than 1 year\r\nuyarÄ±sÄ±nÄ± alacaÄŸÄ±z.\r\nO halde ÅŸÃ¶yle yapalÄ±m: Elimizde 1 yÄ±llÄ±k farklÄ± aralÄ±klarda tarihler\r\nolsun ve bir dÃ¶ngÃ¼ yardÄ±mÄ± ile hepsine ulaÅŸalÄ±m.\r\n\r\n\r\ndf_date <- data.frame(\r\n  \"StartDate\" = (Sys.Date()-1)-365,\r\n  \"EndDate\" = Sys.Date()-1\r\n)\r\n\r\nfor(i in 2:9){\r\n  \r\n  df_date[i,2] <- df_date[(i-1),1] - 1\r\n  df_date[i,1] <- df_date[i,2] - 365\r\n  \r\n}\r\n\r\ndf_date <- df_date %>% \r\n  arrange(StartDate)\r\n\r\n\r\n\r\n\r\nStartDate\r\n\r\n\r\nEndDate\r\n\r\n\r\n2013-07-25\r\n\r\n\r\n2014-07-25\r\n\r\n\r\n2014-07-26\r\n\r\n\r\n2015-07-26\r\n\r\n\r\n2015-07-27\r\n\r\n\r\n2016-07-26\r\n\r\n\r\n2016-07-27\r\n\r\n\r\n2017-07-27\r\n\r\n\r\n2017-07-28\r\n\r\n\r\n2018-07-28\r\n\r\n\r\n2018-07-29\r\n\r\n\r\n2019-07-29\r\n\r\n\r\n2019-07-30\r\n\r\n\r\n2020-07-29\r\n\r\n\r\n2020-07-30\r\n\r\n\r\n2021-07-30\r\n\r\n\r\n2021-07-31\r\n\r\n\r\n2022-07-31\r\n\r\n\r\nYukarÄ±daki tabloda yer alan her bir satÄ±r 1 yÄ±llÄ±k aralÄ±klar ile\r\noluÅŸturulan tarihlerdir. Her bir satÄ±r iÃ§in verileri Ã§ekelim.\r\n\r\n\r\ndf_avg34 <- data.frame()\r\n\r\nfor(i in 1:nrow(df_date)) {\r\n  \r\n  avg34 <- ncdc(\r\n    datasetid = \"GHCND\",\r\n    stationid = \"GHCND:TUM00017064\",\r\n    datatypeid = \"TAVG\",\r\n    startdate = as.character(df_date[i, 1]),\r\n    enddate = as.character(df_date[i, 2]),\r\n    token = myToken,\r\n    units = \"metric\",\r\n    limit = 1000\r\n  )\r\n  \r\n  df_avg34 <- df_avg34 %>%\r\n    bind_rows(\r\n      data.frame(\r\n        \"Date\" = avg34$data$date,\r\n        \"AvgTemp\" = avg34$data$value\r\n      )\r\n    )\r\n  \r\n}\r\n\r\n\r\nElde ettiÄŸimiz veri setindeki minimum ve maksimum tarih aralÄ±klarÄ±na\r\nbakalÄ±m.\r\n\r\n\r\ndf_avg34 %>% \r\n  slice(1,nrow(.))\r\n\r\n\r\n\r\n\r\nDate\r\n\r\n\r\nAvgTemp\r\n\r\n\r\n2014-02-18T00:00:00\r\n\r\n\r\n130\r\n\r\n\r\n2022-07-27T00:00:00\r\n\r\n\r\n276\r\n\r\n\r\nTabloda yer alan ortalama sÄ±caklÄ±klarÄ± 10â€™a bÃ¶ldÃ¼ÄŸÃ¼mÃ¼z zaman doÄŸru\r\ndeÄŸerlere ulaÅŸacaÄŸÄ±z. Ã‡Ã¼nkÃ¼ ham veride herhangi bir ondalÄ±k yer almÄ±yor.\r\nBunun yanÄ±nda tarihlerin yer aldÄ±ÄŸÄ± sÃ¼tunu da tarih formatÄ±na Ã§evirmemiz\r\ngerekiyor.\r\n\r\n\r\ndf_avg34$AvgTemp <- df_avg34$AvgTemp / 10\r\ndf_avg34$Date <- as.Date(substr(df_avg34$Date,1,10))\r\n\r\n\r\n\r\n\r\nDate\r\n\r\n\r\nAvgTemp\r\n\r\n\r\n2014-02-18\r\n\r\n\r\n13.0\r\n\r\n\r\n2022-07-27\r\n\r\n\r\n27.6\r\n\r\n\r\nSÄ±caklÄ±k verileri ile Ã§alÄ±ÅŸtÄ±ÄŸÄ±m zaman ggridges paketini kullanmaya\r\nÃ¶zen gÃ¶steriyorum. Bu paket ile Ã¶zel bir gÃ¶rselleÅŸtirme tÃ¼rÃ¼ olan\r\nRidgeline veya Joy plot kullanÄ±labilir.\r\nTarihlerden aylarÄ± ve yÄ±llarÄ± elde edelim ve grafiÄŸi ay sayÄ±sÄ±na\r\nbÃ¶lÃ¼p yukarÄ±da belirttiÄŸim Ridgelineâ€™Ä± yapalÄ±m.\r\n\r\n\r\ndf_avg34_split <- df_avg34 %>% \r\n  mutate(\r\n    \"Year\" = format(as.Date(Date),\"%Y\"),\r\n    \"Month\" = factor(\r\n      format(as.Date(Date),\"%B\"),\r\n      levels = c(\"Ocak\",\"Åžubat\",\"Mart\",\"Nisan\",\"MayÄ±s\",\"Haziran\",\r\n                 \"Temmuz\",\"AÄŸustos\",\"EylÃ¼l\",\"Ekim\",\"KasÄ±m\",\"AralÄ±k\")\r\n    )\r\n  ) %>% \r\n  mutate(\r\n    Year = forcats::fct_rev(Year)\r\n  )\r\n\r\nggplot(df_avg34_split, aes(x = AvgTemp, y = Year, fill = stat(x))) +\r\n  geom_density_ridges_gradient(scale = 3, rel_min_height = 0.01) +\r\n  scale_fill_viridis_c(option = \"C\") +\r\n  facet_wrap(~Month) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.position = \"top\",\r\n        legend.title = element_blank(),\r\n        strip.text = element_text(size = 20),\r\n        plot.title = element_text(face = \"bold\", hjust = 0.5)) +\r\n  labs(title = \"Ä°stanbul'da Hava SÄ±caklÄ±klarÄ±, 2014-2022\")\r\n\r\n\r\n\r\nSon olarak, aylara gÃ¶re ortalamada en sÄ±cak yÄ±lÄ±n hangisi olduÄŸuna\r\nbakalÄ±m.\r\n\r\n\r\ndf_avg34_split %>% \r\n  select(-Date) %>% \r\n  group_by(Year,Month) %>% \r\n  summarise(AvgTemp = mean(AvgTemp)) %>% \r\n  ungroup() %>% \r\n  group_by(Month) %>% \r\n  filter(AvgTemp == max(AvgTemp)) %>% \r\n  ggplot(aes(x = Month, y = AvgTemp, fill = AvgTemp)) +\r\n  geom_col() +\r\n  geom_text(aes(label = paste0(Year,\"\\n(\",round(AvgTemp, digits = 1),\")\")), vjust = 1.5) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank()) +\r\n  scale_fill_gradient(low = \"turquoise\", high = \"red\")\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-08-01-post15/post15_files/figure-html5/unnamed-chunk-19-1.png",
    "last_modified": "2022-08-01T17:07:16+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-07-03-post14/",
    "title": "CNN ile Resim SÄ±nÄ±flandÄ±rma: Milletvekillerinin FotoÄŸraflarÄ± Ãœzerinden Bir Uygulama",
    "description": "KonvolÃ¼syonel Sinir AÄŸlarÄ±'nÄ±n ve milletvekillerinin fotoÄŸraflarÄ±nÄ±n kullanÄ±ldÄ±ÄŸÄ± bir sÄ±nÄ±flandÄ±rma Ã§alÄ±ÅŸmasÄ±.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-07-03",
    "categories": [
      "Deep Learning"
    ],
    "contents": "\nKonvolÃ¼syonel Sinir AÄŸÄ± (Convolutional Neural\nNetwork-CNN), genellikle gÃ¶rsel bilginin analiz\nedilmesinde kullanÄ±lan bir Yapay Sinir AÄŸÄ± (Artificial Neural\nNetwork-ANN) sÄ±nÄ±fÄ±dÄ±r.\nEn basit ÅŸekilde CNNâ€™i aÅŸaÄŸÄ±daki gibi tanÄ±mlayabiliriz.\n\n\n\nFigure 1: https://www.mdpi.com/2076-3417/9/21/4500\n\n\n\nGirdi (Input) bÃ¶lÃ¼mÃ¼ uygulamamÄ±zdaki milletvekillerinin\nfotoÄŸraflarÄ±dÄ±r. Yani, verinin ham olarak aÄŸa verildiÄŸi bÃ¶lÃ¼mdÃ¼r.\nKonvolÃ¼syon (Convolution) ve Ortaklama/Havuzlama (Pooling) denilen\nbÃ¶lÃ¼mde gÃ¶rsellerdeki Ã¶zellikler yakalanÄ±r (feature extraction).\nArdÄ±ndan Tam BaÄŸlantÄ± (Fully Connected) ve Ã‡Ä±ktÄ± (Output) denilen bÃ¶lÃ¼me\ngeÃ§ilir ve burada sÄ±nÄ±flandÄ±rma (classification) gerÃ§ekleÅŸtirilir.\nKonvolÃ¼syon, ortaklama ve tam baÄŸlantÄ± katmanlarÄ±na yakÄ±ndan\nbakalÄ±m.\nKonvolÃ¼syon: GÃ¶rselden belirli Ã¶zelliklerin Ã§Ä±karÄ±lmasÄ± konvolÃ¼syon\nkatmanÄ±nda olur. Bu katmanda, tÃ¼m gÃ¶rÃ¼ntÃ¼ye 2x2, 3x3, 5x5 gibi kÃ¼Ã§Ã¼k\nboyutlu filtrelerin uygulanmasÄ± yapÄ±lmaktadÄ±r. BÃ¶ylelikle gÃ¶rÃ¼ntÃ¼deki\ndaha ayÄ±rt edici Ã¶zellikler Ã§Ä±kartÄ±larak yeni bir gÃ¶rÃ¼ntÃ¼ elde edilir.\nAKPâ€™li bir milletvekili ile CHPâ€™li bir milletvekilini birbirinden ayÄ±ran\nÃ¶zelliklerin belirleneceÄŸi katman konvolÃ¼syon katmanÄ± olacaktÄ±r.\nBu bÃ¶lÃ¼mÃ¼ daha iyi anlayabilmek iÃ§in bilgisayarÄ±n bir resmi nasÄ±l\nokuduÄŸuna bakalÄ±m.\nTÃ¼m renkler Ã¼Ã§ renkten oluÅŸur: KÄ±rmÄ±zÄ±, YeÅŸil ve Mavi. Bunu RGB (Red,\nGreen, Blue) olarak kÄ±saltabiliriz. Bu uygulamada gÃ¶receÄŸimiz resimler\nrenklidir ve her biri RGBâ€™den oluÅŸuyor. AynÄ± zamanda renkli resimler 3\nkatmandan oluÅŸur da diyebiliriz.\n\n\n\nFigure 2: Image Credit: Diane Rohrer\n\n\n\nHer renk 0 ile 255 arasÄ±nda deÄŸer alÄ±r.\nRGB(255,0,0): KÄ±rmÄ±zÄ±\nRGB(0,255,0): YeÅŸil\nRGB(0,0,255): Mavi\nÃ–rnek olarak, RGB(87,51,100) ile oluÅŸturduÄŸum renk aÅŸaÄŸÄ±dadÄ±r.\n\n\n\nFigure 3: RGB(87,51,100)\n\n\n\nRâ€™da RGB renklerinin yoÄŸunluÄŸunu Ã¶rnek olarak seÃ§tiÄŸim bir tablo\nÃ¼zerinden aÅŸaÄŸÄ±daki gibi inceleyebiliriz.\n\n\n\nFigure 4: The Kiss, Gustav Klimt\n\n\n\n\n\nimg4 <- EBImage::readImage(\"img4.jpg\")\nEBImage::hist(img4)\n\n\n\n\n0â€™a yaklaÅŸtÄ±kÃ§a koyuluk; 1â€™e yaklaÅŸtÄ±kÃ§a aÃ§Ä±klÄ±k artar. Ã–rneÄŸin,\nRGB(0,0,0) siyah; RGB(255,255,255) beyazdÄ±r.\nBakalÄ±m tabloda hangi renkler kullanÄ±lmÄ±ÅŸ. BaÅŸta da Ã¶ÄŸrendiÄŸimiz\nÃ¼zere bu renkler RGBâ€™nin karÄ±ÅŸÄ±mÄ± ile oluÅŸur.\nAÅŸaÄŸÄ±daki resim 1200x1204x3 boyutundadÄ±r ki bu da 4,334,400 piksel\ndemektir.\n\n\nthekiss <- jpeg::readJPEG(\"img4.jpg\")\nm_thekiss <- RImagePalette::image_palette(thekiss, n = 20)\nscales::show_col(m_thekiss)\n\n\n\n\nKonumuzla pek alakalÄ± deÄŸil ama madem yukarÄ±daki Ã§Ä±ktÄ±yÄ± aldÄ±k,\nekstra bir bilgi vermek isterim. YukarÄ±da gÃ¶rÃ¼len #â€™li deÄŸerler\nHex/Hexadecimal (16 tabanlÄ± sayÄ± sistemi) kodudur ve RGBâ€™yi temsil\netmenin bir yoludur. Ã–rneÄŸin, RGB(255,0,0) kÄ±rmÄ±zÄ±dÄ±r. Bunu Hex kodu ile\n#FF0000 ÅŸeklinde gÃ¶steririz. Burada # sonrasÄ± 6 digit vardÄ±r. Ä°lk ikisi\nR, sonraki ikisi G ve kalan ikisi Bâ€™yi temsil eder. Peki, #FF0000 neden\nkÄ±rmÄ±zÄ±dÄ±r? Hex sisteminde deÄŸerler, 0â€™dan 9â€™a kadar bildiÄŸimiz rakamlar\nile; 10â€™dan 16â€™ya kadar da sÄ±rasÄ±yla A, B, C, D, E ve F ile temsil\nedilirler. O halde, FFâ€™i ÅŸÃ¶yle Ã§evirebiliriz:\n\\(15 * (16^0) + 15 * (16^1) = 15 + 240 =\n255\\) ki bu da \\(R = FF_{16} =\n255_{10}, G = 00_{16} = 0_{10}\\) ve \\(B\n= 00_{16} = 0_{10}\\)â€™dur.\nDevam edelim ve iÃ§inde bulunduÄŸumuz konvolÃ¼syon katmanÄ±nda\nhesaplamanÄ±n nasÄ±l yapÄ±ldÄ±ÄŸÄ±na bakalÄ±m.\n\n\n\nFigure 5: https://www.youtube.com/watch?v=1GUgD2SBl9A\n\n\n\nYukarÄ±da 5x5 boyutunda bir matris gÃ¶rÃ¼yoruz. Burada renkler matris\nÅŸeklinde verilmiÅŸ. SaÄŸda gÃ¶rÃ¼len 3x3â€™lÃ¼k matris ise filtre (Kernel). Bu\nfiltre soldaki matrisin Ã¼zerinde gezdirilir ve elde edilen deÄŸerler yeni\nmatrise yazdÄ±rÄ±lÄ±r.\n\n\n\n\\((-1x170) + (0x245) + (1x0) + (2x234) +\n(1x42) + (2x64) + (1x32) + (-2x53) + (0x128) = 394\\)\n\n\n\nYukarÄ±daki iÅŸlemi bir ya da birkaÃ§ adÄ±m kaydÄ±rarak devam ettiririz.\nBurada, kodun iÃ§erisinde de gÃ¶receÄŸimiz Strideâ€™Ä±n alacaÄŸÄ± deÄŸer\nbelirlenir. Stride ne kadar piksel kaydÄ±racaÄŸÄ±mÄ±zÄ± belirlediÄŸimiz\nparametredir. Stride 1 olursa aÅŸaÄŸÄ±daki gibi kaydÄ±rÄ±lÄ±r ve Kernel\niÅŸlemine devam edilir.\n\n\n\nGÃ¼nÃ¼n sonunda bu iÅŸlemler bittiÄŸinde 3x3â€™lÃ¼k bir Ã§Ä±ktÄ± matrisi\n(convolved feature) elde edilmiÅŸ olunur.\nPeki, renkli bir resim iÃ§in bu iÅŸlemler nasÄ±l yapÄ±lÄ±r?\nYukarÄ±daki iÅŸlem 2 defa daha olmak Ã¼zere toplamda 3 defa yapÄ±lÄ±r (RGB\nÃ¼Ã§ boyutludur) ve elde edilen deÄŸerler toplanarak Ã§Ä±ktÄ± matrisine\nyazÄ±lÄ±r.\nOrtaklama: BÃ¼yÃ¼k bir resmin piksel sayÄ±sÄ±nÄ±n azaltÄ±ldÄ±ÄŸÄ± iÅŸlem\nortaklama ile yapÄ±lÄ±r. Burada bir Max Pooling veya Average Pooling\niÅŸlemi tercih edilir. Bu iÅŸlem ile resmin Ã¶zellikleri kaybedilmeden\nboyut kÃ¼Ã§Ã¼ltmeye geÃ§ilir. AyrÄ±ca, ortaklama ile gÃ¶rÃ¼ntÃ¼deki gÃ¼rÃ¼ltÃ¼,\nyani gÃ¶rÃ¼ntÃ¼nÃ¼n sÄ±nÄ±flandÄ±rmaya katkÄ±da bulunmayan Ã¶ÄŸeleri de\nfiltrelenmiÅŸ olur. Uygulamada kullanacaÄŸÄ±mÄ±z fotoÄŸraflar gÃ¼rÃ¼ltÃ¼den uzak\nolacaktÄ±r.\n\n\n\nFigure 6: https://www.researchgate.net/figure/Max-pooling-and-average-pooling_fig5_343675998\n\n\n\nYukarÄ±da gÃ¶rÃ¼ldÃ¼ÄŸÃ¼ gibi burada da kaydÄ±rarak ya her penceredeki\nmaksimum deÄŸeri ya da ortalama deÄŸeri alarak boyut kÃ¼Ã§Ã¼ltmÃ¼ÅŸ\noluyoruz.\nKonvolÃ¼syon ve ortaklama aÅŸamalarÄ± istenildiÄŸi kadar tekrar\nettirilebilir.\nTam BaÄŸlantÄ±: Tam baÄŸlantÄ±ya kadar verilerimiz matris ÅŸeklinde gelir.\nTam baÄŸlantÄ± katmanÄ±na geÃ§meden Ã¶nce bir Flattening (dÃ¼zleÅŸtirme) iÅŸlemi\nyapÄ±lÄ±r. Bu katman sÄ±nÄ±flandÄ±rmada kullanÄ±lan standart sinir aÄŸlarÄ±ndan\noluÅŸur.\nDÃ¼zleÅŸtirme iÅŸlemini matristen vektÃ¶re dÃ¶nÃ¼ÅŸtÃ¼rmek gibi\ndÃ¼ÅŸÃ¼nebiliriz.\n\n\n\nFigure 7: https://towardsai.net/p/machine-learning/beginner-guides-to-convolutional-neural-network-from-scratch-kuzushiji-mnist-75f42c175b21\n\n\n\nÃ–ÄŸrendiklerimizi toparlamak adÄ±na ÅŸurada CNNâ€™i\naÃ§Ä±klayan Ã§ok gÃ¼zel bir sayfanÄ±n adresini verebilirim. Ã–rnek olarak\npizza resmini seÃ§tim. Buraya kadar Ã¶ÄŸrendiÄŸimiz tÃ¼m bilgiler aÅŸaÄŸÄ±daki\nresmin Ã¼zerinde yer almaktadÄ±r.\n\n\n\nFigure 8: https://poloclub.github.io/cnn-explainer/\n\n\n\nBu uygulamada Ã¼zerinde Ã§ok durmayacaÄŸÄ±z ama birazdan model\noluÅŸtururken Adam isimli bir optimizasyon algoritmasÄ± kullanacaÄŸÄ±z.\nSadece bunu neden yaptÄ±ÄŸÄ±mÄ±za bakalÄ±m. Derin Ã¶ÄŸrenmede, Ã¶ÄŸrenme\niÅŸleminin saÄŸlÄ±klÄ± bir sonuca ulaÅŸmasÄ± iÃ§in hata fonksiyonunun mutlak\nminimum deÄŸerinin bulunmasÄ± gerekir. Bu da optimizasyon yÃ¶ntemleri\nkullanÄ±larak gerÃ§ekleÅŸtiriliyor. HatayÄ± en kÃ¼Ã§Ã¼k yapmada (aÄŸÄ±n Ã¼rettiÄŸi\nÃ§Ä±kÄ±ÅŸ deÄŸeri ile gerÃ§ek deÄŸer arasÄ±ndaki farkÄ±n minimizasyonu)\nkullanÄ±lan yÃ¶ntemlere optimizasyon deniliyor. Yapay sinir aÄŸlarÄ±nda da\noptimizasyon iÃ§in en Ã§ok kullanÄ±lan yÃ¶ntemlerden biri Gradyan Ä°niÅŸiâ€™dir\n(Gradient Descent). Optimizasyon algoritmalarÄ±nda Ã¶ÄŸrenme katsayÄ±sÄ±nÄ±n\nayarlanmasÄ± modelin eÄŸitimi iÃ§in kritiktir. Biz burada Adamâ€™Ä±\nseÃ§eceÄŸiz.\nBunun dÄ±ÅŸÄ±nda yine Ã¼zerinde Ã§ok durmayacaÄŸÄ±mÄ±z ama bilgimizin\nolmasÄ±nda fayda olacak aktivasyon fonksiyonlarÄ±ndan bahsedelim.\nAktivasyon fonksiyonlarÄ±, bir katmanda bulunan nÃ¶ronlara ait Ã§Ä±ktÄ±\ndeÄŸerini sonraki katmanlara aktarÄ±rken kullanÄ±lÄ±r. Biz ReLU (Rectified\nLinear) ve Sigmoidâ€™i kullanacaÄŸÄ±z. ReLUâ€™da, giriÅŸ deÄŸeri sÄ±fÄ±rÄ±n altÄ±nda\niken Ã§Ä±ktÄ± sÄ±fÄ±rdÄ±r, ancak giriÅŸ deÄŸeri sÄ±fÄ±rÄ±n Ã¼zerinde ise Ã§Ä±kÄ±ÅŸ giriÅŸ\ndeÄŸerine eÅŸittir ve baÄŸÄ±mlÄ± deÄŸiÅŸkenle doÄŸrusal bir iliÅŸki oluÅŸmaktadÄ±r.\nSigmoid ise tanÄ±m kÃ¼mesindeki elemanlarÄ±n her biri iÃ§in 0-1 arasÄ±nda bir\ndeÄŸer Ã¼retir.\nCNNâ€™i anlatmak bu kadar basit deÄŸil tabiki de. Bu uygulama bir giriÅŸ\nniteliÄŸinde olsun istedim. Umuyorum baÅŸlangÄ±Ã§ iÃ§in yeterli olmuÅŸtur.\nUygulama bÃ¶lÃ¼mÃ¼ne geÃ§ebiliriz.\nBu Ã§alÄ±ÅŸmada, TBMMâ€™nin 27. dÃ¶nem milletvekillerine ait fotoÄŸraflarÄ±\nkullanacaÄŸÄ±z. Milletvekilleri sayÄ± nedeniyle AKP ve CHP ile\nsÄ±nÄ±rlandÄ±rÄ±lmÄ±ÅŸtÄ±r. Yani, Ã§alÄ±ÅŸmanÄ±n sonunda ikili bir sÄ±nÄ±flandÄ±rma\nyapmÄ±ÅŸ olacaÄŸÄ±z.\nVerilere, Ã§alÄ±ÅŸmanÄ±n sonunda paylaÅŸacaÄŸÄ±m kod ile ulaÅŸabileceÄŸiniz\ngibi GitHub\nhesabÄ±mdan post14 dosyasÄ±nÄ± indirerek de\nulaÅŸabilirsiniz.\nDetaylara geÃ§meden Ã¶nce fotoÄŸraflar ile ilgili bir not dÃ¼ÅŸmek\nistiyorum. Bu Ã§alÄ±ÅŸmada amacÄ±m sÃ¼reÃ§ boyunca sadece yÃ¼ze odaklanmak\noldu. Yani, fotoÄŸrafÄ±n geri kalanÄ± ile ilgilenmek istemedim. Evet, CNN\nde resimler arasÄ±ndaki farka odaklanÄ±r ve etiketlerin hangi Ã¶zellik ile\nÃ¶ne Ã§Ä±ktÄ±ÄŸÄ±nÄ± Ã¶ÄŸrenir ancak kiÅŸisel deneyimim beni validasyonda da\nbaÅŸarÄ±yÄ± arttÄ±racak bir yola yÃ¶nlendirdi. Bu Ã§alÄ±ÅŸmaya ilk baÅŸladÄ±ÄŸÄ±mda\nbir fotoÄŸrafÄ±n tamamÄ±nÄ± eÄŸitmeye Ã§alÄ±ÅŸtÄ±m ancak validasyon sÄ±rasÄ±nda\ndÃ¼ÅŸÃ¼k doÄŸrulama (accuracy) alÄ±yordum. Ã‡eÅŸitli denemelerden sonra tatmin\nedici sonuÃ§ alamayÄ±nca (ki bu sÃ¼rede PC de ciddi yoruluyor) yÃ¼zleri\nnasÄ±l kÄ±rparÄ±m sorusuna cevap bulmaya Ã§alÄ±ÅŸtÄ±m ve aÅŸaÄŸÄ±daki paketler ve\nkod yardÄ±mÄ± ile tÃ¼m yÃ¼zleri tespit ettirip yeni bir eÄŸitim ve test seti\nyarattÄ±m.\nKullanacaÄŸÄ±mÄ±z paket image.libfacedetection\nolacak. Bu paket, gÃ¶rÃ¼ntÃ¼lerdeki yÃ¼zleri algÄ±lamak iÃ§in Ã¶nceden\neÄŸitilmiÅŸ bir konvolÃ¼syonel sinir aÄŸÄ± imkanÄ± sunuyor.\n\n\nlibrary(magick)\nlibrary(image.libfacedetection)\n\n########## fotoÄŸraflarÄ±n isimlerinin aktarÄ±mÄ± ##########\n\nimg_face_akp <- list.files(\"tbmm/training/AKP/\", pattern = \"*.jpg\")\nimg_face_chp <- list.files(\"tbmm/training/CHP/\", pattern = \"*.jpg\")\nimg_face_train <- c(img_face_akp,img_face_chp)\nimg_face_test <- list.files(\"tbmm/test/\", pattern = \"*.jpg\")\n\n########## fotoÄŸraflarÄ±n okutulmasÄ± ##########\n\nimg_train_read <- list()\nfor(i in 1:length(img_face_train)){\n  \n  if(i <= length(img_face_akp)){\n    \n    img_train_read[[i]] <- image_read(paste0(\"tbmm/training/AKP/\",img_face_train[i]))\n    \n  } else {\n    \n    img_train_read[[i]] <- image_read(paste0(\"tbmm/training/CHP/\",img_face_train[i]))\n    \n  }\n  \n}\n\nimg_test_read <- list()\nfor(i in 1:length(img_face_test)){\n  \n  img_test_read[[i]] <- image_read(paste0(\"tbmm/test/\",img_face_test[i]))\n  \n}\n\n########## yÃ¼zlerin elde edilip kaydedilmesi ##########\n\n# training:\nfor(i in 1:length(img_train_read)) {\n  \n  # Hata veren fotoÄŸraf(lar) iÃ§in tryCatch() koyuldu\n  # HatalÄ± fotoÄŸraf(lar) otomatik olarak silinmiÅŸ olacak\n  \n  tryCatch(\n    expr = {\n      \n      face <- image_detect_faces(img_train_read[[i]])\n      \n      image_crop(\n        img_train_read[[i]],\n        geometry_area(\n          x = face$detections$x,\n          y = face$detections$y,\n          width = face$detections$width,\n          height = face$detections$height\n        )\n      ) -> imageCrop\n      \n      image_write(\n        imageCrop,\n        path = ifelse(i <= length(img_face_akp),\n                      paste0(\"tbmm/training/AKP_face_only/\", img_face_train[i]),\n                      paste0(\"tbmm/training/CHP_face_only/\", img_face_train[i])),\n        format = \"jpg\"\n      )\n      \n    },\n    \n    error = function(e) {\n      message(\"Caught an error!\",img_face_train[i])\n    }\n  )\n  \n}\n\n# test:\nfor(i in 1:length(img_test_read)) {\n  \n  tryCatch(\n    expr = {\n      \n      face <- image_detect_faces(img_test_read[[i]])\n      \n      image_crop(\n        img_test_read[[i]],\n        geometry_area(\n          x = face$detections$x,\n          y = face$detections$y,\n          width = face$detections$width,\n          height = face$detections$height\n        )\n      ) -> imageCrop\n      \n      image_write(\n        imageCrop,\n        path = paste0(\"tbmm/test/test_face_only/\", img_face_test[i]),\n        format = \"jpg\"\n      )\n      \n    },\n    \n    error = function(e) {\n      message(\"Caught an error!\",img_face_test[i])\n    }\n  )\n  \n}\n\n\n\nEÄŸitilecek veri setine ulaÅŸalÄ±m. EÄŸitim (train) veri setinin\niÃ§erisinde yer alan sÄ±nÄ±flarÄ± iki dosyaya ayÄ±rdÄ±m: AKP ve CHP.\n\n\nlibrary(keras)\nlibrary(tensorflow)\nlibrary(EBImage)\n\nimgs_akp <- list.files(\"tbmm/training/AKP_face_only/\")\nimgs_chp <- list.files(\"tbmm/training/CHP_face_only/\")\nimgs <- c(imgs_akp,imgs_chp)\n\n\n\nToplamda 418 adet fotoÄŸraf bulunmaktadÄ±r. Ancak eÄŸitilecek veri seti\ndengesiz verilerden (imbalanced data) oluÅŸmaktadÄ±r ki bu da bir\nproblemdir. AÅŸaÄŸÄ±da gÃ¶rÃ¼ldÃ¼ÄŸÃ¼ Ã¼zere AKP sÄ±nÄ±fÄ±ndan 284; CHP sÄ±nÄ±fÄ±ndan\n134 milletvekili bulunmaktadÄ±r.\n\n\nlength(grep(\"AKP\",imgs))\n\n\n[1] 284\n\nlength(grep(\"CHP\",imgs))\n\n\n[1] 134\n\nBurada, AKP daha fazla olduÄŸu iÃ§in AKPâ€™den 150 adet milletvekilini\nrandom bir ÅŸekilde kaldÄ±rabiliriz. SeÃ§tiÄŸimiz bu yÃ¶ntemin karÅŸÄ±lÄ±ÄŸÄ±\nUndersampling olarak geÃ§iyor. Kolay bir yÃ¶ntem olmasÄ±nÄ±n yanÄ±nda Ã¶nemli\nbilgileri kaybetmemize bÃ¼yÃ¼k olasÄ±lÄ±kla neden olacak da bir\nyÃ¶ntemdir.\n\n\nimgs_akp <- grep(\"AKP\",imgs, value = TRUE)\nimgs_chp <- grep(\"CHP\",imgs, value = TRUE)\n\nimgs_akp <- imgs_akp[sample(1:length(imgs_akp),length(imgs_chp))]\nremoved_akp <- imgs[!(imgs %in% c(imgs_akp,imgs_chp))]\nimgs <- imgs[imgs %in% c(imgs_akp,imgs_chp)]\n\n\n\nUndersampling ile iki kategoriye de 134 fotoÄŸraf vererek eÄŸitim\nsetini dengelemiÅŸ olduk.\nEÄŸitim setindeki dosyalarÄ±n iÃ§erisinde bulunan fotoÄŸraflara\nulaÅŸalÄ±m.\n\n\ntrain <- list()\nfor(i in 1:length(imgs)){\n  \n  if(i <= length(imgs_akp)){\n    \n    train[[i]] <- readImage(paste0(\"tbmm/training/AKP_face_only/\",imgs[i]))\n    \n  } else {\n    \n    train[[i]] <- readImage(paste0(\"tbmm/training/CHP_face_only/\",imgs[i]))\n    \n  }\n  \n}\n\n\n\nÅžimdi de test seti dosyasÄ±ndaki iki fotoÄŸrafÄ± alalÄ±m.\n\n\nimgs_test <- list.files(\"tbmm/test/test_face_only/\")\n\ntest <- list()\nfor(i in 1:length(imgs_test)){\n  \n  test[[i]] <- readImage(paste0(\"tbmm/test/test_face_only/\",imgs_test[i]))\n  \n}\n\n\n\nEÄŸitim setindeki fotoÄŸraflar birbirine yakÄ±n boyutlu olsalar da\nfarklÄ±lÄ±k bulunmaktadÄ±r. TÃ¼m fotoÄŸraflarÄ± aynÄ± boyutlu yapacaÄŸÄ±z. AynÄ±\nboyuta getirirken ÅŸuna dikkat etmeliyiz: Daha bÃ¼yÃ¼k boyutlar daha fazla\nÃ¶zelliÄŸe sahip olacaktÄ±r ancak daha bÃ¼yÃ¼k boyut aynÄ± zamanda eÄŸitim\naÅŸamasÄ±nda daha Ã§ok zaman alacaktÄ±r. Tam tersi, daha kÃ¼Ã§Ã¼k boyutta da\niÅŸimize yarayacak Ã¶zellikleri kaybetmiÅŸ olabiliriz. Bu noktada\nsanatÄ±mÄ±zÄ± konuÅŸturacaÄŸÄ±z. Ã–n bir inceleme ile 64x64 olabilir diye\ndÃ¼ÅŸÃ¼ndÃ¼m.\n\n\nfor(i in 1:length(imgs)){\n  \n  train[[i]] <- resize(train[[i]], 64, 64)\n  \n  if(i == length(imgs)){\n    \n    train <- combine(train)\n    \n  }\n  \n}\n\nstr(train)\n\n\nFormal class 'Image' [package \"EBImage\"] with 2 slots\n  ..@ .Data    : num [1:64, 1:64, 1:3, 1:268] 0.9191 0.9625 0.7857 0.4149 0.0428 ...\n  ..@ colormode: int 2\n  ..$ dim: int [1:4] 64 64 3 268\n\nEÄŸitim setindeki fotoÄŸraflarÄ± bir araya getirdik. Bu fotoÄŸraflar\n64x64x3 boyutunda ve 268 adet.\n\n\nfor(i in 1:length(imgs_test)){\n  \n  test[[i]] <- resize(test[[i]], 64, 64)\n  \n  if(i == length(imgs_test)){\n    \n    test <- combine(test)\n    \n  }\n  \n}\n\nstr(test)\n\n\nFormal class 'Image' [package \"EBImage\"] with 2 slots\n  ..@ .Data    : num [1:64, 1:64, 1:3, 1:2] 0.305 0.343 0.428 0.522 0.605 ...\n  ..@ colormode: int 2\n  ..$ dim: int [1:4] 64 64 3 2\n\nAynÄ± ÅŸekilde, test setindeki fotoÄŸraflarÄ± bir araya getirdik. Bu\nfotoÄŸraflar 64x64x3 boyutunda ve 2 adet.\nFakat yukarÄ±daki format model aÅŸamasÄ±nda Ã§alÄ±ÅŸmayacaktÄ±r. AÅŸaÄŸÄ±daki\ngibi yeniden sÄ±ralayÄ±p Ã§alÄ±ÅŸmasÄ±nÄ± saÄŸlayacaÄŸÄ±z.\n\n\ntrain <- aperm(train, c(4,1,2,3)) # 268, 64, 64, 3\ntest <- aperm(test, c(4,1,2,3)) # 2, 64, 64, 3\n\n\n\nEtiketleri belirleyelim.\n\n\ntrain_y <- c(\n  rep(0,length(imgs_akp)), # AKP: 0\n  rep(1,length(imgs_chp)) # CHP: 1\n)\n\ntest_y <- c(\n  0, # AKP\n  1 # CHP\n)\n\n\n\nKategorik deÄŸiÅŸkenleri ikili olarak temsil eden One Hot Encoding\nyapacaÄŸÄ±z.\n\n\ntrainLabels <- to_categorical(train_y)\ntestLabels <- to_categorical(test_y)\n\n\n\nÄ°lk kolonun AKPâ€™yi; ikinci kolonun CHPâ€™yi temsil ettiÄŸini\ngÃ¶rebiliriz.\n\n\nhead(trainLabels)\n\n\n     [,1] [,2]\n[1,]    1    0\n[2,]    1    0\n[3,]    1    0\n[4,]    1    0\n[5,]    1    0\n[6,]    1    0\n\ntail(trainLabels)\n\n\n       [,1] [,2]\n[263,]    0    1\n[264,]    0    1\n[265,]    0    1\n[266,]    0    1\n[267,]    0    1\n[268,]    0    1\n\nModel kurma aÅŸamasÄ±na geÃ§meden Ã¶nce Keras ve Tensorflowâ€™a\nbakalÄ±m.\nKeras, Python ile yazÄ±lmÄ±ÅŸ etkili bir Ã¼st dÃ¼zey sinir aÄŸÄ± APIâ€™dÄ±r.\nKeras kÃ¼tÃ¼phanesi CNTK, TensorFlow ve Theano Ã¼zerinde Ã§alÄ±ÅŸabilir.\nTensorFlow ise uÃ§tan uca aÃ§Ä±k kaynak bir derin Ã¶ÄŸrenme frameworkâ€™Ã¼dÃ¼r.\nYani, derin Ã¶ÄŸrenme iÃ§in geliÅŸtirilmiÅŸ aÃ§Ä±k kaynak bir matematik\nkÃ¼tÃ¼phanesidir.\nÅžimdi modele geÃ§ebiliriz.\n\n\nmodel <- keras_model_sequential(name = \"CNN\") %>%\n  layer_conv_2d(\n    filters = 8,\n    kernel_size = c(5, 5),\n    activation = \"relu\",\n    input_shape = c(64, 64, 3)\n  ) %>% # Convolution, ReLU\n  layer_max_pooling_2d(pool_size = c(3, 3)) %>% # Max Pooling\n  layer_flatten() %>% # Flattening\n  layer_dense(units = 16,\n              activation = \"relu\") %>% \n  layer_dense(units = 2,\n              activation = \"sigmoid\",\n              name = \"Output\") %>% \n  compile(\n    loss = \"binary_crossentropy\",\n    optimizer = optimizer_adam(), # Adam\n    metrics = \"accuracy\"\n  )\n\n\n\n\n\nhistory <- model %>% \n  fit(\n    train,\n    trainLabels,\n    epochs = 50,\n    batch_size = 64,\n    validation_split = 0.1\n  )\n\nplot(history)\n\n\n\n\nAÅŸaÄŸÄ±da hata matrisi (confusion matrix) oluÅŸturalÄ±m.\n\n\nlibrary(tidyverse)\n\ntrain_prob <- model %>% \n  predict(train) %>% \n  as.data.frame() %>% \n  rename(\"AKP\"=1,\"CHP\"=2) %>% \n  mutate(\"Actual\" = if_else(train_y == 0, \"AKP\", \"CHP\")) %>% \n  mutate(\"Pred\" = if_else(AKP > 0.5, \"AKP\", \"CHP\"))\n\ntbl1 <- table(Predicted = train_prob$Pred, Actual = train_prob$Actual)\ntbl1\n\n\n         Actual\nPredicted AKP CHP\n      AKP 124  31\n      CHP  10 103\n\nHata matrisine gÃ¶re 227 milletvekilinin partisini doÄŸru; 41\nmilletvekilinin partisini yanlÄ±ÅŸ tahmin etti. Buradan da DoÄŸruluk oranÄ±\n(Accuracy rate) 0.8470149 olur.\n\n\ntest_prob <- model %>% \n  predict(test) %>% \n  as.data.frame() %>% \n  rename(\"AKP\"=1,\"CHP\"=2) %>% \n  mutate(\"Actual\" = if_else(test_y == 0, \"AKP\", \"CHP\")) %>% \n  mutate(\"Pred\" = if_else(AKP > 0.5, \"AKP\", \"CHP\"))\n\ntbl2 <- table(Predicted = test_prob$Pred, Actual = test_prob$Actual)\ntbl2\n\n\n         Actual\nPredicted AKP CHP\n      AKP   1   0\n      CHP   0   1\n\nTest verilerini kullandÄ±ÄŸÄ±mÄ±zda karÅŸÄ±mÄ±za aÅŸaÄŸÄ±daki gibi bir sonuÃ§\nÃ§Ä±kmaktadÄ±r.\n\n\n\nErdoÄŸanâ€™Ä±n AKPâ€™li bir yÃ¼ze sahip olma olasÄ±lÄ±ÄŸÄ± 0.66 iken;\nKÄ±lÄ±Ã§daroÄŸluâ€™nun CHPâ€™li bir yÃ¼ze sahip olma olasÄ±lÄ±ÄŸÄ± 0.63\nBu uygulamanÄ±n ardÄ±ndan gÃ¼zel bir Shiny Web uygulamasÄ± yapÄ±p\npaylaÅŸmak isterdim ancak hem veri setinin yetersiz oluÅŸu hem de etik\nsebepler ile bÃ¶yle bir ÅŸeyi paylaÅŸmayÄ± uygun gÃ¶rmedim. Ã‡alÄ±ÅŸmaya konu\nveri setindeki fotoÄŸraflarÄ±n bugÃ¼n itibarÄ±yla hangi\netiketin/sÄ±nÄ±fÄ±n/kategorinin/partinin iÃ§inden olduÄŸu net bir ÅŸekilde\nbellidir ancak dÄ±ÅŸarÄ±dan uygulamaya girecek bir fotoÄŸraf iÃ§in bu tahmin\nÅŸu ÅŸartlarda riskli olabilir. Ã‡alÄ±ÅŸmanÄ±n eÄŸitim amaÃ§lÄ± paylaÅŸÄ±ldÄ±ÄŸÄ±nÄ± ve\nbu alanda neler yapÄ±labileceÄŸi konusunda fikir vermeyi amaÃ§ladÄ±ÄŸÄ±nÄ±\nbelirtmek isterim.\nÃ‡alÄ±ÅŸmanÄ±n diÄŸer R kodlarÄ±na aÅŸaÄŸÄ±dan ulaÅŸabilirsiniz.\n\n\n# Python entegrasyonu\n\nlibrary(reticulate)\nuse_python(\"C:/Users/.../Documents/.virtualenvs/myenv/Scripts/python.exe\")\n\n# Web kazÄ±ma ile verilerin elde edilmesi\n\nlibrary(rvest)\nlibrary(tidyverse)\n\nurlsList <- read_html(\"https://www.tbmm.gov.tr/Milletvekilleri/liste\") %>% \n  html_nodes(\"div.col-md-8 a\") %>% \n  html_attr(\"href\") %>% \n  as.data.frame() %>% \n  rename(\"urls\"=1) %>% \n  mutate(urls = paste0(\"https://www.tbmm.gov.tr\",urls))\n\npartyList <- read_html(\"https://www.tbmm.gov.tr/Milletvekilleri/liste\") %>% \n  html_nodes(\"div.col-md-4.text-right\") %>% \n  html_text() %>% \n  as.data.frame() %>% \n  rename(\"party\"=1) %>% \n  mutate(party = str_trim(party),\n         party = gsub(\"Ä°\",\"I\",party),\n         party = gsub(\"Äž\",\"G\",party))\n\nmaster <- cbind(urlsList,partyList) %>% \n  filter(party %in% c(\"AK Parti\",\"CHP\")) %>% \n  mutate(party = if_else(party == \"AK Parti\",\"AKP\",party))\n\nfor(i in 1:nrow(master)){\n  \n  img_mop <- read_html(master$urls[i]) %>% \n    html_nodes(\"img\") %>% \n    .[[3]] %>% \n    html_attr(\"src\")\n  \n  download.file(img_mop,\n                paste0(\"C:/.../\", # fotoÄŸraflarÄ±n ineceÄŸi yer\n                       master$party[i],\"_\",i,\".jpg\"), mode = \"wb\")\n  \n}\n\n# Test gÃ¶rselleÅŸtirme\n\ndf <- data.frame(\n  Test = c(\"Recep Tayyip ErdoÄŸan\", \"Kemal KÄ±lÄ±Ã§daroÄŸlu\"),\n  AKP = c(test_prob[1,1],test_prob[2,1]),\n  CHP = c(test_prob[1,2],test_prob[2,2]),\n  Img = c(\"https://pbs.twimg.com/profile_images/1151410974240444416/yVvaD7hU_400x400.jpg\",\n          \"https://pbs.twimg.com/profile_images/1446836678832922629/UB3uap87_400x400.jpg\")\n) %>% \n  pivot_longer(!c(Test,Img), names_to = \"Party\", values_to = \"Prob\")\n\nggplot(df, aes(x = Test, y = Prob, fill = Party)) +\n  geom_bar(stat = \"identity\", position = \"dodge\", alpha = .5) +\n  ggimage::geom_image(aes(image = Img), size = 0.15,\n                      position = position_dodge(width = 0.9)) +\n  scale_fill_manual(values = c(\"orange\",\"red\")) +\n  theme_minimal() +\n  theme(plot.title = element_text(face = \"bold\", hjust = 0.5),\n        legend.title = element_blank()) +\n  scale_y_continuous(limits = c(0,1)) +\n  labs(title = \"Ä°ki Politik Liderin YÃ¼zleri Hangi OlasÄ±lÄ±kla Hangi Partiye Ait?\",\n       y = \"OlasÄ±lÄ±k\", x = \"\")\n\n\n\n\n\n\n",
    "preview": "posts/2022-07-03-post14/post14_files/figure-html5/unnamed-chunk-30-1.png",
    "last_modified": "2022-07-03T17:50:12+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-06-19-post13/",
    "title": "Ã‡ok Kriterli Karar Verme YÃ¶ntemleri ile YaÅŸanacak Ä°l SeÃ§imi",
    "description": "YaÅŸam endeksi verileri ve TOPSIS yÃ¶ntemi kullanÄ±larak illerin sÄ±ralanmasÄ±.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-06-19",
    "categories": [
      "Decision Making"
    ],
    "contents": "\r\nYaÅŸayacaÄŸÄ±mÄ±z yere karar verme sÃ¼reci iÃ§erisinde olduÄŸumuzu ve bunu\r\nda Ã§ok kriterli karar verme yÃ¶ntemleri ile yapmak istediÄŸimizi\r\nvarsayalÄ±m. BÃ¶yle bir sÃ¼reÃ§ ve dÃ¼ÅŸÃ¼ncenin iÃ§inde en uygun kararÄ±\r\nverebilmek iÃ§in bir veri setine ihtiyacÄ±mÄ±z olacak. Bu veri setini\r\nTÃœÄ°Kâ€™ten alacaÄŸÄ±z. TÃœÄ°K, 2016 yÄ±lÄ±nda Ä°llerde\r\nYaÅŸam Endeksi, 2015 baÅŸlÄ±klÄ± bir Ã§alÄ±ÅŸma paylaÅŸmÄ±ÅŸtÄ± ve en yÃ¼ksek\r\nendeks deÄŸerini Isparta almÄ±ÅŸtÄ±. Ã‡alÄ±ÅŸmaya konu endeks, yaÅŸamÄ±n 11\r\nboyutunu 41 gÃ¶sterge ile temsil eden bir bileÅŸik endekstir.\r\nBiz karar verme sÃ¼recimizde bu 41 gÃ¶stergeyi kullanmak zorunda\r\ndeÄŸiliz. Hatta aÄŸÄ±rlÄ±klarÄ± da Ã¶nem derecemize gÃ¶re deÄŸiÅŸtirebiliriz.\r\nUygulamanÄ±n bundan sonraki kÄ±smÄ±nda subjektif deÄŸerlendirmelerim ile\r\ndevam edeceÄŸim iÃ§in sizler gÃ¶stergeleri ve aÄŸÄ±rlÄ±klarÄ±\r\ndeÄŸiÅŸtirebilirsiniz.\r\n11 boyut ve 41 gÃ¶sterge iÃ§erisinden seÃ§miÅŸ olduÄŸum boyut ve\r\ngÃ¶stergeler aÅŸaÄŸÄ±dadÄ±r. Listeye aynÄ± zamanda ilgili gÃ¶stergenin pozitif\r\nve negatif bilgisini ve ileride ihtiyacÄ±mÄ±z olacak aÄŸÄ±rlÄ±klarÄ±\r\n(toplamlarÄ± 1 olacak) da ekledim.\r\n(Konut, -) Konutun kalitesinde problem yaÅŸayanlarÄ±n oranÄ±,\r\n0.02\r\n(Ã‡alÄ±ÅŸma hayatÄ±, -) Ä°ÅŸsizlik oranÄ±, 0.03\r\n(SaÄŸlÄ±k, +) Kamunun saÄŸlÄ±k hizmetlerinden memnuniyet oranÄ±,\r\n0.05\r\n(EÄŸitim, +) Okul Ã¶ncesi eÄŸitimde (3-5 yaÅŸ) net okullaÅŸma oranÄ±,\r\n0.03\r\n(EÄŸitim, +) Kamunun eÄŸitim hizmetlerinden memnuniyet oranÄ±,\r\n0.04\r\n(Ã‡evre, -) PM10 istasyon deÄŸerleri ortalamasÄ± (hava kirliliÄŸi),\r\n0.09\r\n(Ã‡evre, +) Km2â€™ye dÃ¼ÅŸen orman alanÄ±, 0.09\r\n(Ã‡evre, -) Sokaktan gelen gÃ¼rÃ¼ltÃ¼ problemi yaÅŸayanlarÄ±n oranÄ±,\r\n0.07\r\n(Ã‡evre, +) Belediyenin temizlik hizmetlerinden memnuniyet oranÄ±,\r\n0.06\r\n(GÃ¼venlik, -) Cinayet oranÄ±, 0.05\r\n(GÃ¼venlik, +) Gece yalnÄ±z yÃ¼rÃ¼rken kendini gÃ¼vende hissedenlerin\r\noranÄ±, 0.08\r\n(GÃ¼venlik, +) Kamunun asayiÅŸ hizmetlerinden memnuniyet oranÄ±,\r\n0.05\r\n(AltyapÄ± hizmetlerine eriÅŸim, +) Ä°nternet abone sayÄ±sÄ± (yÃ¼z\r\nkiÅŸide), 0.02\r\n(AltyapÄ± hizmetlerine eriÅŸim, +) Kanalizasyon ve ÅŸebeke suyuna\r\neriÅŸim oranÄ±, 0.05\r\n(AltyapÄ± hizmetlerine eriÅŸim, +) HavalimanÄ±na eriÅŸim oranÄ±,\r\n0.03\r\n(AltyapÄ± hizmetlerine eriÅŸim, +) Belediyenin toplu taÅŸÄ±ma\r\nhizmetlerinden memnuniyet oranÄ±, 0.05\r\n(Sosyal yaÅŸam, +) Sinema ve tiyatro seyirci sayÄ±sÄ± (yÃ¼z kiÅŸide),\r\n0.06\r\n(Sosyal yaÅŸam, +) Bin kiÅŸi baÅŸÄ±na dÃ¼ÅŸen alÄ±ÅŸveriÅŸ merkezi alanÄ±,\r\n0.01\r\n(Sosyal yaÅŸam, +) Sosyal hayatÄ±ndan memnuniyet oranÄ±,\r\n0.06\r\n(YaÅŸam memnuniyeti, +) Mutluluk dÃ¼zeyi, 0.06\r\n11 boyutu 9â€™a, 41 gÃ¶stergeyi 20â€™ye dÃ¼ÅŸÃ¼rmÃ¼ÅŸ oldum. Verilere\r\n(post13.xls) GitHub\r\nhesabÄ±mdan ulaÅŸabilirsiniz. EÄŸer TÃœÄ°K Ã¼zerinden veri setine ulaÅŸmak\r\nisterseniz Gelir, YaÅŸam, TÃ¼ketim ve Yoksulluk kategorisine\r\ngirdikten sonra Ä°llerde YaÅŸam Endeksi alt kategorisini\r\nfiltreleyip Ä°statistiksel Tablolar bÃ¶lÃ¼mÃ¼nden indirebilirsiniz.\r\nHedef dosya: Ä°llerde YaÅŸam Endeksi GÃ¶sterge DeÄŸerleridir.\r\nAÅŸaÄŸÄ±da Ã¶rnek olmasÄ± aÃ§Ä±sÄ±ndan Ä°stanbul ve MuÄŸlaâ€™ya ait gÃ¶sterge\r\ndeÄŸerleri verilmiÅŸtir.\r\n\r\n\r\nindicators\r\n\r\n\r\nÄ°stanbul\r\n\r\n\r\nMuÄŸla\r\n\r\n\r\nkonut_kalite\r\n\r\n\r\n15.95000\r\n\r\n\r\n17.56500\r\n\r\n\r\nissizlik\r\n\r\n\r\n11.20000\r\n\r\n\r\n7.30000\r\n\r\n\r\nsaglik_hizmet\r\n\r\n\r\n67.43000\r\n\r\n\r\n71.48000\r\n\r\n\r\nokul_oncesi\r\n\r\n\r\n27.51277\r\n\r\n\r\n38.33912\r\n\r\n\r\negitim_hizmet\r\n\r\n\r\n61.59000\r\n\r\n\r\n66.79000\r\n\r\n\r\npm10_istasyon\r\n\r\n\r\n54.80000\r\n\r\n\r\n81.00000\r\n\r\n\r\norman_alan\r\n\r\n\r\n43.99341\r\n\r\n\r\n66.48696\r\n\r\n\r\nsokak_gurultu\r\n\r\n\r\n33.75000\r\n\r\n\r\n17.19000\r\n\r\n\r\ntemizlik_hizmet\r\n\r\n\r\n80.69000\r\n\r\n\r\n70.08000\r\n\r\n\r\ncinayet_oran\r\n\r\n\r\n22.53597\r\n\r\n\r\n52.54279\r\n\r\n\r\ngece_yalniz\r\n\r\n\r\n45.10000\r\n\r\n\r\n63.82000\r\n\r\n\r\nasayis_hizmet\r\n\r\n\r\n68.51000\r\n\r\n\r\n79.77000\r\n\r\n\r\ninternet_abone\r\n\r\n\r\n17.62955\r\n\r\n\r\n14.49276\r\n\r\n\r\nkanalizasyon_sebeke\r\n\r\n\r\n100.00000\r\n\r\n\r\n83.00000\r\n\r\n\r\nhavalimani_erisim\r\n\r\n\r\n9874.83432\r\n\r\n\r\n318.22520\r\n\r\n\r\ntoplu_tasima_hizmet\r\n\r\n\r\n69.89000\r\n\r\n\r\n53.33000\r\n\r\n\r\nsinema_tiyatro\r\n\r\n\r\n147.44083\r\n\r\n\r\n56.06305\r\n\r\n\r\navm_alani\r\n\r\n\r\n277.27405\r\n\r\n\r\n175.16313\r\n\r\n\r\nsosyal_hayat\r\n\r\n\r\n51.41000\r\n\r\n\r\n52.05000\r\n\r\n\r\nmutluluk\r\n\r\n\r\n58.40000\r\n\r\n\r\n52.40000\r\n\r\n\r\nTechnique for Order Preference by Similarity to Ideal Solutionâ€™Ä±n\r\nkÄ±saltmasÄ± ve Ã§ok kriterli karar verme yÃ¶ntemlerinden biri olan TOPSIS,\r\nÄ°deal Ã‡Ã¶zÃ¼me DayalÄ± SÄ±ralama TekniÄŸi olarak Ã§evrilebilir. TOPSISâ€™in\r\ngizemli mantÄ±ÄŸÄ±, seÃ§ilen alternatifin en iyi Ã§Ã¶zÃ¼mden en kÄ±sa geometrik\r\nuzaklÄ±ÄŸa ve en kÃ¶tÃ¼ Ã§Ã¶zÃ¼mden en uzun geometrik uzaklÄ±ÄŸa sahip olmasÄ±\r\ngerektiÄŸi kavramÄ±na dayanmaktadÄ±r.\r\nTOPSIS yÃ¶nteminin hem adÄ±mlarÄ±na bakalÄ±m hem de bu adÄ±mlarÄ±\r\nuygulayalÄ±m.\r\nAdÄ±m 0) Veri seti: 81 ilin 9 boyut ve 20 gÃ¶stergede deÄŸerleri\r\n\r\n\r\nlibrary(readxl)\r\nlibrary(tidyverse)\r\n\r\nendeks <- read_excel(\"yasam_endeksi.xls\")\r\n\r\n\r\n\r\nAdÄ±m 1) Karar matrisinin yaratÄ±lmasÄ±\r\nKarar matrisinin satÄ±rlarÄ± alternatiflerden (iller), sÃ¼tunlarÄ±\r\nkriterlerden (gÃ¶stergeler) oluÅŸmaktadÄ±r.\r\nAlternatifler M, kriterler N olsun. Karar matrisi:\r\n\\((a_{ij})_{MxN}\\)\r\n\r\n\r\nil <- endeks$il # kullanmak iÃ§in il sÃ¼tunu ayrÄ±ldÄ±\r\nm <- as.matrix(endeks[,-1]) # matris oluÅŸturuldu\r\n\r\n\r\n\r\nAdÄ±m 2) Karar Matrisinin Normalize Edilmesi\r\n\\(a_{ij} =\r\n\\frac{a_{ij}}{\\sqrt{\\sum_{i=1}^{M}(a_{ij}^2)}}\\)\r\n\r\n\r\nm_denominator <- apply(m, 2, function(x) sqrt(sum(x**2))) # payda burada hesaplandÄ±\r\nm2 <- m # m matrisi haricinde ikinci bir matris oluÅŸturuldu\r\n\r\nfor(col in 1:ncol(m2)){\r\n  \r\n  for(row in 1:nrow(m2)){\r\n    \r\n    m2[row,col] <- m2[row,col] / m_denominator[col]\r\n    \r\n  }\r\n  \r\n}\r\n\r\n\r\n\r\nÃ–rnek: konut_kalite sÃ¼tunundaki ilk deÄŸer 22.73â€™tÃ¼r. 22.73â€™Ã¼ ilgili\r\nsÃ¼tunda yer alan deÄŸerlerin karelerinin toplamÄ±nÄ±n karekÃ¶kÃ¼ne bÃ¶lÃ¼yoruz.\r\nBu deÄŸer ise 203.314â€™tÃ¼r. SonuÃ§ olarak 22.73/203.314 =\r\n0.1117975â€™tir.\r\nAdÄ±m 3) AÄŸÄ±rlÄ±klÄ± NormalleÅŸtirilmiÅŸ Karar Matrisinin\r\nOluÅŸturulmasÄ±\r\n\\(x_{ij} = a_{ij} * w_j\\)\r\n\\(w_j =\r\n\\frac{w_j}{\\sum_{j=1}^{N}w_j}\\)\r\n\\(\\sum_{j=1}^{N}w_j = 1\\)\r\nGÃ¶stergelere iliÅŸkin aÄŸÄ±rlÄ±k deÄŸerlerini toplamÄ± 1 olacak ÅŸekilde\r\nbelirleyelim. EÅŸit aÄŸÄ±rlÄ±klandÄ±rma yapsak 1/20 = 0.05 oluyor. Hepsine\r\n0.05 atadÄ±m ve aralarÄ±ndaki karÅŸÄ±laÅŸtÄ±rmaya gÃ¶re birini artÄ±rÄ±p diÄŸerini\r\nazalttÄ±m.\r\n\r\n\r\nmyWeights <- data.frame(\r\n  Indicator = names(endeks[,-1]),\r\n  Weight = c(0.02,0.03,0.05,0.03,0.04,0.09,0.09,0.07,0.06,0.05,\r\n             0.08,0.05,0.02,0.05,0.03,0.05,0.06,0.01,0.06,0.06)\r\n)\r\n\r\n\r\n\r\n\r\n\r\nIndicator\r\n\r\n\r\nWeight\r\n\r\n\r\nkonut_kalite\r\n\r\n\r\n0.02\r\n\r\n\r\nissizlik\r\n\r\n\r\n0.03\r\n\r\n\r\nsaglik_hizmet\r\n\r\n\r\n0.05\r\n\r\n\r\nokul_oncesi\r\n\r\n\r\n0.03\r\n\r\n\r\negitim_hizmet\r\n\r\n\r\n0.04\r\n\r\n\r\npm10_istasyon\r\n\r\n\r\n0.09\r\n\r\n\r\norman_alan\r\n\r\n\r\n0.09\r\n\r\n\r\nsokak_gurultu\r\n\r\n\r\n0.07\r\n\r\n\r\ntemizlik_hizmet\r\n\r\n\r\n0.06\r\n\r\n\r\ncinayet_oran\r\n\r\n\r\n0.05\r\n\r\n\r\ngece_yalniz\r\n\r\n\r\n0.08\r\n\r\n\r\nasayis_hizmet\r\n\r\n\r\n0.05\r\n\r\n\r\ninternet_abone\r\n\r\n\r\n0.02\r\n\r\n\r\nkanalizasyon_sebeke\r\n\r\n\r\n0.05\r\n\r\n\r\nhavalimani_erisim\r\n\r\n\r\n0.03\r\n\r\n\r\ntoplu_tasima_hizmet\r\n\r\n\r\n0.05\r\n\r\n\r\nsinema_tiyatro\r\n\r\n\r\n0.06\r\n\r\n\r\navm_alani\r\n\r\n\r\n0.01\r\n\r\n\r\nsosyal_hayat\r\n\r\n\r\n0.06\r\n\r\n\r\nmutluluk\r\n\r\n\r\n0.06\r\n\r\n\r\nÅžimdi her bir aÄŸÄ±rlÄ±ÄŸÄ± o gÃ¶stergeye ait sÃ¼tunda yer alan deÄŸerler ile\r\nÃ§arpacaÄŸÄ±z. BÃ¶ylece AÄŸÄ±rlÄ±klÄ± NormalleÅŸtirilmiÅŸ Karar Matrisi\r\noluÅŸacak.\r\n\r\n\r\nfor(col in 1:ncol(m2)){\r\n  \r\n  for(row in 1:nrow(m2)){\r\n    \r\n    m2[row,col] <- m2[row,col] * myWeights$Weight[col]\r\n    \r\n  }\r\n  \r\n}\r\n\r\n\r\n\r\nAdÄ±m 4) En Ä°yi ve En KÃ¶tÃ¼ Alternatifin Belirlenmesi\r\nTÃ¼m iller arasÄ±ndan her bir gÃ¶stergenin maksimum ve minimum deÄŸeri\r\nbulunur.\r\n\\(x_j^b = max_{i=1}^{M} x_{ij}\\)\r\n\\(x_j^w = min_{i=1}^{M} x_{ij}\\)\r\nAÄŸÄ±rlÄ±klÄ± NormalleÅŸtirilmiÅŸ Karar Matrisiâ€™nde her bir gÃ¶stergenin\r\nilgili sÃ¼tunundan pozitif ideal Ã§Ã¶zÃ¼m iÃ§in en bÃ¼yÃ¼k deÄŸer, negatif ideal\r\nÃ§Ã¶zÃ¼m iÃ§in ise en kÃ¼Ã§Ã¼k deÄŸer seÃ§ilmiÅŸtir. Dikkat etmemiz gereken nokta,\r\npozitif ideal Ã§Ã¶zÃ¼m iÃ§in eÄŸer gÃ¶sterge pozitif ise maksimum; negatif ise\r\nminimum deÄŸer; negatif ideal Ã§Ã¶zÃ¼m iÃ§in eÄŸer gÃ¶sterge pozitif ise\r\nminimum; negatif ise maksimum deÄŸer seÃ§ilir.\r\n\r\n\r\n# pos: positive\r\n# neg: negative\r\n\r\nmyDirections <- data.frame(\r\n  Indicator = names(endeks[,-1]),\r\n  Direction = c(\"neg\",\"neg\",\"pos\",\"pos\",\r\n                \"pos\",\"neg\",\"pos\",\"neg\",\r\n                \"pos\",\"neg\",\"pos\",\"pos\",\r\n                \"pos\",\"pos\",\"pos\",\"pos\",\r\n                \"pos\",\"pos\",\"pos\",\"pos\")\r\n)\r\n\r\n\r\n\r\n\r\n\r\nIndicator\r\n\r\n\r\nDirection\r\n\r\n\r\nkonut_kalite\r\n\r\n\r\nneg\r\n\r\n\r\nissizlik\r\n\r\n\r\nneg\r\n\r\n\r\nsaglik_hizmet\r\n\r\n\r\npos\r\n\r\n\r\nokul_oncesi\r\n\r\n\r\npos\r\n\r\n\r\negitim_hizmet\r\n\r\n\r\npos\r\n\r\n\r\npm10_istasyon\r\n\r\n\r\nneg\r\n\r\n\r\norman_alan\r\n\r\n\r\npos\r\n\r\n\r\nsokak_gurultu\r\n\r\n\r\nneg\r\n\r\n\r\ntemizlik_hizmet\r\n\r\n\r\npos\r\n\r\n\r\ncinayet_oran\r\n\r\n\r\nneg\r\n\r\n\r\ngece_yalniz\r\n\r\n\r\npos\r\n\r\n\r\nasayis_hizmet\r\n\r\n\r\npos\r\n\r\n\r\ninternet_abone\r\n\r\n\r\npos\r\n\r\n\r\nkanalizasyon_sebeke\r\n\r\n\r\npos\r\n\r\n\r\nhavalimani_erisim\r\n\r\n\r\npos\r\n\r\n\r\ntoplu_tasima_hizmet\r\n\r\n\r\npos\r\n\r\n\r\nsinema_tiyatro\r\n\r\n\r\npos\r\n\r\n\r\navm_alani\r\n\r\n\r\npos\r\n\r\n\r\nsosyal_hayat\r\n\r\n\r\npos\r\n\r\n\r\nmutluluk\r\n\r\n\r\npos\r\n\r\n\r\n\r\n\r\npos_ideal <- numeric()\r\nneg_ideal <- numeric()\r\ncriteria <- colnames(m2)\r\n\r\nfor(col in 1:ncol(m2)){\r\n  \r\n  # pozitif taraf iÃ§in;\r\n  \r\n  p_name <- criteria[col]\r\n  p_filter <- myDirections %>% \r\n    filter(Indicator == p_name) %>% \r\n    pull(Direction)\r\n  \r\n  p_ideal <- if_else(p_filter == \"pos\", max(m2[,col]), min(m2[,col]))\r\n  pos_ideal <- c(pos_ideal,p_ideal)\r\n  \r\n  # negatif taraf iÃ§in;\r\n  \r\n  n_name <- criteria[col]\r\n  n_filter <- myDirections %>% \r\n    filter(Indicator == n_name) %>% \r\n    pull(Direction)\r\n  \r\n  n_ideal <- if_else(n_filter == \"neg\", max(m2[,col]), min(m2[,col]))\r\n  neg_ideal <- c(neg_ideal,n_ideal)\r\n  \r\n}\r\n\r\npos_neg_ideal <- data.frame(\r\n  \"Indicator\" = myDirections$Indicator,\r\n  \"PositiveIdeal\" = pos_ideal,\r\n  \"NegativeIdeal\" = neg_ideal\r\n)\r\n\r\n\r\n\r\n\r\n\r\nIndicator\r\n\r\n\r\nPositiveIdeal\r\n\r\n\r\nNegativeIdeal\r\n\r\n\r\nkonut_kalite\r\n\r\n\r\n0.0009227\r\n\r\n\r\n0.0043996\r\n\r\n\r\nissizlik\r\n\r\n\r\n0.0014571\r\n\r\n\r\n0.0081181\r\n\r\n\r\nsaglik_hizmet\r\n\r\n\r\n0.0063640\r\n\r\n\r\n0.0038950\r\n\r\n\r\nokul_oncesi\r\n\r\n\r\n0.0049470\r\n\r\n\r\n0.0021901\r\n\r\n\r\negitim_hizmet\r\n\r\n\r\n0.0052983\r\n\r\n\r\n0.0028718\r\n\r\n\r\npm10_istasyon\r\n\r\n\r\n0.0030563\r\n\r\n\r\n0.0191867\r\n\r\n\r\norman_alan\r\n\r\n\r\n0.0192523\r\n\r\n\r\n0.0000121\r\n\r\n\r\nsokak_gurultu\r\n\r\n\r\n0.0029607\r\n\r\n\r\n0.0157113\r\n\r\n\r\ntemizlik_hizmet\r\n\r\n\r\n0.0089772\r\n\r\n\r\n0.0031494\r\n\r\n\r\ncinayet_oran\r\n\r\n\r\n0.0008939\r\n\r\n\r\n0.0138624\r\n\r\n\r\ngece_yalniz\r\n\r\n\r\n0.0113660\r\n\r\n\r\n0.0058765\r\n\r\n\r\nasayis_hizmet\r\n\r\n\r\n0.0062340\r\n\r\n\r\n0.0038695\r\n\r\n\r\ninternet_abone\r\n\r\n\r\n0.0041353\r\n\r\n\r\n0.0005065\r\n\r\n\r\nkanalizasyon_sebeke\r\n\r\n\r\n0.0073085\r\n\r\n\r\n0.0022736\r\n\r\n\r\nhavalimani_erisim\r\n\r\n\r\n0.0193698\r\n\r\n\r\n0.0000000\r\n\r\n\r\ntoplu_tasima_hizmet\r\n\r\n\r\n0.0073563\r\n\r\n\r\n0.0021898\r\n\r\n\r\nsinema_tiyatro\r\n\r\n\r\n0.0173789\r\n\r\n\r\n0.0000338\r\n\r\n\r\navm_alani\r\n\r\n\r\n0.0032476\r\n\r\n\r\n0.0000000\r\n\r\n\r\nsosyal_hayat\r\n\r\n\r\n0.0097283\r\n\r\n\r\n0.0025860\r\n\r\n\r\nmutluluk\r\n\r\n\r\n0.0084035\r\n\r\n\r\n0.0045426\r\n\r\n\r\nAdÄ±m 5) Ã–klid UzaklÄ±ÄŸÄ±n HesaplanmasÄ±\r\nHedef alternatif ile en iyi ve en kÃ¶tÃ¼ alternatif arasÄ±ndaki Ã–klid\r\nuzaklÄ±ÄŸÄ± hesaplanÄ±r.\r\n\\(d_i^b =\r\n\\sqrt{\\sum_{j=1}^{N}(x_{ij}-x_j^b)^2}\\)\r\n\\(d_i^w =\r\n\\sqrt{\\sum_{j=1}^{N}(x_{ij}-x_j^w)^2}\\)\r\n\r\n\r\nb_euclidean <- m2\r\nw_euclidean <- m2\r\n\r\nfor(row in 1:nrow(m2)){\r\n  \r\n  for(col in 1:ncol(m2)){\r\n    \r\n    b_euclidean[row, col] <- (b_euclidean[row, col] - pos_neg_ideal$PositiveIdeal[col]) ** 2\r\n    w_euclidean[row, col] <- (w_euclidean[row, col] - pos_neg_ideal$NegativeIdeal[col]) ** 2\r\n    \r\n  }\r\n  \r\n}\r\n\r\nb_euclidean <- sqrt(rowSums(b_euclidean))\r\nw_euclidean <- sqrt(rowSums(w_euclidean))\r\n\r\ndf_euclidean <- data.frame(\r\n  prov_num = seq(1,length(il),1),\r\n  b_euclidean = b_euclidean,\r\n  w_euclidean = w_euclidean\r\n)\r\n\r\n\r\n\r\n\r\n\r\nprov_num\r\n\r\n\r\nb_euclidean\r\n\r\n\r\nw_euclidean\r\n\r\n\r\n1\r\n\r\n\r\n0.0201152\r\n\r\n\r\n0.0259480\r\n\r\n\r\n2\r\n\r\n\r\n0.0322445\r\n\r\n\r\n0.0180609\r\n\r\n\r\n3\r\n\r\n\r\n0.0303864\r\n\r\n\r\n0.0221779\r\n\r\n\r\n4\r\n\r\n\r\n0.0345631\r\n\r\n\r\n0.0185534\r\n\r\n\r\n5\r\n\r\n\r\n0.0271004\r\n\r\n\r\n0.0257582\r\n\r\n\r\n6\r\n\r\n\r\n0.0254241\r\n\r\n\r\n0.0239853\r\n\r\n\r\n7\r\n\r\n\r\n0.0217484\r\n\r\n\r\n0.0258145\r\n\r\n\r\n8\r\n\r\n\r\n0.0251323\r\n\r\n\r\n0.0285319\r\n\r\n\r\n9\r\n\r\n\r\n0.0257707\r\n\r\n\r\n0.0221523\r\n\r\n\r\n10\r\n\r\n\r\n0.0247963\r\n\r\n\r\n0.0254779\r\n\r\n\r\nAdÄ±m 6) TOPSIS Skorunun Elde Edilmesi\r\nHer alternatif iÃ§in en kÃ¶tÃ¼ alternatife olan benzerliÄŸinin\r\nhesaplandÄ±ÄŸÄ± adÄ±mdÄ±r. Burada, TOPSIS skoru elde edilir.\r\n\\(s_i = \\frac{d_i^w}{d_i^w +\r\nd_i^b}\\)\r\n\r\n\r\ntopsis_score <- df_euclidean %>% \r\n  mutate(\r\n    score = w_euclidean / (w_euclidean + b_euclidean),\r\n    province = il\r\n  ) %>% \r\n  arrange(desc(score)) %>% \r\n  mutate(rank = seq(1,nrow(.),1))\r\n\r\n\r\n\r\n\r\n\r\nprov_num\r\n\r\n\r\nb_euclidean\r\n\r\n\r\nw_euclidean\r\n\r\n\r\nscore\r\n\r\n\r\nprovince\r\n\r\n\r\nrank\r\n\r\n\r\n34\r\n\r\n\r\n0.0182616\r\n\r\n\r\n0.0338457\r\n\r\n\r\n0.6495390\r\n\r\n\r\nÄ°stanbul\r\n\r\n\r\n1\r\n\r\n\r\n77\r\n\r\n\r\n0.0181110\r\n\r\n\r\n0.0305289\r\n\r\n\r\n0.6276518\r\n\r\n\r\nYalova\r\n\r\n\r\n2\r\n\r\n\r\n61\r\n\r\n\r\n0.0194185\r\n\r\n\r\n0.0269682\r\n\r\n\r\n0.5813780\r\n\r\n\r\nTrabzon\r\n\r\n\r\n3\r\n\r\n\r\n1\r\n\r\n\r\n0.0201152\r\n\r\n\r\n0.0259480\r\n\r\n\r\n0.5633130\r\n\r\n\r\nAdana\r\n\r\n\r\n4\r\n\r\n\r\n78\r\n\r\n\r\n0.0234771\r\n\r\n\r\n0.0301615\r\n\r\n\r\n0.5623088\r\n\r\n\r\nKarabÃ¼k\r\n\r\n\r\n5\r\n\r\n\r\n35\r\n\r\n\r\n0.0204943\r\n\r\n\r\n0.0258802\r\n\r\n\r\n0.5580705\r\n\r\n\r\nÄ°zmir\r\n\r\n\r\n6\r\n\r\n\r\n17\r\n\r\n\r\n0.0225074\r\n\r\n\r\n0.0270572\r\n\r\n\r\n0.5458984\r\n\r\n\r\nÃ‡anakkale\r\n\r\n\r\n7\r\n\r\n\r\n7\r\n\r\n\r\n0.0217484\r\n\r\n\r\n0.0258145\r\n\r\n\r\n0.5427442\r\n\r\n\r\nAntalya\r\n\r\n\r\n8\r\n\r\n\r\n37\r\n\r\n\r\n0.0254867\r\n\r\n\r\n0.0293201\r\n\r\n\r\n0.5349719\r\n\r\n\r\nKastamonu\r\n\r\n\r\n9\r\n\r\n\r\n8\r\n\r\n\r\n0.0251323\r\n\r\n\r\n0.0285319\r\n\r\n\r\n0.5316751\r\n\r\n\r\nArtvin\r\n\r\n\r\n10\r\n\r\n\r\nAdÄ±m 7) TOPSIS Skorunun BÃ¼yÃ¼kten KÃ¼Ã§Ã¼ÄŸe DoÄŸru SÄ±ralanmasÄ±\r\nAÅŸaÄŸÄ±da ilk 10 il gÃ¶sterilmiÅŸtir.\r\n\r\n\r\ntopsis_score_desc <- topsis_score %>% \r\n  select(province,score,rank)\r\n\r\n\r\n\r\n\r\n\r\nprovince\r\n\r\n\r\nscore\r\n\r\n\r\nrank\r\n\r\n\r\nÄ°stanbul\r\n\r\n\r\n0.6495390\r\n\r\n\r\n1\r\n\r\n\r\nYalova\r\n\r\n\r\n0.6276518\r\n\r\n\r\n2\r\n\r\n\r\nTrabzon\r\n\r\n\r\n0.5813780\r\n\r\n\r\n3\r\n\r\n\r\nAdana\r\n\r\n\r\n0.5633130\r\n\r\n\r\n4\r\n\r\n\r\nKarabÃ¼k\r\n\r\n\r\n0.5623088\r\n\r\n\r\n5\r\n\r\n\r\nÄ°zmir\r\n\r\n\r\n0.5580705\r\n\r\n\r\n6\r\n\r\n\r\nÃ‡anakkale\r\n\r\n\r\n0.5458984\r\n\r\n\r\n7\r\n\r\n\r\nAntalya\r\n\r\n\r\n0.5427442\r\n\r\n\r\n8\r\n\r\n\r\nKastamonu\r\n\r\n\r\n0.5349719\r\n\r\n\r\n9\r\n\r\n\r\nArtvin\r\n\r\n\r\n0.5316751\r\n\r\n\r\n10\r\n\r\n\r\nBirinci sÄ±rada yaÅŸadÄ±ÄŸÄ±m il olan Ä°stanbul Ã§Ä±ktÄ±. TÃœÄ°Kâ€™in endeksinde\r\nbirinci olan Isparta ise bu veri setine ve aÄŸÄ±rlÄ±klandÄ±rmalarÄ±ma gÃ¶re\r\nyaÅŸayacaÄŸÄ±m iller arasÄ±nda 16. olmuÅŸtur.\r\nSon olarak, topsis paketi ile aÅŸaÄŸÄ±daki gibi Ã§ok kÄ±sa bir\r\nsÃ¼re iÃ§erisinde sonuÃ§lar elde edilebilir.\r\n\r\n\r\nlibrary(topsis)\r\n\r\nm <- as.matrix(endeks[,-1]) # matris\r\nw <- myWeights$Weight # aÄŸÄ±rlÄ±klar\r\ni <- myDirections %>% \r\n  mutate(Direction = ifelse(Direction == \"neg\", \"-\", \"+\")) %>% \r\n  pull(Direction) # yÃ¶nler\r\n\r\ndf <- topsis(m,w,i) %>% \r\n  mutate(province = il) %>% \r\n  arrange(desc(score))\r\n\r\n\r\n\r\n\r\n\r\nggplot(df %>% arrange(desc(score)) %>% slice(1:10),\r\n       aes(x = reorder(province,score), y = score, fill = score)) +\r\n  geom_col() +\r\n  coord_flip() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank()) +\r\n  scale_fill_gradient(low = \"orange\", high = \"blue\")\r\n\r\n\r\n\r\n\r\nYararlandÄ±ÄŸÄ±m Kaynaklar:\r\nWhat\r\nis TOPSIS?\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-06-19-post13/post13_files/figure-html5/unnamed-chunk-19-1.png",
    "last_modified": "2022-06-19T22:47:08+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-06-12-post12/",
    "title": "Haber PaylaÅŸÄ±mÄ± Yapan Twitter HesaplarÄ±nÄ±n BenzerliÄŸi",
    "description": "Haber paylaÅŸÄ±mÄ± yapan Twitter hesaplarÄ±nÄ±n kosinÃ¼s benzerliÄŸi ile Ã¶lÃ§Ã¼lmesi.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-06-12",
    "categories": [
      "Machine Learning",
      "Text",
      "Social Media"
    ],
    "contents": "\r\nUygulama iÃ§in belirlemiÅŸ olduÄŸum haber paylaÅŸÄ±mÄ± yapan 25 adet\r\nTwitter hesabÄ±nÄ±n benzerlik sonuÃ§larÄ± aÅŸaÄŸÄ±daki gibidir.\r\n\r\n\r\n\r\nTwitter hesaplarÄ±nÄ±n benzerliÄŸini Ã¶lÃ§mek iÃ§in atÄ±lan tweetleri ve\r\nyÃ¶ntem olarak da kosinÃ¼s benzerliÄŸini kullandÄ±m.\r\nKosinÃ¼s BenzerliÄŸi\r\nKosinÃ¼s benzerliÄŸi, metinler arasÄ±ndaki vektÃ¶rel uzaklÄ±ÄŸÄ± Ã¶lÃ§er.\r\nKosinÃ¼s benzerliÄŸi yÃ¶ntemi ile aslÄ±nda trigonometrideki kosinÃ¼s\r\nfonksiyonu kullanÄ±lÄ±yor. Metinler birer vektÃ¶r olarak dikkate alÄ±nÄ±yor\r\nve iki vektÃ¶rÃ¼n birbirleri ile olan aÃ§Ä±sÄ± Ã¶lÃ§Ã¼lÃ¼yor. Bu benzerlik, iki\r\nvektÃ¶rÃ¼n Ã§arpÄ±mÄ±nÄ±n iki vektÃ¶rÃ¼n boylarÄ±nÄ±n Ã§arpÄ±mÄ±na oranÄ± olarak\r\nhesaplanÄ±r.\r\n\\(cos(\\theta) = \\frac{x.y}{||x||||y||} =\r\n\\frac{\\sum_{i=1}^{n}x_iy_i}{\\sqrt{\\sum_{i=1}^{n}x_i^2}\\sqrt{\\sum_{i=1}^{n}y_i^2}}\\)\r\nBasit bir Ã¶rnek ile nasÄ±l hesaplandÄ±ÄŸÄ±na bakalÄ±m.\r\n\r\n\r\nx <- c(3,4,1,0)\r\ny <- c(3,4,4,8)\r\n\r\n\r\n\r\n\\(x.y = 3*3 + 4*4 + 1*4 + 0*8 =\r\n29\\)\r\n\\(||x|| = \\sqrt{3^2 + 4^2 + 1^2 + 0^2} =\r\n5.09902\\)\r\n\\(||y|| = \\sqrt{3^2 + 4^2 + 4^2 + 8^2} =\r\n10.24695\\)\r\n\\(cos(x,y) = cos(\\theta) =\r\n\\frac{29}{5.09902*10.24695} = 0.5550303\\)\r\nKosinÃ¼s aÃ§Ä±sÄ± 0 olursa (\\(cos(\\theta) =\r\n0\\)), iki vektÃ¶r arasÄ±nda tam benzerlik vardÄ±r (\\(cos(0) = 1\\)).\r\nKosinÃ¼s aÃ§Ä±sÄ± 90 olursa (\\(cos(\\theta) =\r\n90\\)), iki vektÃ¶r arasÄ±nda benzerlik yoktur (\\(cos(90) = 0\\)).\r\nManuel yapmak yerine Râ€™da lsa paketi yardÄ±mÄ±yla da kosinÃ¼s\r\nbenzerliÄŸi bulunabilir.\r\n\r\n\r\nas.numeric(lsa::cosine(x,y))\r\n\r\n\r\n[1] 0.5550303\r\n\r\nPeki, metinlerde bu benzerlik nasÄ±l hesaplanÄ±yor? KÄ±sa cevabÄ± kelime\r\nfrekanslarÄ± ile. Bir Ã¶rnek ile inceleyelim.\r\n\r\n\r\ntext1 <- \"R programlama dilini Ã¶ÄŸreniyorum\"\r\ntext2 <- \"Python programalama dilini Ã¶ÄŸreniyorum\"\r\n\r\n\r\n\r\nYukarÄ±daki Ã¶rnekte dilini, Ã¶ÄŸreniyorum, programlama\r\nkelimeleri ortak; Python ve R kelimeleri farklÄ±dÄ±r. Kelime frekanslarÄ±nÄ±\r\nbirbirine denk gelecek ÅŸekilde yazarsak;\r\n\r\n\r\n# dilini, Ã¶ÄŸreniyorum, programlama, Python, R\r\n\r\ntext1_n <- c(1,1,1,0,1)\r\ntext2_n <- c(1,1,1,1,0)\r\n\r\nas.numeric(lsa::cosine(text1_n,text2_n))\r\n\r\n\r\n[1] 0.75\r\n\r\nGÃ¶rÃ¼ldÃ¼ÄŸÃ¼ Ã¼zere kosinÃ¼s benzerliÄŸi 0.75 ya da 75% Ã§Ä±kmÄ±ÅŸtÄ±r.\r\nUygulama\r\n25 adet Twitter hesabÄ±na ait tweetlere (post12.xlsx) GitHub\r\nhesabÄ±mdan ulaÅŸabilirsiniz. Ä°lgili veri setinde sadece hesap adÄ± ve\r\natÄ±lan tweetler bulunmaktadÄ±r. Retweetler ise Ã§Ä±karÄ±lmÄ±ÅŸtÄ±r.\r\n\r\n\r\naccounts <- c(\r\n  \"@Ahaber\",\r\n  \"@Haberturk\",\r\n  \"@ntv\",\r\n  \"@cnnturk\",\r\n  \"@BirGun_Gazetesi\",\r\n  \"@t24comtr\",\r\n  \"@cumhuriyetgzt\",\r\n  \"@yeniakit\",\r\n  \"@yenisafak\",\r\n  \"@Sabah\",\r\n  \"@trthaber\",\r\n  \"@anadoluajansi\",\r\n  \"@halktvcomtr\",\r\n  \"@tele1comtr\",\r\n  \"@bbcturkce\",\r\n  \"@FOXhaber\",\r\n  \"@gazetesozcu\",\r\n  \"@tgrthabertv\",\r\n  \"@gazeteduvar\",\r\n  \"@euronews_tr\",\r\n  \"@sputnik_TR\",\r\n  \"@dw_turkce\",\r\n  \"@Hurriyet\",\r\n  \"@solhaberportali\",\r\n  \"@DikenComTr\"\r\n)\r\n\r\n\r\n\r\nVeriler aÅŸaÄŸÄ±daki gibi Ã§ekilmiÅŸtir.\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(rtweet) # tweet\r\nlibrary(tidytext) # dÃ¼zenli veri formatÄ±\r\nlibrary(stopwords) # TÃ¼rkÃ§e stop wordler\r\nlibrary(widyr) # tf-idf, kosinÃ¼s benzerliÄŸi\r\n\r\ndf <- data.frame()\r\n\r\nfor(i in 1:length(accounts)){\r\n  \r\n  # n = Inf ile maksimum tweet sayÄ±sÄ± Ã§ekilmiÅŸtir ki bu da 3250'dir.\r\n  # include_rts parametresi FALSE yapÄ±larak retweetler analiz dÄ±ÅŸÄ± bÄ±rakÄ±lmÄ±ÅŸtÄ±r.\r\n  \r\n  timeline <- get_timeline(\r\n    user = accounts[i], n = Inf, include_rts = FALSE\r\n  )\r\n  \r\n  df <- df %>% \r\n    bind_rows(timeline)\r\n  \r\n  print(paste0(accounts[i],\" hesabÄ±ndan \",nrow(timeline),\" adet tweet Ã§ekildi.\"))\r\n  \r\n  Sys.sleep(time = 1)\r\n  \r\n}\r\n\r\nmaster <- df %>% \r\n  select(screen_name,text)\r\n\r\n\r\n\r\nTekrar Ã§alÄ±ÅŸtÄ±rmamak iÃ§in (73930 satÄ±rlÄ±k bir veri seti) kaydettiÄŸim\r\nveri setini kullanÄ±yorum.\r\n\r\n\r\n\r\n\r\n\r\nmaster <- readxl::read_excel(\"tweets.xlsx\")\r\n\r\n\r\n\r\nBu veri setinden urlâ€™leri (httpâ€™li) Ã§Ä±karacaÄŸÄ±z.\r\n\r\n\r\nmaster <- master %>% \r\n  mutate(text = gsub(\"http.+\",\"\",text))\r\n\r\n\r\n\r\nAynÄ± zamanda, tÃ¼rkÃ§e stop wordleri de Ã§Ä±karmak faydalÄ± olabilir. Stop\r\nwordler etkisiz kelimelerdir. SÄ±k kullanÄ±lan kelimeleri de kapsar desek\r\nyanlÄ±ÅŸ olmaz sanÄ±rÄ±m.\r\n\r\n\r\ntr_sw <- stopwords(language = \"tr\", source = \"stopwords-iso\")\r\n\r\n\r\n\r\nKosinÃ¼s benzerliÄŸini iki yÃ¶ntemi baz alarak hesaplayacaÄŸÄ±z: Kelime\r\nfrekanslarÄ± ve TF-IDF.\r\n\r\n\r\nmaster <- master %>% \r\n  unnest_tokens(output = \"word\", input = \"text\") %>% # kelimeler ayÄ±klandÄ±\r\n  filter(!(word %in% tr_sw)) %>% # stop wordler kaldÄ±rÄ±ldÄ±\r\n  count(word, screen_name) %>% # kelimeler hesaplara gÃ¶re saydÄ±rÄ±ldÄ±\r\n  bind_tf_idf(word, screen_name, n) # TF-IDF hesaplandÄ±\r\n\r\n\r\n\r\nKosinÃ¼s BenzerliÄŸi - Kelime FrekanslarÄ±\r\nYukarÄ±da da Ã¶rneÄŸini gÃ¶rdÃ¼ÄŸÃ¼mÃ¼z Ã¼zere bu baÅŸlÄ±k altÄ±nda kosinÃ¼s\r\nbenzerliÄŸi kelimelerin frekanslarÄ± kullanÄ±larak bulunmuÅŸtur.\r\n\r\n\r\nmaster_freq <- master %>% \r\n  pairwise_similarity(screen_name, word, n, upper = FALSE, sort = TRUE) %>% # n seÃ§ildi\r\n  mutate(item = paste0(item1,\"-\",item2), .before = similarity) %>% \r\n  select(-c(item1,item2)) %>% \r\n  rename(\"similarity_freq\"=2)\r\n\r\n\r\n\r\nKosinÃ¼s BenzerliÄŸi - TF-IDF\r\nTerm Frequency-Inverse Document Frequencyâ€™nin kÄ±saltmasÄ± olan TF-IDF\r\niÃ§in Terim FrekansÄ±-Ters DokÃ¼man FrekansÄ± diyebiliriz. Bu hesaplama, bir\r\nkelimenin dokÃ¼man iÃ§erisindeki Ã¶nemini gÃ¶steriyor. TF-IDF, TF ile IDFâ€™in\r\nÃ§arpÄ±mÄ±ndan oluÅŸuyor.\r\nTF: Kelimenin dokÃ¼mandaki tekrar sayÄ±sÄ±nÄ±n dokÃ¼mandaki toplam kelime\r\nsayÄ±sÄ±na oranÄ±dÄ±r.\r\nIDF: Toplam dokÃ¼man sayÄ±sÄ±nÄ±n seÃ§ilen kelimenin geÃ§tiÄŸi toplam\r\ndokÃ¼man sayÄ±sÄ±na oranÄ±nÄ±n logaritmasÄ±dÄ±r. Ä°lgili kelimenin diÄŸer\r\ndokÃ¼manlardaki sÄ±klÄ±ÄŸÄ±nÄ±n artmasÄ± DF deÄŸerini artÄ±rÄ±r; IDF deÄŸerini\r\nazaltÄ±r.\r\n\\(w_{i,j} = tf_{i,j}\\ x\\\r\nlog(\\frac{N}{df_i})\\)\r\n\\(tf_{i,j}:\\) iâ€™nin jâ€™de geÃ§me\r\noranÄ±\r\n\\(df_i:\\) i iÃ§eren dokÃ¼man\r\nsayÄ±sÄ±\r\n\\(N:\\) DokÃ¼man sayÄ±sÄ±\r\nÃ–rnek: â€œÃ§alarsaatâ€ kelimesini inceleyelim. FOXhaberâ€™in 30,402\r\nkelimesi vardÄ±r. SeÃ§tiÄŸimiz kelime ise 261 defa geÃ§miÅŸtir. Bu durumda TF\r\ndeÄŸeri 261/30,402 = 0.008584962 olur. 25 adet Twitter hesabÄ± olduÄŸu iÃ§in\r\n25 adet dokÃ¼man vardÄ±r. SeÃ§tiÄŸimiz kelime sadece 1 dokÃ¼manda (~hesapta)\r\ngeÃ§mektedir. Bu durumda IDF deÄŸeri log(25/1) = 3.218876 olur. TF-IDF ise\r\nTF ile IDFâ€™in Ã§arpÄ±mÄ±ydÄ±. Yani, 0.008584962 * 3.218876 = 0.02763393\r\nsonucuna ulaÅŸÄ±lÄ±r.\r\n\r\n\r\nmaster_tf_idf <- master %>% \r\n  pairwise_similarity(screen_name, word, tf_idf, upper = FALSE, sort = TRUE) %>% # tf-idf seÃ§ildi\r\n  mutate(item = paste0(item1,\"-\",item2), .before = similarity) %>% \r\n  select(-c(item1,item2)) %>% \r\n  rename(\"similarity_tf_idf\"=2)\r\n\r\n\r\n\r\nSonuÃ§\r\n\r\n\r\ndf_result <- master_freq %>% \r\n  inner_join(master_tf_idf, by = \"item\")\r\n\r\n\r\n\r\n\r\n\r\nggplot(df_result,\r\n       aes(x = similarity_freq, y = similarity_tf_idf, color  = similarity_freq)) +\r\n  geom_point(alpha = .2, size = 4) +\r\n  ggrepel::geom_text_repel(\r\n    data = df_result %>% \r\n      arrange(desc(similarity_freq)) %>% \r\n      slice(c(1:10)),\r\n    aes(label = item), size = 3\r\n  ) +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", hjust = 0.5),\r\n        plot.caption = element_text(face = \"italic\"),\r\n        legend.position = \"none\") +\r\n  scale_color_gradient(low = \"orange\", high = \"red\") +\r\n  labs(\r\n    title = \"Haber PaylaÅŸÄ±mÄ± Yapan Twitter HesaplarÄ±nÄ±n BenzerliÄŸi\",\r\n    caption = \"Top 10 gÃ¶sterilmiÅŸtir.\\nSaÄŸ-Ã¼st kÃ¶ÅŸeye gittikÃ§e benzerlik artmaktadÄ±r.\",\r\n    x = \"Kelime FrekanslarÄ±\",\r\n    y = \"TF-IDF\"\r\n  )\r\n\r\n\r\n\r\n\r\nListenin tamamÄ±na aÅŸaÄŸÄ±dan ulaÅŸÄ±labilir. Liste, benzerlik oranÄ± en\r\nyÃ¼ksekten en dÃ¼ÅŸÃ¼ÄŸe doÄŸru kelime frekansÄ±na gÃ¶re hesaplanan benzerliÄŸe\r\ngÃ¶re sÄ±ralanmÄ±ÅŸtÄ±r. En yÃ¼ksek benzerliÄŸe sahip hesaplar ~81% ile\r\ntrthaber ve anadoluajansi; en dÃ¼ÅŸÃ¼k benzerliÄŸe sahip hesaplar ise ~19%\r\nile DikenComTr ve tgrthabertv olmuÅŸtur. Kelime frekanslarÄ±na gÃ¶re\r\nbenzerliÄŸin yanÄ±nda TF-IDFâ€™i de hesaplamÄ±ÅŸtÄ±k. Buna gÃ¶re, en yÃ¼ksek\r\nbenzerliÄŸe sahip hesaplar ~21% ile Sabah ve yenisafak; en dÃ¼ÅŸÃ¼k\r\nbenzerliÄŸe sahip hesaplar ise ~0.15% ile FOXhaber ve DikenComTr\r\nolmuÅŸtur.\r\n\r\n\r\nHesaplar\r\n\r\n\r\nKelimeFrekansÄ±_Benzerlik\r\n\r\n\r\nTF-IDF_Benzerlik\r\n\r\n\r\ntrthaber-anadoluajansi\r\n\r\n\r\n0.8106289\r\n\r\n\r\n0.1943405\r\n\r\n\r\nHaberturk-yenisafak\r\n\r\n\r\n0.8063759\r\n\r\n\r\n0.1123132\r\n\r\n\r\nAhaber-Sabah\r\n\r\n\r\n0.8051288\r\n\r\n\r\n0.2083826\r\n\r\n\r\nHaberturk-Hurriyet\r\n\r\n\r\n0.8027018\r\n\r\n\r\n0.0912925\r\n\r\n\r\nBirGun_Gazetesi-t24comtr\r\n\r\n\r\n0.7787305\r\n\r\n\r\n0.1335979\r\n\r\n\r\nBirGun_Gazetesi-cumhuriyetgzt\r\n\r\n\r\n0.7663677\r\n\r\n\r\n0.1918478\r\n\r\n\r\ntrthaber-yenisafak\r\n\r\n\r\n0.7654727\r\n\r\n\r\n0.1761566\r\n\r\n\r\neuronews_tr-sputnik_TR\r\n\r\n\r\n0.7629162\r\n\r\n\r\n0.0656842\r\n\r\n\r\ndw_turkce-euronews_tr\r\n\r\n\r\n0.7596030\r\n\r\n\r\n0.0562945\r\n\r\n\r\ncnnturk-Hurriyet\r\n\r\n\r\n0.7585064\r\n\r\n\r\n0.0940787\r\n\r\n\r\nanadoluajansi-yenisafak\r\n\r\n\r\n0.7548191\r\n\r\n\r\n0.1543507\r\n\r\n\r\ncumhuriyetgzt-solhaberportali\r\n\r\n\r\n0.7538519\r\n\r\n\r\n0.1639537\r\n\r\n\r\nSabah-yenisafak\r\n\r\n\r\n0.7436745\r\n\r\n\r\n0.2103621\r\n\r\n\r\ntrthaber-Haberturk\r\n\r\n\r\n0.7422488\r\n\r\n\r\n0.0855117\r\n\r\n\r\nsputnik_TR-yenisafak\r\n\r\n\r\n0.7409369\r\n\r\n\r\n0.0847340\r\n\r\n\r\nbbcturkce-euronews_tr\r\n\r\n\r\n0.7355193\r\n\r\n\r\n0.0948756\r\n\r\n\r\nBirGun_Gazetesi-solhaberportali\r\n\r\n\r\n0.7351738\r\n\r\n\r\n0.1626351\r\n\r\n\r\nsolhaberportali-t24comtr\r\n\r\n\r\n0.7346799\r\n\r\n\r\n0.1221117\r\n\r\n\r\ncumhuriyetgzt-t24comtr\r\n\r\n\r\n0.7337696\r\n\r\n\r\n0.1520996\r\n\r\n\r\ndw_turkce-bbcturkce\r\n\r\n\r\n0.7332175\r\n\r\n\r\n0.0477881\r\n\r\n\r\ngazeteduvar-gazetesozcu\r\n\r\n\r\n0.7298423\r\n\r\n\r\n0.0537881\r\n\r\n\r\ncumhuriyetgzt-gazetesozcu\r\n\r\n\r\n0.7272367\r\n\r\n\r\n0.1105421\r\n\r\n\r\nHaberturk-sputnik_TR\r\n\r\n\r\n0.7272345\r\n\r\n\r\n0.0463835\r\n\r\n\r\nbbcturkce-sputnik_TR\r\n\r\n\r\n0.7268729\r\n\r\n\r\n0.0603327\r\n\r\n\r\nntv-cnnturk\r\n\r\n\r\n0.7229869\r\n\r\n\r\n0.0285233\r\n\r\n\r\nsputnik_TR-t24comtr\r\n\r\n\r\n0.7229612\r\n\r\n\r\n0.0836858\r\n\r\n\r\nyenisafak-Hurriyet\r\n\r\n\r\n0.7130531\r\n\r\n\r\n0.1291871\r\n\r\n\r\nanadoluajansi-Haberturk\r\n\r\n\r\n0.7054939\r\n\r\n\r\n0.0832394\r\n\r\n\r\nbbcturkce-t24comtr\r\n\r\n\r\n0.7049415\r\n\r\n\r\n0.0687628\r\n\r\n\r\nHaberturk-Sabah\r\n\r\n\r\n0.6978937\r\n\r\n\r\n0.0976829\r\n\r\n\r\nntv-sputnik_TR\r\n\r\n\r\n0.6973590\r\n\r\n\r\n0.0408761\r\n\r\n\r\nHaberturk-cnnturk\r\n\r\n\r\n0.6966393\r\n\r\n\r\n0.0410796\r\n\r\n\r\ncumhuriyetgzt-yeniakit\r\n\r\n\r\n0.6953032\r\n\r\n\r\n0.0675983\r\n\r\n\r\nntv-Hurriyet\r\n\r\n\r\n0.6948125\r\n\r\n\r\n0.0503384\r\n\r\n\r\ngazetesozcu-Hurriyet\r\n\r\n\r\n0.6938015\r\n\r\n\r\n0.0728135\r\n\r\n\r\ntrthaber-Sabah\r\n\r\n\r\n0.6937281\r\n\r\n\r\n0.1585761\r\n\r\n\r\ntrthaber-Hurriyet\r\n\r\n\r\n0.6930919\r\n\r\n\r\n0.1003859\r\n\r\n\r\ntrthaber-sputnik_TR\r\n\r\n\r\n0.6929987\r\n\r\n\r\n0.0655192\r\n\r\n\r\nt24comtr-gazetesozcu\r\n\r\n\r\n0.6917629\r\n\r\n\r\n0.1115391\r\n\r\n\r\nHaberturk-gazetesozcu\r\n\r\n\r\n0.6901779\r\n\r\n\r\n0.0439020\r\n\r\n\r\nbbcturkce-BirGun_Gazetesi\r\n\r\n\r\n0.6901495\r\n\r\n\r\n0.0693958\r\n\r\n\r\ndw_turkce-sputnik_TR\r\n\r\n\r\n0.6890468\r\n\r\n\r\n0.0305955\r\n\r\n\r\ntrthaber-ntv\r\n\r\n\r\n0.6888448\r\n\r\n\r\n0.0713711\r\n\r\n\r\ncnnturk-yeniakit\r\n\r\n\r\n0.6846588\r\n\r\n\r\n0.0549831\r\n\r\n\r\nHaberturk-ntv\r\n\r\n\r\n0.6830790\r\n\r\n\r\n0.0366840\r\n\r\n\r\ntrthaber-cnnturk\r\n\r\n\r\n0.6825293\r\n\r\n\r\n0.0552654\r\n\r\n\r\nsolhaberportali-gazetesozcu\r\n\r\n\r\n0.6774125\r\n\r\n\r\n0.0711323\r\n\r\n\r\nSabah-Hurriyet\r\n\r\n\r\n0.6766720\r\n\r\n\r\n0.1530826\r\n\r\n\r\nntv-yeniakit\r\n\r\n\r\n0.6758222\r\n\r\n\r\n0.0397374\r\n\r\n\r\nHaberturk-t24comtr\r\n\r\n\r\n0.6714056\r\n\r\n\r\n0.0911134\r\n\r\n\r\ntrthaber-bbcturkce\r\n\r\n\r\n0.6707776\r\n\r\n\r\n0.0823790\r\n\r\n\r\nsputnik_TR-cnnturk\r\n\r\n\r\n0.6704460\r\n\r\n\r\n0.0276909\r\n\r\n\r\nanadoluajansi-sputnik_TR\r\n\r\n\r\n0.6704114\r\n\r\n\r\n0.0696720\r\n\r\n\r\ncumhuriyetgzt-Hurriyet\r\n\r\n\r\n0.6695873\r\n\r\n\r\n0.0816854\r\n\r\n\r\nSabah-cnnturk\r\n\r\n\r\n0.6676695\r\n\r\n\r\n0.0797012\r\n\r\n\r\nsputnik_TR-Hurriyet\r\n\r\n\r\n0.6674735\r\n\r\n\r\n0.0532219\r\n\r\n\r\nanadoluajansi-Hurriyet\r\n\r\n\r\n0.6642287\r\n\r\n\r\n0.0781847\r\n\r\n\r\nAhaber-yenisafak\r\n\r\n\r\n0.6632437\r\n\r\n\r\n0.0754914\r\n\r\n\r\nBirGun_Gazetesi-sputnik_TR\r\n\r\n\r\n0.6618473\r\n\r\n\r\n0.0634015\r\n\r\n\r\nyenisafak-cnnturk\r\n\r\n\r\n0.6605355\r\n\r\n\r\n0.0708626\r\n\r\n\r\nanadoluajansi-ntv\r\n\r\n\r\n0.6577930\r\n\r\n\r\n0.0467949\r\n\r\n\r\nSabah-sputnik_TR\r\n\r\n\r\n0.6545151\r\n\r\n\r\n0.0697620\r\n\r\n\r\nbbcturkce-Haberturk\r\n\r\n\r\n0.6528864\r\n\r\n\r\n0.0382478\r\n\r\n\r\ngazeteduvar-solhaberportali\r\n\r\n\r\n0.6506590\r\n\r\n\r\n0.1014805\r\n\r\n\r\nHurriyet-yeniakit\r\n\r\n\r\n0.6480956\r\n\r\n\r\n0.0748645\r\n\r\n\r\nbbcturkce-ntv\r\n\r\n\r\n0.6480399\r\n\r\n\r\n0.0479609\r\n\r\n\r\nt24comtr-yenisafak\r\n\r\n\r\n0.6479050\r\n\r\n\r\n0.0682962\r\n\r\n\r\ngazeteduvar-t24comtr\r\n\r\n\r\n0.6477091\r\n\r\n\r\n0.0832924\r\n\r\n\r\nhalktvcomtr-t24comtr\r\n\r\n\r\n0.6471755\r\n\r\n\r\n0.0524686\r\n\r\n\r\nBirGun_Gazetesi-gazetesozcu\r\n\r\n\r\n0.6457721\r\n\r\n\r\n0.1196845\r\n\r\n\r\nbbcturkce-yenisafak\r\n\r\n\r\n0.6439317\r\n\r\n\r\n0.0717316\r\n\r\n\r\nntv-t24comtr\r\n\r\n\r\n0.6432950\r\n\r\n\r\n0.0339556\r\n\r\n\r\nt24comtr-yeniakit\r\n\r\n\r\n0.6432487\r\n\r\n\r\n0.0619541\r\n\r\n\r\nt24comtr-Hurriyet\r\n\r\n\r\n0.6421443\r\n\r\n\r\n0.0522538\r\n\r\n\r\ncumhuriyetgzt-cnnturk\r\n\r\n\r\n0.6413744\r\n\r\n\r\n0.0456347\r\n\r\n\r\nBirGun_Gazetesi-Sabah\r\n\r\n\r\n0.6388411\r\n\r\n\r\n0.0855551\r\n\r\n\r\ncumhuriyetgzt-Haberturk\r\n\r\n\r\n0.6387961\r\n\r\n\r\n0.0517547\r\n\r\n\r\nSabah-t24comtr\r\n\r\n\r\n0.6385868\r\n\r\n\r\n0.0646894\r\n\r\n\r\nanadoluajansi-bbcturkce\r\n\r\n\r\n0.6382396\r\n\r\n\r\n0.0677710\r\n\r\n\r\nbbcturkce-Hurriyet\r\n\r\n\r\n0.6375017\r\n\r\n\r\n0.0436395\r\n\r\n\r\ncumhuriyetgzt-ntv\r\n\r\n\r\n0.6365525\r\n\r\n\r\n0.0336408\r\n\r\n\r\nBirGun_Gazetesi-ntv\r\n\r\n\r\n0.6358817\r\n\r\n\r\n0.0342174\r\n\r\n\r\nBirGun_Gazetesi-Haberturk\r\n\r\n\r\n0.6323996\r\n\r\n\r\n0.0482418\r\n\r\n\r\nanadoluajansi-cnnturk\r\n\r\n\r\n0.6315114\r\n\r\n\r\n0.0386135\r\n\r\n\r\ncumhuriyetgzt-gazeteduvar\r\n\r\n\r\n0.6285823\r\n\r\n\r\n0.0579139\r\n\r\n\r\nanadoluajansi-Sabah\r\n\r\n\r\n0.6280131\r\n\r\n\r\n0.1232532\r\n\r\n\r\ndw_turkce-t24comtr\r\n\r\n\r\n0.6272307\r\n\r\n\r\n0.0342632\r\n\r\n\r\nBirGun_Gazetesi-yeniakit\r\n\r\n\r\n0.6267010\r\n\r\n\r\n0.0458171\r\n\r\n\r\nBirGun_Gazetesi-Hurriyet\r\n\r\n\r\n0.6257641\r\n\r\n\r\n0.0641389\r\n\r\n\r\nntv-yenisafak\r\n\r\n\r\n0.6244915\r\n\r\n\r\n0.0516657\r\n\r\n\r\nsputnik_TR-yeniakit\r\n\r\n\r\n0.6213267\r\n\r\n\r\n0.0469178\r\n\r\n\r\nntv-Sabah\r\n\r\n\r\n0.6211794\r\n\r\n\r\n0.0582493\r\n\r\n\r\ndw_turkce-BirGun_Gazetesi\r\n\r\n\r\n0.6146793\r\n\r\n\r\n0.0434032\r\n\r\n\r\nBirGun_Gazetesi-cnnturk\r\n\r\n\r\n0.6084926\r\n\r\n\r\n0.0340565\r\n\r\n\r\nbbcturkce-cnnturk\r\n\r\n\r\n0.6080996\r\n\r\n\r\n0.0276098\r\n\r\n\r\nSabah-yeniakit\r\n\r\n\r\n0.6076181\r\n\r\n\r\n0.0930308\r\n\r\n\r\ntele1comtr-BirGun_Gazetesi\r\n\r\n\r\n0.6067541\r\n\r\n\r\n0.0772375\r\n\r\n\r\ndw_turkce-yenisafak\r\n\r\n\r\n0.6064737\r\n\r\n\r\n0.0489489\r\n\r\n\r\nBirGun_Gazetesi-yenisafak\r\n\r\n\r\n0.6063298\r\n\r\n\r\n0.0940432\r\n\r\n\r\nsolhaberportali-yeniakit\r\n\r\n\r\n0.6053319\r\n\r\n\r\n0.0400433\r\n\r\n\r\ntrthaber-euronews_tr\r\n\r\n\r\n0.6052005\r\n\r\n\r\n0.0775859\r\n\r\n\r\nt24comtr-cnnturk\r\n\r\n\r\n0.6013539\r\n\r\n\r\n0.0247482\r\n\r\n\r\nAhaber-Haberturk\r\n\r\n\r\n0.6003299\r\n\r\n\r\n0.0381220\r\n\r\n\r\nhalktvcomtr-cumhuriyetgzt\r\n\r\n\r\n0.5992940\r\n\r\n\r\n0.0550906\r\n\r\n\r\nBirGun_Gazetesi-gazeteduvar\r\n\r\n\r\n0.5981839\r\n\r\n\r\n0.0730252\r\n\r\n\r\ntrthaber-t24comtr\r\n\r\n\r\n0.5979022\r\n\r\n\r\n0.0476076\r\n\r\n\r\ndw_turkce-trthaber\r\n\r\n\r\n0.5975492\r\n\r\n\r\n0.0404801\r\n\r\n\r\ntele1comtr-t24comtr\r\n\r\n\r\n0.5971600\r\n\r\n\r\n0.0620738\r\n\r\n\r\neuronews_tr-t24comtr\r\n\r\n\r\n0.5969724\r\n\r\n\r\n0.0477570\r\n\r\n\r\nbbcturkce-yeniakit\r\n\r\n\r\n0.5969629\r\n\r\n\r\n0.0377484\r\n\r\n\r\nbbcturkce-Sabah\r\n\r\n\r\n0.5960016\r\n\r\n\r\n0.0588932\r\n\r\n\r\ntrthaber-BirGun_Gazetesi\r\n\r\n\r\n0.5957208\r\n\r\n\r\n0.0663263\r\n\r\n\r\nsolhaberportali-Hurriyet\r\n\r\n\r\n0.5949732\r\n\r\n\r\n0.0308396\r\n\r\n\r\ngazetesozcu-yeniakit\r\n\r\n\r\n0.5942259\r\n\r\n\r\n0.0638034\r\n\r\n\r\ntele1comtr-cumhuriyetgzt\r\n\r\n\r\n0.5931553\r\n\r\n\r\n0.0793969\r\n\r\n\r\ncumhuriyetgzt-Sabah\r\n\r\n\r\n0.5925846\r\n\r\n\r\n0.0886826\r\n\r\n\r\neuronews_tr-yenisafak\r\n\r\n\r\n0.5920227\r\n\r\n\r\n0.0892231\r\n\r\n\r\nhalktvcomtr-BirGun_Gazetesi\r\n\r\n\r\n0.5889909\r\n\r\n\r\n0.0551861\r\n\r\n\r\ndw_turkce-anadoluajansi\r\n\r\n\r\n0.5876155\r\n\r\n\r\n0.0369139\r\n\r\n\r\nanadoluajansi-t24comtr\r\n\r\n\r\n0.5872263\r\n\r\n\r\n0.0490416\r\n\r\n\r\nbbcturkce-gazetesozcu\r\n\r\n\r\n0.5868224\r\n\r\n\r\n0.0508068\r\n\r\n\r\nhalktvcomtr-yenisafak\r\n\r\n\r\n0.5864419\r\n\r\n\r\n0.0284972\r\n\r\n\r\ntrthaber-yeniakit\r\n\r\n\r\n0.5846644\r\n\r\n\r\n0.0541077\r\n\r\n\r\neuronews_tr-Haberturk\r\n\r\n\r\n0.5836692\r\n\r\n\r\n0.0443140\r\n\r\n\r\nntv-solhaberportali\r\n\r\n\r\n0.5834627\r\n\r\n\r\n0.0216584\r\n\r\n\r\nsolhaberportali-sputnik_TR\r\n\r\n\r\n0.5831984\r\n\r\n\r\n0.0450597\r\n\r\n\r\nbbcturkce-cumhuriyetgzt\r\n\r\n\r\n0.5818368\r\n\r\n\r\n0.0547193\r\n\r\n\r\ngazeteduvar-Haberturk\r\n\r\n\r\n0.5798512\r\n\r\n\r\n0.0253730\r\n\r\n\r\nntv-gazetesozcu\r\n\r\n\r\n0.5775730\r\n\r\n\r\n0.0491491\r\n\r\n\r\nHaberturk-solhaberportali\r\n\r\n\r\n0.5768975\r\n\r\n\r\n0.0267129\r\n\r\n\r\nhalktvcomtr-Haberturk\r\n\r\n\r\n0.5767789\r\n\r\n\r\n0.0161725\r\n\r\n\r\nAhaber-t24comtr\r\n\r\n\r\n0.5766286\r\n\r\n\r\n0.0281784\r\n\r\n\r\nhalktvcomtr-solhaberportali\r\n\r\n\r\n0.5765503\r\n\r\n\r\n0.0450955\r\n\r\n\r\ncumhuriyetgzt-sputnik_TR\r\n\r\n\r\n0.5763907\r\n\r\n\r\n0.0488487\r\n\r\n\r\ndw_turkce-Haberturk\r\n\r\n\r\n0.5761907\r\n\r\n\r\n0.0273289\r\n\r\n\r\nHaberturk-yeniakit\r\n\r\n\r\n0.5759016\r\n\r\n\r\n0.0419655\r\n\r\n\r\nsputnik_TR-gazetesozcu\r\n\r\n\r\n0.5742517\r\n\r\n\r\n0.0550270\r\n\r\n\r\nbbcturkce-solhaberportali\r\n\r\n\r\n0.5722210\r\n\r\n\r\n0.0396403\r\n\r\n\r\ntele1comtr-solhaberportali\r\n\r\n\r\n0.5716931\r\n\r\n\r\n0.0602841\r\n\r\n\r\ngazeteduvar-Hurriyet\r\n\r\n\r\n0.5713483\r\n\r\n\r\n0.0293130\r\n\r\n\r\nanadoluajansi-BirGun_Gazetesi\r\n\r\n\r\n0.5694263\r\n\r\n\r\n0.0557753\r\n\r\n\r\nAhaber-cnnturk\r\n\r\n\r\n0.5664703\r\n\r\n\r\n0.0347852\r\n\r\n\r\nAhaber-Hurriyet\r\n\r\n\r\n0.5664411\r\n\r\n\r\n0.0584761\r\n\r\n\r\nAhaber-trthaber\r\n\r\n\r\n0.5659846\r\n\r\n\r\n0.0719299\r\n\r\n\r\nanadoluajansi-euronews_tr\r\n\r\n\r\n0.5652975\r\n\r\n\r\n0.0691299\r\n\r\n\r\nBirGun_Gazetesi-euronews_tr\r\n\r\n\r\n0.5637798\r\n\r\n\r\n0.0590051\r\n\r\n\r\nhalktvcomtr-gazeteduvar\r\n\r\n\r\n0.5635129\r\n\r\n\r\n0.0248399\r\n\r\n\r\neuronews_tr-cnnturk\r\n\r\n\r\n0.5633697\r\n\r\n\r\n0.0359805\r\n\r\n\r\nAhaber-BirGun_Gazetesi\r\n\r\n\r\n0.5626208\r\n\r\n\r\n0.0392925\r\n\r\n\r\nAhaber-sputnik_TR\r\n\r\n\r\n0.5552218\r\n\r\n\r\n0.0238154\r\n\r\n\r\ngazetesozcu-cnnturk\r\n\r\n\r\n0.5546777\r\n\r\n\r\n0.0318466\r\n\r\n\r\nhalktvcomtr-gazetesozcu\r\n\r\n\r\n0.5522672\r\n\r\n\r\n0.0292085\r\n\r\n\r\neuronews_tr-Hurriyet\r\n\r\n\r\n0.5477599\r\n\r\n\r\n0.0539274\r\n\r\n\r\nSabah-solhaberportali\r\n\r\n\r\n0.5470097\r\n\r\n\r\n0.0384828\r\n\r\n\r\neuronews_tr-ntv\r\n\r\n\r\n0.5460006\r\n\r\n\r\n0.0334140\r\n\r\n\r\nsolhaberportali-cnnturk\r\n\r\n\r\n0.5397424\r\n\r\n\r\n0.0160335\r\n\r\n\r\ntrthaber-cumhuriyetgzt\r\n\r\n\r\n0.5379678\r\n\r\n\r\n0.0563175\r\n\r\n\r\nhalktvcomtr-Hurriyet\r\n\r\n\r\n0.5325830\r\n\r\n\r\n0.0245928\r\n\r\n\r\ntgrthabertv-yenisafak\r\n\r\n\r\n0.5317700\r\n\r\n\r\n0.0356498\r\n\r\n\r\nAhaber-cumhuriyetgzt\r\n\r\n\r\n0.5316974\r\n\r\n\r\n0.0447653\r\n\r\n\r\ngazeteduvar-sputnik_TR\r\n\r\n\r\n0.5315661\r\n\r\n\r\n0.0441302\r\n\r\n\r\ndw_turkce-ntv\r\n\r\n\r\n0.5305560\r\n\r\n\r\n0.0154338\r\n\r\n\r\ndw_turkce-Sabah\r\n\r\n\r\n0.5305229\r\n\r\n\r\n0.0332714\r\n\r\n\r\ndw_turkce-Hurriyet\r\n\r\n\r\n0.5286587\r\n\r\n\r\n0.0207836\r\n\r\n\r\ntrthaber-gazetesozcu\r\n\r\n\r\n0.5278540\r\n\r\n\r\n0.0533354\r\n\r\n\r\neuronews_tr-Sabah\r\n\r\n\r\n0.5275381\r\n\r\n\r\n0.0671365\r\n\r\n\r\nSabah-gazetesozcu\r\n\r\n\r\n0.5255846\r\n\r\n\r\n0.0786883\r\n\r\n\r\nhalktvcomtr-tele1comtr\r\n\r\n\r\n0.5253747\r\n\r\n\r\n0.0327451\r\n\r\n\r\neuronews_tr-yeniakit\r\n\r\n\r\n0.5241909\r\n\r\n\r\n0.0385380\r\n\r\n\r\nanadoluajansi-yeniakit\r\n\r\n\r\n0.5237885\r\n\r\n\r\n0.0558375\r\n\r\n\r\nhalktvcomtr-sputnik_TR\r\n\r\n\r\n0.5223739\r\n\r\n\r\n0.0181744\r\n\r\n\r\ndw_turkce-cnnturk\r\n\r\n\r\n0.5220954\r\n\r\n\r\n0.0141125\r\n\r\n\r\nyenisafak-yeniakit\r\n\r\n\r\n0.5215068\r\n\r\n\r\n0.0657442\r\n\r\n\r\ntele1comtr-gazeteduvar\r\n\r\n\r\n0.5205275\r\n\r\n\r\n0.0270762\r\n\r\n\r\nhalktvcomtr-Sabah\r\n\r\n\r\n0.5197517\r\n\r\n\r\n0.0264668\r\n\r\n\r\nhalktvcomtr-Ahaber\r\n\r\n\r\n0.5190580\r\n\r\n\r\n0.0140692\r\n\r\n\r\nbbcturkce-gazeteduvar\r\n\r\n\r\n0.5172236\r\n\r\n\r\n0.0408893\r\n\r\n\r\ndw_turkce-yeniakit\r\n\r\n\r\n0.5156929\r\n\r\n\r\n0.0153667\r\n\r\n\r\nAhaber-yeniakit\r\n\r\n\r\n0.5156580\r\n\r\n\r\n0.0405285\r\n\r\n\r\ncumhuriyetgzt-yenisafak\r\n\r\n\r\n0.5152230\r\n\r\n\r\n0.0772845\r\n\r\n\r\ndw_turkce-solhaberportali\r\n\r\n\r\n0.5114312\r\n\r\n\r\n0.0228503\r\n\r\n\r\ngazetesozcu-yenisafak\r\n\r\n\r\n0.5113475\r\n\r\n\r\n0.0752942\r\n\r\n\r\ndw_turkce-gazetesozcu\r\n\r\n\r\n0.5080183\r\n\r\n\r\n0.0267702\r\n\r\n\r\nanadoluajansi-gazetesozcu\r\n\r\n\r\n0.5075900\r\n\r\n\r\n0.0515435\r\n\r\n\r\nsolhaberportali-yenisafak\r\n\r\n\r\n0.5070632\r\n\r\n\r\n0.0449267\r\n\r\n\r\ngazeteduvar-yeniakit\r\n\r\n\r\n0.5064414\r\n\r\n\r\n0.0397979\r\n\r\n\r\nAhaber-ntv\r\n\r\n\r\n0.5035523\r\n\r\n\r\n0.0346341\r\n\r\n\r\nAhaber-bbcturkce\r\n\r\n\r\n0.5016460\r\n\r\n\r\n0.0244870\r\n\r\n\r\nhalktvcomtr-bbcturkce\r\n\r\n\r\n0.4999610\r\n\r\n\r\n0.0193332\r\n\r\n\r\nAhaber-anadoluajansi\r\n\r\n\r\n0.4996122\r\n\r\n\r\n0.0421809\r\n\r\n\r\ndw_turkce-cumhuriyetgzt\r\n\r\n\r\n0.4983784\r\n\r\n\r\n0.0254060\r\n\r\n\r\nhalktvcomtr-ntv\r\n\r\n\r\n0.4914800\r\n\r\n\r\n0.0138667\r\n\r\n\r\nhalktvcomtr-yeniakit\r\n\r\n\r\n0.4862986\r\n\r\n\r\n0.0243008\r\n\r\n\r\ncumhuriyetgzt-euronews_tr\r\n\r\n\r\n0.4830498\r\n\r\n\r\n0.0500718\r\n\r\n\r\nhalktvcomtr-cnnturk\r\n\r\n\r\n0.4825188\r\n\r\n\r\n0.0115618\r\n\r\n\r\ntele1comtr-yeniakit\r\n\r\n\r\n0.4801900\r\n\r\n\r\n0.0305528\r\n\r\n\r\ngazeteduvar-ntv\r\n\r\n\r\n0.4792814\r\n\r\n\r\n0.0248216\r\n\r\n\r\neuronews_tr-gazetesozcu\r\n\r\n\r\n0.4784038\r\n\r\n\r\n0.0415197\r\n\r\n\r\ntrthaber-solhaberportali\r\n\r\n\r\n0.4775124\r\n\r\n\r\n0.0278770\r\n\r\n\r\neuronews_tr-solhaberportali\r\n\r\n\r\n0.4775024\r\n\r\n\r\n0.0302210\r\n\r\n\r\nanadoluajansi-cumhuriyetgzt\r\n\r\n\r\n0.4771810\r\n\r\n\r\n0.0362971\r\n\r\n\r\ntele1comtr-gazetesozcu\r\n\r\n\r\n0.4740713\r\n\r\n\r\n0.0489467\r\n\r\n\r\ntele1comtr-Ahaber\r\n\r\n\r\n0.4708324\r\n\r\n\r\n0.0291057\r\n\r\n\r\nhalktvcomtr-tgrthabertv\r\n\r\n\r\n0.4689181\r\n\r\n\r\n0.0068348\r\n\r\n\r\nAhaber-solhaberportali\r\n\r\n\r\n0.4648964\r\n\r\n\r\n0.0169447\r\n\r\n\r\nanadoluajansi-solhaberportali\r\n\r\n\r\n0.4646816\r\n\r\n\r\n0.0306466\r\n\r\n\r\ntele1comtr-bbcturkce\r\n\r\n\r\n0.4639462\r\n\r\n\r\n0.0186551\r\n\r\n\r\ntele1comtr-Sabah\r\n\r\n\r\n0.4572505\r\n\r\n\r\n0.0343725\r\n\r\n\r\ntrthaber-gazeteduvar\r\n\r\n\r\n0.4535852\r\n\r\n\r\n0.0350991\r\n\r\n\r\ngazeteduvar-Sabah\r\n\r\n\r\n0.4528567\r\n\r\n\r\n0.0369867\r\n\r\n\r\nhalktvcomtr-trthaber\r\n\r\n\r\n0.4516245\r\n\r\n\r\n0.0185267\r\n\r\n\r\ntele1comtr-Hurriyet\r\n\r\n\r\n0.4508242\r\n\r\n\r\n0.0306197\r\n\r\n\r\ngazeteduvar-yenisafak\r\n\r\n\r\n0.4498436\r\n\r\n\r\n0.0439440\r\n\r\n\r\ngazeteduvar-cnnturk\r\n\r\n\r\n0.4476540\r\n\r\n\r\n0.0150541\r\n\r\n\r\nHaberturk-tgrthabertv\r\n\r\n\r\n0.4460957\r\n\r\n\r\n0.0184105\r\n\r\n\r\ndw_turkce-gazeteduvar\r\n\r\n\r\n0.4450478\r\n\r\n\r\n0.0196793\r\n\r\n\r\ntele1comtr-Haberturk\r\n\r\n\r\n0.4442116\r\n\r\n\r\n0.0155230\r\n\r\n\r\nAhaber-gazetesozcu\r\n\r\n\r\n0.4429511\r\n\r\n\r\n0.0307758\r\n\r\n\r\ntele1comtr-sputnik_TR\r\n\r\n\r\n0.4427018\r\n\r\n\r\n0.0171524\r\n\r\n\r\ndw_turkce-Ahaber\r\n\r\n\r\n0.4394215\r\n\r\n\r\n0.0115221\r\n\r\n\r\nSabah-tgrthabertv\r\n\r\n\r\n0.4335623\r\n\r\n\r\n0.0429504\r\n\r\n\r\ntele1comtr-ntv\r\n\r\n\r\n0.4329672\r\n\r\n\r\n0.0128951\r\n\r\n\r\nAhaber-gazeteduvar\r\n\r\n\r\n0.4310360\r\n\r\n\r\n0.0170058\r\n\r\n\r\nAhaber-euronews_tr\r\n\r\n\r\n0.4306591\r\n\r\n\r\n0.0283555\r\n\r\n\r\ndw_turkce-halktvcomtr\r\n\r\n\r\n0.4268255\r\n\r\n\r\n0.0103629\r\n\r\n\r\ntele1comtr-yenisafak\r\n\r\n\r\n0.4254835\r\n\r\n\r\n0.0300456\r\n\r\n\r\nFOXhaber-t24comtr\r\n\r\n\r\n0.4253660\r\n\r\n\r\n0.0076325\r\n\r\n\r\nFOXhaber-sputnik_TR\r\n\r\n\r\n0.4252895\r\n\r\n\r\n0.0063732\r\n\r\n\r\nhalktvcomtr-anadoluajansi\r\n\r\n\r\n0.4249324\r\n\r\n\r\n0.0157424\r\n\r\n\r\ntele1comtr-cnnturk\r\n\r\n\r\n0.4239025\r\n\r\n\r\n0.0169703\r\n\r\n\r\ntgrthabertv-Hurriyet\r\n\r\n\r\n0.4223124\r\n\r\n\r\n0.0299972\r\n\r\n\r\neuronews_tr-gazeteduvar\r\n\r\n\r\n0.4198134\r\n\r\n\r\n0.0288717\r\n\r\n\r\nanadoluajansi-gazeteduvar\r\n\r\n\r\n0.4183067\r\n\r\n\r\n0.0332509\r\n\r\n\r\nt24comtr-DikenComTr\r\n\r\n\r\n0.4168956\r\n\r\n\r\n0.0223397\r\n\r\n\r\ntgrthabertv-cnnturk\r\n\r\n\r\n0.4167897\r\n\r\n\r\n0.0186526\r\n\r\n\r\nt24comtr-tgrthabertv\r\n\r\n\r\n0.4116710\r\n\r\n\r\n0.0189317\r\n\r\n\r\ndw_turkce-tele1comtr\r\n\r\n\r\n0.4111918\r\n\r\n\r\n0.0109860\r\n\r\n\r\nsputnik_TR-tgrthabertv\r\n\r\n\r\n0.4089963\r\n\r\n\r\n0.0156813\r\n\r\n\r\ntrthaber-tgrthabertv\r\n\r\n\r\n0.4073556\r\n\r\n\r\n0.0255372\r\n\r\n\r\nBirGun_Gazetesi-DikenComTr\r\n\r\n\r\n0.4065819\r\n\r\n\r\n0.0238453\r\n\r\n\r\nAhaber-tgrthabertv\r\n\r\n\r\n0.4058075\r\n\r\n\r\n0.0229085\r\n\r\n\r\ntele1comtr-trthaber\r\n\r\n\r\n0.4057580\r\n\r\n\r\n0.0174285\r\n\r\n\r\nhalktvcomtr-FOXhaber\r\n\r\n\r\n0.4021386\r\n\r\n\r\n0.0027647\r\n\r\n\r\nhalktvcomtr-euronews_tr\r\n\r\n\r\n0.3983322\r\n\r\n\r\n0.0156261\r\n\r\n\r\nBirGun_Gazetesi-FOXhaber\r\n\r\n\r\n0.3962450\r\n\r\n\r\n0.0098530\r\n\r\n\r\nFOXhaber-yenisafak\r\n\r\n\r\n0.3960814\r\n\r\n\r\n0.0090183\r\n\r\n\r\nbbcturkce-DikenComTr\r\n\r\n\r\n0.3929745\r\n\r\n\r\n0.0123792\r\n\r\n\r\nbbcturkce-tgrthabertv\r\n\r\n\r\n0.3923173\r\n\r\n\r\n0.0137057\r\n\r\n\r\ntgrthabertv-yeniakit\r\n\r\n\r\n0.3909191\r\n\r\n\r\n0.0227032\r\n\r\n\r\nntv-tgrthabertv\r\n\r\n\r\n0.3896238\r\n\r\n\r\n0.0132043\r\n\r\n\r\nanadoluajansi-FOXhaber\r\n\r\n\r\n0.3848416\r\n\r\n\r\n0.0101080\r\n\r\n\r\nbbcturkce-FOXhaber\r\n\r\n\r\n0.3846752\r\n\r\n\r\n0.0064830\r\n\r\n\r\ncumhuriyetgzt-tgrthabertv\r\n\r\n\r\n0.3827390\r\n\r\n\r\n0.0243898\r\n\r\n\r\nFOXhaber-Haberturk\r\n\r\n\r\n0.3781859\r\n\r\n\r\n0.0056567\r\n\r\n\r\nBirGun_Gazetesi-tgrthabertv\r\n\r\n\r\n0.3772591\r\n\r\n\r\n0.0213794\r\n\r\n\r\ntrthaber-FOXhaber\r\n\r\n\r\n0.3702974\r\n\r\n\r\n0.0086941\r\n\r\n\r\nDikenComTr-gazetesozcu\r\n\r\n\r\n0.3690939\r\n\r\n\r\n0.0297316\r\n\r\n\r\nanadoluajansi-tgrthabertv\r\n\r\n\r\n0.3661290\r\n\r\n\r\n0.0183070\r\n\r\n\r\ntele1comtr-anadoluajansi\r\n\r\n\r\n0.3592216\r\n\r\n\r\n0.0122300\r\n\r\n\r\nsolhaberportali-DikenComTr\r\n\r\n\r\n0.3585451\r\n\r\n\r\n0.0148973\r\n\r\n\r\neuronews_tr-tgrthabertv\r\n\r\n\r\n0.3582541\r\n\r\n\r\n0.0191940\r\n\r\n\r\ntele1comtr-euronews_tr\r\n\r\n\r\n0.3581601\r\n\r\n\r\n0.0149665\r\n\r\n\r\ndw_turkce-tgrthabertv\r\n\r\n\r\n0.3565172\r\n\r\n\r\n0.0091259\r\n\r\n\r\ndw_turkce-FOXhaber\r\n\r\n\r\n0.3527138\r\n\r\n\r\n0.0051071\r\n\r\n\r\nFOXhaber-Sabah\r\n\r\n\r\n0.3516677\r\n\r\n\r\n0.0075679\r\n\r\n\r\ncumhuriyetgzt-DikenComTr\r\n\r\n\r\n0.3508239\r\n\r\n\r\n0.0186730\r\n\r\n\r\nFOXhaber-ntv\r\n\r\n\r\n0.3504955\r\n\r\n\r\n0.0064411\r\n\r\n\r\nFOXhaber-solhaberportali\r\n\r\n\r\n0.3492678\r\n\r\n\r\n0.0056070\r\n\r\n\r\nFOXhaber-Hurriyet\r\n\r\n\r\n0.3471565\r\n\r\n\r\n0.0058412\r\n\r\n\r\nAhaber-FOXhaber\r\n\r\n\r\n0.3456809\r\n\r\n\r\n0.0046989\r\n\r\n\r\neuronews_tr-FOXhaber\r\n\r\n\r\n0.3443768\r\n\r\n\r\n0.0063400\r\n\r\n\r\ncumhuriyetgzt-FOXhaber\r\n\r\n\r\n0.3433734\r\n\r\n\r\n0.0065443\r\n\r\n\r\nFOXhaber-cnnturk\r\n\r\n\r\n0.3364997\r\n\r\n\r\n0.0028187\r\n\r\n\r\nFOXhaber-gazetesozcu\r\n\r\n\r\n0.3361759\r\n\r\n\r\n0.0082618\r\n\r\n\r\nFOXhaber-yeniakit\r\n\r\n\r\n0.3353517\r\n\r\n\r\n0.0055062\r\n\r\n\r\nDikenComTr-Hurriyet\r\n\r\n\r\n0.3345587\r\n\r\n\r\n0.0081378\r\n\r\n\r\ngazeteduvar-DikenComTr\r\n\r\n\r\n0.3342991\r\n\r\n\r\n0.0110154\r\n\r\n\r\nsputnik_TR-DikenComTr\r\n\r\n\r\n0.3337218\r\n\r\n\r\n0.0087047\r\n\r\n\r\nsolhaberportali-tgrthabertv\r\n\r\n\r\n0.3293375\r\n\r\n\r\n0.0082908\r\n\r\n\r\ntgrthabertv-gazetesozcu\r\n\r\n\r\n0.3252408\r\n\r\n\r\n0.0172451\r\n\r\n\r\nFOXhaber-gazeteduvar\r\n\r\n\r\n0.3245054\r\n\r\n\r\n0.0048890\r\n\r\n\r\ntele1comtr-FOXhaber\r\n\r\n\r\n0.3230278\r\n\r\n\r\n0.0040446\r\n\r\n\r\ndw_turkce-DikenComTr\r\n\r\n\r\n0.3216916\r\n\r\n\r\n0.0056046\r\n\r\n\r\ntele1comtr-tgrthabertv\r\n\r\n\r\n0.3199987\r\n\r\n\r\n0.0106059\r\n\r\n\r\ntele1comtr-DikenComTr\r\n\r\n\r\n0.3153672\r\n\r\n\r\n0.0089188\r\n\r\n\r\nHaberturk-DikenComTr\r\n\r\n\r\n0.3149255\r\n\r\n\r\n0.0099406\r\n\r\n\r\nDikenComTr-yeniakit\r\n\r\n\r\n0.3140351\r\n\r\n\r\n0.0098138\r\n\r\n\r\nhalktvcomtr-DikenComTr\r\n\r\n\r\n0.3060827\r\n\r\n\r\n0.0073108\r\n\r\n\r\nSabah-DikenComTr\r\n\r\n\r\n0.3049851\r\n\r\n\r\n0.0114251\r\n\r\n\r\nntv-DikenComTr\r\n\r\n\r\n0.3047723\r\n\r\n\r\n0.0062080\r\n\r\n\r\nanadoluajansi-DikenComTr\r\n\r\n\r\n0.3037381\r\n\r\n\r\n0.0090901\r\n\r\n\r\ngazeteduvar-tgrthabertv\r\n\r\n\r\n0.3028468\r\n\r\n\r\n0.0117258\r\n\r\n\r\nDikenComTr-yenisafak\r\n\r\n\r\n0.3014180\r\n\r\n\r\n0.0112483\r\n\r\n\r\ntrthaber-DikenComTr\r\n\r\n\r\n0.2979784\r\n\r\n\r\n0.0110424\r\n\r\n\r\neuronews_tr-DikenComTr\r\n\r\n\r\n0.2971398\r\n\r\n\r\n0.0085442\r\n\r\n\r\nFOXhaber-tgrthabertv\r\n\r\n\r\n0.2853207\r\n\r\n\r\n0.0239892\r\n\r\n\r\nDikenComTr-cnnturk\r\n\r\n\r\n0.2845894\r\n\r\n\r\n0.0038484\r\n\r\n\r\nAhaber-DikenComTr\r\n\r\n\r\n0.2715798\r\n\r\n\r\n0.0047246\r\n\r\n\r\nFOXhaber-DikenComTr\r\n\r\n\r\n0.2178037\r\n\r\n\r\n0.0015388\r\n\r\n\r\nDikenComTr-tgrthabertv\r\n\r\n\r\n0.1910289\r\n\r\n\r\n0.0028210\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-06-12-post12/post12_files/figure-html5/unnamed-chunk-16-1.png",
    "last_modified": "2022-06-12T17:28:26+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-06-11-post11/",
    "title": "JSON FormatÄ±ndaki Veriye UlaÅŸmak: Ä°BB WiFi Yeni KullanÄ±cÄ± Verisi",
    "description": "Ä°BB AÃ§Ä±k Veri PortalÄ±'ndaki JSON formatÄ±ndaki bir veri setinin Ã§ekilmesi ve haritalandÄ±rÄ±lmasÄ±.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-06-11",
    "categories": [
      "Web",
      "Map"
    ],
    "contents": "\r\n2020 yÄ±lÄ±nÄ±n Ocak ayÄ±nda Ä°BB, AÃ§Ä±k Veri PortalÄ±â€™nÄ± hizmete\r\nsundu. GeÃ§en sÃ¼rede 253 veri seti paylaÅŸmÄ±ÅŸlar. Bu veri setlerinin Ã§oÄŸu\r\nxlsx, csv gibi formatlardan oluÅŸuyor. Her ne kadar bu formatlar yaygÄ±n\r\nolarak kullanÄ±lsa da direkt web Ã¼zerinden verilere ulaÅŸabileceÄŸimiz\r\nyollar da var. Daha Ã§ok kullanÄ±lmasÄ± dileÄŸiyle demek isterim.\r\nBu uygulamada hem JSON formatÄ±nÄ± tanÄ±yacaÄŸÄ±z hem de Ã§ektiÄŸimiz\r\nveriler Ã¼zerinden bir haritalandÄ±rma yapacaÄŸÄ±z.\r\nUygulamaya konu Ä°BB WiFi Yeni KullanÄ±cÄ± Verisi, Ä°stanbul BÃ¼yÃ¼k\r\nÅžehir Belediyesi tarafÄ±ndan saÄŸlanan kablosuz internet hizmetini\r\nkullanan kullanÄ±cÄ± verilerini iÃ§ermektedir. Ä°ÅŸbu veri kaynaÄŸÄ±nÄ±n\r\niÃ§erisinde, Abonelik tarihi, Abone olunan ilÃ§e, Abonenin Yerli/YabancÄ±,\r\nAbone olunan lokasyon bilgisi ve kullanÄ±cÄ± sayÄ±sÄ± bilgilerini\r\niÃ§erir. -Ä°BB\r\nBu veri setinin 6 tane deÄŸiÅŸkeni bulunmaktadÄ±r.\r\nSUBSCRIPTION_DATE: AboneliÄŸin gerÃ§ekleÅŸtiÄŸi tarih bilgisini\r\niÃ§erir.\r\nSUBSCRIPTION_COUNTY: AboneliÄŸin gerÃ§ekleÅŸtiÄŸi ilÃ§e bilgisini\r\niÃ§erir.\r\nSUBSCRIBER_DOMESTIC_FOREIGN: Abonenin TÃ¼rk vatandaÅŸÄ± ise yerli,\r\ndeÄŸilse yabancÄ± bilgisini iÃ§erir.\r\nLONGITUDE: AboneliÄŸin gerÃ§ekleÅŸtiÄŸi boylam bilgisini\r\niÃ§erir.\r\nLATITUDE: AboneliÄŸin gerÃ§ekleÅŸtiÄŸi enlem bilgisini\r\niÃ§erir.\r\nNUMBER_OF_SUBSCRIBER: Ä°lgili tarihteki abone sayÄ±sÄ± bilgisini\r\niÃ§erir.\r\nVeri API butonuna tÄ±klarsak eÄŸer karÅŸÄ±mÄ±za aÅŸaÄŸÄ±daki ekran\r\nÃ§Ä±kacaktÄ±r.\r\n\r\nAPI, iki yazÄ±lÄ±m ve bir sunucunun olduÄŸu yerde baÄŸlantÄ± kurma gÃ¶revi\r\nÃ¼stlenen bir protokoldÃ¼r. Biz bu APIâ€™Ä± kullanarak talebimizi sunucuya\r\naktarÄ±yoruz. Talebi alan sunucu kaynaÄŸa baÅŸvuruyor. BaÅŸvurduÄŸu kaynak\r\nsunucuya geri dÃ¶nÃ¼ÅŸ saÄŸlÄ±yor. Sunucu gelen bu geri dÃ¶nÃ¼ÅŸÃ¼ API ile\r\nkullanÄ±cÄ±ya iletiyor.\r\nhttps://www.altexsoft.com/blog/engineering/what-is-api-definition-types-specifications-documentation/Endpointler, API Ã¼zerinde belli bir amaca yÃ¶nelik oluÅŸturulmuÅŸ\r\nmetotlardÄ±r.\r\nÄ°lk gÃ¶rselde Sorgulama baÅŸlÄ±ÄŸÄ±nÄ± gÃ¶rÃ¼yoruz. Buraya tÄ±klarsak\r\neÄŸer OData Ã¶rneÄŸi (ilk 5 sonuÃ§, OData JSONâ€™Ä± olarak dÃ¶n) alt\r\nbaÅŸlÄ±ÄŸÄ±nÄ± gÃ¶receÄŸiz. Open Data Protocol anlamÄ±na gelen OData, veri\r\nkaynaklarÄ±na HTTP (sunucu ve istemci arasÄ±ndaki haberleÅŸme protokolÃ¼)\r\nÃ¼zerinden sorgu atÄ±lmasÄ±nÄ± saÄŸlar. Yani HTTP tabanlÄ± olmasÄ±, tÃ¼m\r\nsorgularÄ±n url (web sitesi eriÅŸiminde kullanÄ±lan adres) Ã¼zerinden\r\ngerÃ§ekleÅŸtirilmesidir.\r\nSon olarak, JavaScript Object Notationâ€™Ä±n kÄ±saltmasÄ± olan JSON,\r\nverileri depolamak ve veri alÄ±ÅŸveriÅŸi yapmak iÃ§in kullanÄ±lan kolay ve\r\nhafif bir yapÄ±dÄ±r. JSON, veriyi okuyabilmemizi saÄŸlar. NasÄ±l?\r\nGelin Râ€™da Ã¶rnek bir JSON yapÄ±sÄ± oluÅŸturalÄ±m. Bunun iÃ§in\r\njsonlite paketini kullanacaÄŸÄ±z. rjson da kullandÄ±ÄŸÄ±m\r\npaketler arasÄ±ndadÄ±r.\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(leaflet) # harita\r\nlibrary(httr) # API\r\n\r\n\r\n\r\n\r\n\r\nlibrary(jsonlite) # JSON\r\n\r\nid <- c(100,101,102)\r\ntitle <- c(\"X\",\"Y\",\"Z\")\r\n\r\ndf <- data.frame(id, title)\r\nsomedata <- data.frame(Category_A = c(\"1\",\"0\",\"0\"),\r\n                       Category_B = c(\"0\",\"0\",\"1\"),\r\n                       Category_C = c(\"1\",\"1\",\"1\"))\r\ndf$somedata <- somedata\r\n\r\ntoJSON(df, pretty = TRUE)\r\n\r\n\r\n[\r\n  {\r\n    \"id\": 100,\r\n    \"title\": \"X\",\r\n    \"somedata\": {\r\n      \"Category_A\": \"1\",\r\n      \"Category_B\": \"0\",\r\n      \"Category_C\": \"1\"\r\n    }\r\n  },\r\n  {\r\n    \"id\": 101,\r\n    \"title\": \"Y\",\r\n    \"somedata\": {\r\n      \"Category_A\": \"0\",\r\n      \"Category_B\": \"0\",\r\n      \"Category_C\": \"1\"\r\n    }\r\n  },\r\n  {\r\n    \"id\": 102,\r\n    \"title\": \"Z\",\r\n    \"somedata\": {\r\n      \"Category_A\": \"0\",\r\n      \"Category_B\": \"1\",\r\n      \"Category_C\": \"1\"\r\n    }\r\n  }\r\n] \r\n\r\nAPI ile Ã§alÄ±ÅŸÄ±rken httr paketini kullanacaÄŸÄ±z.\r\nÄ°lk fonksiyon GET(), veri Ã§ekmek iÃ§in kullanÄ±lÄ±r.\r\n\r\n\r\nres <- GET(\r\n  url = \"https://data.ibb.gov.tr/en/datastore/odata3.0/12f5bc23-224a-43cb-b60d-3f36f83ffd33?$format=json\"\r\n)\r\n\r\n\r\n\r\nYukarÄ±da oluÅŸturduÄŸumuz res deÄŸiÅŸkeni (response), API\r\nsunucusunun isteÄŸimize verdiÄŸi yanÄ±tÄ± iÃ§erir.\r\n\r\n\r\nres\r\n\r\n\r\nResponse [https://data.ibb.gov.tr/en/datastore/odata3.0/12f5bc23-224a-43cb-b60d-3f36f83ffd33?$format=json]\r\n  Date: 2022-06-11 11:54\r\n  Status: 200\r\n  Content-Type: text/html; charset=utf-8\r\n  Size: 92.3 kB\r\n\r\nStatusâ€™Ä±n 200 olmasÄ± yanÄ±tÄ±n baÅŸarÄ±lÄ± olduÄŸunu gÃ¶sterir.\r\nYani, istemci ile sunucu arasÄ±ndaki iletiÅŸim herhangi bir hata olmadan\r\ngerÃ§ekleÅŸmiÅŸtir.\r\nhttps://dev.to/bisrategebriel/http-status-codes-101-6jhÄ°Ã§eriÄŸi aÅŸaÄŸÄ±daki gibi JSON formatÄ±na Ã§evirmemiz gerekiyor.\r\n\r\n\r\n# rawToChar(res$content)\r\n\r\n\r\n\r\nHer ne kadar daÄŸÄ±nÄ±k gÃ¶rÃ¼nse de aslÄ±nda JSON formatÄ±na Ã§evirmiÅŸ olduk\r\nancak bu format character yapÄ±sÄ±nda oldu. Bu formatÄ± list yapÄ±sÄ±na\r\nÃ§evirebiliriz.\r\n\r\n\r\ndt <- fromJSON(rawToChar(res$content))\r\nnames(dt)\r\n\r\n\r\n[1] \"odata.metadata\" \"value\"         \r\n\r\nÄ°htiyacÄ±mÄ±z olan veriler valueâ€™nun iÃ§indedir. Koordinat\r\nbazlÄ± haritalandÄ±rma yapacaÄŸÄ±mÄ±z iÃ§in kullanacaÄŸÄ±mÄ±z deÄŸiÅŸkenler\r\nSUBSCRIBER_DOMESTIC_FOREIGN, LONGITUDE, LATITUDE ve NUMBER_OF_SUBSCRIBER\r\nolacaktÄ±r.\r\n\r\n\r\nmaster <- dt$value\r\n\r\n\r\n\r\n\r\n\r\nSUBSCRIBER_DOMESTIC_FOREIGN\r\n\r\n\r\nLONGITUDE\r\n\r\n\r\nLATITUDE\r\n\r\n\r\nNUMBER_OF_SUBSCRIBER\r\n\r\n\r\nYabancÃ„Â±\r\n\r\n\r\n29.02325\r\n\r\n\r\n40.99270\r\n\r\n\r\n1\r\n\r\n\r\nYerli\r\n\r\n\r\n29.10552\r\n\r\n\r\n41.01701\r\n\r\n\r\n2\r\n\r\n\r\nYerli\r\n\r\n\r\n29.08863\r\n\r\n\r\n40.95404\r\n\r\n\r\n2\r\n\r\n\r\nYerli\r\n\r\n\r\n29.09082\r\n\r\n\r\n41.24324\r\n\r\n\r\n2\r\n\r\n\r\nYerli\r\n\r\n\r\n29.14665\r\n\r\n\r\n40.90128\r\n\r\n\r\n1\r\n\r\n\r\nYerli\r\n\r\n\r\n28.65662\r\n\r\n\r\n41.00984\r\n\r\n\r\n1\r\n\r\n\r\nYerli\r\n\r\n\r\n29.11825\r\n\r\n\r\n41.04074\r\n\r\n\r\n32\r\n\r\n\r\nYerli\r\n\r\n\r\n28.94929\r\n\r\n\r\n41.01124\r\n\r\n\r\n3\r\n\r\n\r\nYerli\r\n\r\n\r\n28.72508\r\n\r\n\r\n40.98418\r\n\r\n\r\n2\r\n\r\n\r\nYabancÃ„Â±\r\n\r\n\r\n28.97837\r\n\r\n\r\n41.00851\r\n\r\n\r\n2\r\n\r\n\r\nBoom!\r\nKÃ¼Ã§Ã¼k bir dÃ¼zeltme yapmamÄ±z gerekiyor. SUBSCRIBER_DOMESTIC_FOREIGN\r\ndeÄŸiÅŸkenine ait deÄŸerlerde YabancÄ± yerine YabancÃ„Â± yazÄ±lmÄ±ÅŸ. Bunu\r\ngsub() fonksiyonu ile aÅŸaÄŸÄ±daki gibi dÃ¼zeltebiliriz.\r\n\r\n\r\nmaster <- master %>% \r\n  mutate(\r\n    SUBSCRIBER_DOMESTIC_FOREIGN = gsub(\"YabancÃ„Â±\",\"YabancÄ±\",SUBSCRIBER_DOMESTIC_FOREIGN)\r\n  )\r\n\r\n\r\n\r\n\r\n\r\nSUBSCRIBER_DOMESTIC_FOREIGN\r\n\r\n\r\nLONGITUDE\r\n\r\n\r\nLATITUDE\r\n\r\n\r\nNUMBER_OF_SUBSCRIBER\r\n\r\n\r\nYabancÄ±\r\n\r\n\r\n29.02325\r\n\r\n\r\n40.99270\r\n\r\n\r\n1\r\n\r\n\r\nYerli\r\n\r\n\r\n29.10552\r\n\r\n\r\n41.01701\r\n\r\n\r\n2\r\n\r\n\r\nYerli\r\n\r\n\r\n29.08863\r\n\r\n\r\n40.95404\r\n\r\n\r\n2\r\n\r\n\r\nYerli\r\n\r\n\r\n29.09082\r\n\r\n\r\n41.24324\r\n\r\n\r\n2\r\n\r\n\r\nYerli\r\n\r\n\r\n29.14665\r\n\r\n\r\n40.90128\r\n\r\n\r\n1\r\n\r\n\r\nYerli\r\n\r\n\r\n28.65662\r\n\r\n\r\n41.00984\r\n\r\n\r\n1\r\n\r\n\r\nYerli\r\n\r\n\r\n29.11825\r\n\r\n\r\n41.04074\r\n\r\n\r\n32\r\n\r\n\r\nYerli\r\n\r\n\r\n28.94929\r\n\r\n\r\n41.01124\r\n\r\n\r\n3\r\n\r\n\r\nYerli\r\n\r\n\r\n28.72508\r\n\r\n\r\n40.98418\r\n\r\n\r\n2\r\n\r\n\r\nYabancÄ±\r\n\r\n\r\n28.97837\r\n\r\n\r\n41.00851\r\n\r\n\r\n2\r\n\r\n\r\nHaritaya geÃ§ebiliriz.\r\nBu bÃ¶lÃ¼mde JavaScriptâ€™in bir kÃ¼tÃ¼phanesi olan ve web tabanlÄ±\r\ninteraktif haritalamada tercih edilebilecek leafletâ€™i\r\nkullanacaÄŸÄ±z. En basit haliyle aÅŸaÄŸÄ±daki gibi bir Ã¶rnek verebiliriz.\r\n\r\n\r\nleaflet() %>% \r\n  addTiles() %>% \r\n  addMarkers(lng = 32.836944, lat = 39.925, popup = \"AnÄ±tkabir\")\r\n\r\n\r\n\r\n\r\nÃ‡ektiÄŸimiz verileri artÄ±k haritaya aktarabiliriz.\r\n\r\n\r\npalet <- colorFactor(palette = c(\"gray\",\"orange\",\"red\"),\r\n                     domain = master$SUBSCRIBER_DOMESTIC_FOREIGN) # renklendirme\r\n\r\nmaster %>% \r\n  leaflet() %>% \r\n  addTiles() %>% \r\n  addProviderTiles(provider = providers$CartoDB.DarkMatterNoLabels) %>% # harita tipi\r\n  addCircles(lng = ~LONGITUDE,\r\n             lat = ~LATITUDE,\r\n             weight = 3,\r\n             color = ~palet(SUBSCRIBER_DOMESTIC_FOREIGN),\r\n             popup=paste(\"Abonelik Tarihi:\", master$SUBSCRIPTION_DATE, \"<br>\",\r\n                         \"Abone Tipi:\", master$SUBSCRIBER_DOMESTIC_FOREIGN, \"<br>\", \r\n                         \"Abone SayÄ±sÄ±:\", master$NUMBER_OF_SUBSCRIBER, \"<br>\")) %>% # nokta\r\n  addLegend(position = \"bottomright\",\r\n            pal = palet,\r\n            values = master$SUBSCRIBER_DOMESTIC_FOREIGN,\r\n            title = \"\",\r\n            opacity = 1) # lejant\r\n\r\n\r\n\r\n\r\nYukarÄ±daki harita zoomlanabilir; haritadan noktalarÄ±n Ã¼zerine\r\ntÄ±klanarak bilgi alÄ±nabilir.\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-06-11-post11/wifi.png",
    "last_modified": "2022-06-11T14:54:18+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-06-08-post10/",
    "title": "TCMB BaÅŸkanlarÄ±nÄ±n Kendi DÃ¶neminde DÃ¶viz Kuru Volatilitesi ve DeÄŸiÅŸimi",
    "description": "TCMB baÅŸkanlarÄ±nÄ±n kurdaki volatilite ve deÄŸiÅŸim bazlÄ± performansÄ±.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-06-08",
    "categories": [
      "Finance"
    ],
    "contents": "\r\nÃ‡alÄ±ÅŸma boyunca kurdaki deÄŸiÅŸim, eÅŸit aÄŸÄ±rlÄ±klandÄ±rÄ±lmÄ±ÅŸ volatilite\r\nve Ã¶zellikle aÃ§Ä±klayacaÄŸÄ±m eÅŸit aÄŸÄ±rlÄ±klandÄ±rÄ±lmamÄ±ÅŸ volatiliteden\r\n(EWMA) bahsedeceÄŸim.\r\nExponential Weighted Moving Average kelimelerinin kÄ±saltmasÄ±ndan\r\noluÅŸan ve Ãœssel Hareketli Ortalamalar olarak Ã§evrilen EWMA, geÃ§miÅŸ\r\nvolatilitenin ortalama hareketiyle gelecekteki volatiliteyi hesaplamak\r\niÃ§in zaman ve volatiliteyi iliÅŸkilendiren en popÃ¼ler volatilite\r\nmodellerinden birisidir. EWMAâ€™da, geÃ§miÅŸ gÃ¶zlemler Ã¼ssel olarak\r\naÄŸÄ±rlÄ±klandÄ±rÄ±lmak ile beraber yakÄ±n geÃ§miÅŸteki gÃ¶zlemlere daha Ã§ok;\r\nuzak geÃ§miÅŸteki gÃ¶zlemlere ise daha az aÄŸÄ±rlÄ±k verilir. EWMA, varlÄ±k\r\ngetirilerinin simetrik ve baÄŸÄ±msÄ±z olarak daÄŸÄ±ldÄ±ÄŸÄ± prensibi Ã¼zerine\r\nkurulmuÅŸtur.\r\nEWMA modeli ÅŸÃ¶yle yazÄ±labilir:\r\n\\(\\sigma^2_n = \\lambda\\sigma^2_{n-1} + (1 -\r\n\\lambda)u^2_{n-1}\\)\r\n\\(\\lambda\\), 0 ile 1 arasÄ±nda deÄŸer\r\nalÄ±r (\\(0 < \\lambda < 1\\)). \\(\\lambda\\) deÄŸeri 1â€™e yaklaÅŸtÄ±kÃ§a her\r\ngÃ¶zleme eÅŸit aÄŸÄ±rlÄ±k verilmesi yÃ¶nÃ¼ndeki eÄŸilim artar. \\(\\lambda = 1\\) hareketli ortalama (Moving\r\nAverage, MA) ile aynÄ±dÄ±r. DiÄŸer bir aÃ§Ä±dan, yÃ¼ksek \\(\\lambda\\) gÃ¼ncel piyasa hareketlerine daha\r\nzayÄ±f tepki demektir. LiteratÃ¼rde, gÃ¼nlÃ¼k verilerde \\(\\lambda = 0.94\\), aylÄ±k verilerde \\(\\lambda = 0.97\\) Ã¶nerilmiÅŸtir. Tabi bu\r\ndeÄŸerler deÄŸiÅŸebilmektedir.\r\n\\(\\lambda\\) dÄ±ÅŸÄ±nda modelde;\r\n\\(\\sigma^2_n:\\) BugÃ¼nÃ¼n\r\nvaryansÄ±,\r\n\\(\\sigma^2_{n-1}:\\) DÃ¼nÃ¼n\r\nvaryansÄ±,\r\n\\(u^2_{n-1}:\\) DÃ¼nÃ¼n getirisinin\r\nkaresidir.\r\nYukarÄ±da gÃ¶rdÃ¼ÄŸÃ¼mÃ¼z EWMA modelinde iki bileÅŸen vardÄ±r. \\((1-\\lambda)u^2_{n-1}\\) bileÅŸeni,\r\nvolatilitenin finansal piyasalarda meydana gelen fiyat hareketlerine\r\nkarÅŸÄ± hassasiyetini gÃ¶sterirken; \\(\\lambda\\sigma^2_{n-1}\\) bileÅŸeni ise piyasa\r\nhareketlerinden baÄŸÄ±msÄ±z olarak Ã¶nceki dÃ¶nemdeki volatilitenin cari\r\ndÃ¶nem volatilitesi Ã¼zerindeki etkisini gÃ¶stermektedir. Bu bileÅŸen aynÄ±\r\nzamanda volatilite direncidir. Buradan hareketle \\(\\lambda\\) parametresi iÃ§in ÅŸunu\r\ndiyebiliriz: Parametre 1â€™e yakÄ±n deÄŸer alÄ±rsa volatilite direnci piyasa\r\nhareketlerine baskÄ±n gelmekte; 0â€™a yakÄ±n deÄŸer alÄ±rsa piyasa hareketleri\r\nbelirleyici olmaktadÄ±r.\r\nUygulamada, TCMB baÅŸkanlarÄ± dÃ¶nemine ait USDTRY kur volatilitesini\r\nEWMA ile hesaplayacaÄŸÄ±z ki bu volatilite bir baÅŸkanÄ±n diÄŸerine\r\ndevrettiÄŸi volatilite olacak. Bunun yanÄ±nda kendi dÃ¶neminde yarattÄ±ÄŸÄ±\r\nvolatilite ile kurdaki deÄŸiÅŸimi de hesaplayacaÄŸÄ±z.\r\nVikipediâ€™den\r\naldÄ±ÄŸÄ±m baÅŸkanlar ve gÃ¶rev tarihlerine ait bilgiler aÅŸaÄŸÄ±dadÄ±r.\r\nSerdengeÃ§ti ile YÄ±lmaz arasÄ±ndaki boÅŸlukta atama ile ilgili bir veto\r\nyaÅŸanmÄ±ÅŸtÄ±r.\r\n\r\n\r\nNo\r\n\r\n\r\nGovernor\r\n\r\n\r\nStart\r\n\r\n\r\nEnd\r\n\r\n\r\n19\r\n\r\n\r\nSÃ¼reyya SerdengeÃ§ti\r\n\r\n\r\n2001-03-14\r\n\r\n\r\n2006-03-14\r\n\r\n\r\n20\r\n\r\n\r\nDurmuÅŸ YÄ±lmaz\r\n\r\n\r\n2006-04-18\r\n\r\n\r\n2011-04-13\r\n\r\n\r\n21\r\n\r\n\r\nErdem BaÅŸÃ§Ä±\r\n\r\n\r\n2011-04-14\r\n\r\n\r\n2016-04-19\r\n\r\n\r\n22\r\n\r\n\r\nMurat Ã‡etinkaya\r\n\r\n\r\n2016-04-19\r\n\r\n\r\n2019-07-06\r\n\r\n\r\n23\r\n\r\n\r\nMurat Uysal\r\n\r\n\r\n2019-07-06\r\n\r\n\r\n2020-11-07\r\n\r\n\r\n24\r\n\r\n\r\nNaci AÄŸbal\r\n\r\n\r\n2020-11-07\r\n\r\n\r\n2021-03-20\r\n\r\n\r\n25\r\n\r\n\r\nÅžahap KavcÄ±oÄŸlu\r\n\r\n\r\n2021-03-20\r\n\r\n\r\nNA\r\n\r\n\r\n7 baÅŸkan dÃ¶neminde USDTRY kur deÄŸerleri ve getirileri (\\(u_t = log(\\frac{P_t}{P_{t-1}})\\)) aÅŸaÄŸÄ±daki\r\ngibidir. Investingâ€™ten alÄ±nan verilere (post10.xlsx) GitHub\r\nhesabÄ±mdan ulaÅŸabilirsiniz.\r\n\r\n\r\n\r\nEWMA hesaplamasÄ± iÃ§in aÅŸaÄŸÄ±daki adÄ±mlar izleniyor.\r\nEn gÃ¼ncel tarihten en eski tarihe gÃ¶re sÄ±ralama yapÄ±lÄ±r. Ã–rneÄŸin,\r\n07.06.2022, 06.06.2022, 03.06.2022, â€¦ gibi.\r\nGetiriler hesaplanÄ±r. Ã–rneÄŸin, \\(log(\\frac{16.7383}{16.6135}) =\r\n0.007483889\\) getiri 07.06.2022â€™ye aittir.\r\nGetirilerin karesi alÄ±nÄ±r. Ã–rneÄŸin, \\(0.007483889^2 = 5.600859e-05\\)\r\ngibi.\r\n\\(\\lambda\\) parametresi\r\nbelirlenir. AÄŸÄ±rlÄ±klandÄ±rmada ilk aÄŸÄ±rlÄ±k \\(1\r\n- \\lambda\\) ÅŸeklinde yazÄ±lÄ±r ve sonrakiler hesaplanan aÄŸÄ±rlÄ±k ile\r\n\\(\\lambda\\)â€™nÄ±n Ã§arpÄ±mÄ± ÅŸeklinde\r\nilerletilir. Yani;\r\n\\((1-\\lambda)\\lambda^0,\r\n(1-\\lambda)\\lambda^1, (1-\\lambda)\\lambda^2, ...\\) gibi. \\(w_0\\) baÅŸlangÄ±Ã§taki aÄŸÄ±rlÄ±k; m gÃ¼n sayÄ±sÄ±\r\nolsun. ÅžÃ¶yle Ã¶zetleyebiliriz:\r\n\\(w_0\\sum_{i=0}^{\\infty}\\lambda^m\\)\r\nÃ–rneÄŸin, \\(\\lambda = 0.94\\) olsun.\r\nÄ°lk aÄŸÄ±rlÄ±k \\((1-0.94)0.94^0 = 0.06\\)\r\nolur. Ä°kinci aÄŸÄ±rlÄ±k, \\(0.94*0.06 =\r\n0.0564\\) ya da \\((1-0.94)0.94^1 =\r\n0.0564\\) olur ve bu ÅŸekilde ilerletilir.\r\nGetiri karesi ile aÄŸÄ±rlÄ±k Ã§arpÄ±lÄ±r. Ã–rneÄŸin, \\(5.600859e-05*0.06 = 3.360515e-06\\) gibi. Bu\r\nÅŸekilde elde edilen tÃ¼m deÄŸerler toplanÄ±r ve EWMA varyans deÄŸerine\r\nulaÅŸÄ±lÄ±r.\r\nÃ–nceki adÄ±mda elde edilen EWMA varyansÄ±n kare kÃ¶kÃ¼ (standart\r\nsapma) volatilite deÄŸeridir.\r\nEÅŸit aÄŸÄ±rlÄ±klandÄ±rÄ±lmamÄ±ÅŸ EWMAâ€™dan baÄŸÄ±msÄ±z olarak, eÅŸit\r\naÄŸÄ±rlÄ±klandÄ±rÄ±lmÄ±ÅŸ ÅŸekilde tarihsel volatilite iÃ§in getirilerin\r\nkaresinin ortalamasÄ±nÄ±n (varyans) karekÃ¶kÃ¼ (standart sapma) alÄ±nÄ±r.\r\nNedeni ise ÅŸudur:\r\nm tane gÃ¼n; n de varyansÄ±nÄ± hesaplamak istediÄŸimiz gÃ¼n olsun.\r\nVaryans;\r\n\\(\\sigma^2_n =\r\n\\frac{1}{m-1}\\sum_{i=1}^{m}(u_{n-i}-\\bar u)^2\\)\r\nStandart sapma (volatilite), \\(\\sqrt{\\sigma^2_n}\\) ya da \\(\\sigma_n\\) olur.\r\nYukarÄ±da yazdÄ±ÄŸÄ±mÄ±z \\(\\bar u\\), m\r\ngÃ¼nÃ¼n ortalama getirisidir. AÅŸaÄŸÄ±daki gibi yazÄ±labilir.\r\n\\(\\bar u =\r\n\\frac{1}{m}\\sum_{i=1}^{m}u_{n-i}\\)\r\nBiz ortalama getiriyi sÄ±fÄ±r bekliyoruz: \\(\\bar u = 0\\). Bu durumda varyans aÅŸaÄŸÄ±daki\r\ngibi olur.\r\n\\(\\sigma^2_n =\r\n\\frac{1}{m}\\sum_{i=1}^{m}u_{n-i}^2\\)\r\nAynÄ± ÅŸekilde, standart sapma (volatilite), \\(\\sqrt{\\sigma^2_n}\\) ya da \\(\\sigma_n\\) olur.\r\nÃ‡alÄ±ÅŸmada, \\(\\lambda\\) deÄŸeri 0.94\r\nalÄ±nmÄ±ÅŸtÄ±r.\r\n\r\n\r\n\r\nBaÅŸta da belirttiÄŸim Ã¼zere iki tane volatilite hesaplayacaÄŸÄ±z.\r\nBaÅŸkanÄ±n devrettiÄŸi volatilitede son gÃ¶rev gÃ¼nlerinin daha Ã§ok aÄŸÄ±rlÄ±ÄŸÄ±\r\nolacak. DÃ¶nemi boyunca elde ettiÄŸi volatilite de gÃ¶rev baÅŸlangÄ±Ã§ ve\r\nbitiÅŸ tarihleri arasÄ±ndaki volatilite olacak. MantÄ±ÄŸÄ±nÄ± ÅŸuna\r\ndayandÄ±rdÄ±m: EWMA yakÄ±n dÃ¶neme aÄŸÄ±rlÄ±k verdiÄŸi iÃ§in bu, gÃ¶revin bitiÅŸ\r\ntarihine doÄŸru aÄŸÄ±rlÄ±klandÄ±rmanÄ±n artmasÄ± demektir. EÅŸit\r\naÄŸÄ±rlÄ±klandÄ±rÄ±lmÄ±ÅŸta ise gÃ¶revi boyunca elde ettiÄŸi volatilite elde\r\nedilecek.\r\n\r\n\r\n\r\n\r\n\r\n\r\nGÃ¶revini en yÃ¼ksek volatilite ile devreden Naci AÄŸbal; en dÃ¼ÅŸÃ¼k\r\nvolatilite ile devreden Erdem BaÅŸÃ§Ä± olmuÅŸtur.\r\nGÃ¶rev sÃ¼resi boyunca en yÃ¼ksek volatilite Åžahap KavcÄ±oÄŸlu; en dÃ¼ÅŸÃ¼k\r\nvolatilite Murat Uysal dÃ¶neminde olmuÅŸtur.\r\nHer iki volatilitenin ortalamasÄ±nÄ± aldÄ±ÄŸÄ±mÄ±zda ise sÄ±ralama:\r\n\r\n\r\n\r\nSon olarak, baÅŸkanlarÄ±n dÃ¶neminde elde ettiÄŸi volatilite ile kuru\r\naldÄ±klarÄ± ve getirdikleri yerin seviyesine (deÄŸiÅŸim) bakalÄ±m.\r\n\r\n\r\n\r\nSon 7 baÅŸkan arasÄ±nda kuru aldÄ±ÄŸÄ± seviyenin aÅŸaÄŸÄ±sÄ±nda bÄ±rakan tek\r\nisim Naci AÄŸbal olmuÅŸ. Kur en Ã§ok Åžahap KavcÄ±oÄŸlu dÃ¶neminde artmÄ±ÅŸ.\r\nBu tip performans deÄŸerlendirmelerinde TCMBâ€™nin baÄŸÄ±msÄ±zlÄ±ÄŸÄ± Ã¶nem\r\nkazanmaktadÄ±r diye dÃ¼ÅŸÃ¼nÃ¼yorum. Ã‡Ã¼nkÃ¼ Ã§alÄ±ÅŸma isim bazlÄ± performansa\r\nbakÄ±yor ve aslÄ±nda baÄŸÄ±msÄ±zlÄ±ÄŸÄ± kusursuz varsayÄ±yor. Ãœzerinizde bir\r\nbaskÄ± varsa (elinizdeki araÃ§larÄ± en iyi ÅŸekilde kullanÄ±p kararlarÄ± bu\r\nÅŸekilde alma isteÄŸinizin olduÄŸu birisiniz) kendinizi gÃ¶steremezsiniz ki\r\nErdem BaÅŸÃ§Ä±â€™dan sonra (BaÅŸÃ§Ä±â€™da da olmuÅŸtu) Merkezâ€™in Ã¼zerindeki artan\r\nbaskÄ± ortadadÄ±r.\r\nÃ‡alÄ±ÅŸmanÄ±n R kodlarÄ±na aÅŸaÄŸÄ±dan ulaÅŸÄ±labilir.\r\n\r\n\r\nlibrary(rvest)\r\nlibrary(tidyverse)\r\nlibrary(lubridate)\r\n\r\nurl <- \"https://tr.wikipedia.org/wiki/T%C3%BCrkiye_Cumhuriyet_Merkez_Bankas%C4%B1_ba%C5%9Fkanlar%C4%B1_listesi\"\r\n\r\ncbrt_governor <- read_html(url) %>% \r\n  html_table() %>% \r\n  .[[2]] %>% \r\n  slice(-nrow(.)) %>% \r\n  rename(\"No\"=1,\"Governor\"=2,\"Start\"=3,\"End\"=4) %>% \r\n  mutate(No = as.numeric(No),\r\n         Start = dmy(Start),\r\n         End = dmy(End)) %>% \r\n  filter(No >= 19)\r\n\r\nusdtry <- readxl::read_excel(\"data.xlsx\") %>% \r\n  mutate(\r\n    Date = as.Date(Date),\r\n    Governor = case_when(\r\n      Date <= cbrt_governor$End[1] ~ \"SÃ¼reyya SerdengeÃ§ti\",\r\n      Date >= cbrt_governor$Start[2] & Date <= cbrt_governor$End[2] ~ \"DurmuÅŸ YÄ±lmaz\",\r\n      Date >= cbrt_governor$Start[3] & Date <= cbrt_governor$End[3] ~ \"Erdem BaÅŸÃ§Ä±\",\r\n      Date >= cbrt_governor$Start[4] & Date <= cbrt_governor$End[4] ~ \"Murat Ã‡etinkaya\",\r\n      Date >= cbrt_governor$Start[5] & Date <= cbrt_governor$End[5] ~ \"Murat Uysal\",\r\n      Date >= cbrt_governor$Start[6] & Date <= cbrt_governor$End[6] ~ \"Naci AÄŸbal\",\r\n      Date >= cbrt_governor$Start[7] ~ \"Åžahap KavcÄ±oÄŸlu\"\r\n    ),\r\n    LClose = log(Close),\r\n    Return = lag(log(lead(Close)/Close))\r\n  ) %>% \r\n  na.omit()\r\n\r\nggplot(usdtry, aes(x = Date, y = LClose)) +\r\n  geom_line() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.subtitle = element_text(face = \"italic\"),\r\n        plot.caption = element_text(face = \"italic\")) +\r\n  labs(title = \"USDTRY\",\r\n       subtitle = \"14.03.2001-07.06.2022\",\r\n       caption = \"Verilerin logaritmasÄ± alÄ±nmÄ±ÅŸtÄ±r.\") +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[1],\r\n           xmax = cbrt_governor$End[1],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"red\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[2],\r\n           xmax = cbrt_governor$End[2],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"blue\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[3],\r\n           xmax = cbrt_governor$End[3],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"red\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[4],\r\n           xmax = cbrt_governor$End[4],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"blue\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[5],\r\n           xmax = cbrt_governor$End[5],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"red\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[6],\r\n           xmax = cbrt_governor$End[6],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"blue\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[7],\r\n           xmax = as.Date(\"2022-06-07\"),\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"red\",\r\n           alpha = .3)\r\n\r\nggplot(usdtry, aes(x = Date, y = Return)) +\r\n  geom_line() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.subtitle = element_text(face = \"italic\"),\r\n        plot.caption = element_text(face = \"italic\")) +\r\n  labs(title = \"USDTRY\",\r\n       subtitle = \"14.03.2001-07.06.2022\",\r\n       caption = \"Logaritmik getiridir.\") +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[1],\r\n           xmax = cbrt_governor$End[1],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"red\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[2],\r\n           xmax = cbrt_governor$End[2],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"blue\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[3],\r\n           xmax = cbrt_governor$End[3],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"red\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[4],\r\n           xmax = cbrt_governor$End[4],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"blue\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[5],\r\n           xmax = cbrt_governor$End[5],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"red\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[6],\r\n           xmax = cbrt_governor$End[6],\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"blue\",\r\n           alpha = .3) +\r\n  annotate(geom = \"rect\",\r\n           xmin = cbrt_governor$Start[7],\r\n           xmax = as.Date(\"2022-06-07\"),\r\n           ymin = -Inf,\r\n           ymax = Inf,\r\n           fill = \"red\",\r\n           alpha = .3)\r\n\r\ncurr <- usdtry %>% \r\n  select(Date,Governor,Return) %>% \r\n  arrange(desc(Date))\r\n\r\nlambda <- 0.94\r\n\r\ncbrt_governor_vol <- data.frame(\r\n  \"Governor\" = cbrt_governor$Governor,\r\n  \"UnequalWeighted\" = NA,\r\n  \"EqualWeighted\" = NA\r\n)\r\n\r\nfor(i in 1:nrow(cbrt_governor_vol)){\r\n  \r\n  filteredgov <- curr %>% \r\n    filter(Governor == cbrt_governor$Governor[i]) %>% \r\n    slice(-1) %>% \r\n    mutate(\r\n      Return2 = Return^2,\r\n      t = seq(1,nrow(.),1),\r\n      Weight = (1 - lambda) * lambda^(t-1),\r\n      Return2Weight = Return2 * Weight\r\n  ) %>% \r\n    arrange(Date)\r\n  \r\n  unequal_vol <- sqrt(sum(filteredgov$Return2Weight)) * 100\r\n  equal_vol <- sqrt(mean(filteredgov$Return2))\r\n  \r\n  cbrt_governor_vol$UnequalWeighted[i] <- unequal_vol\r\n  cbrt_governor_vol$EqualWeighted[i] <- equal_vol\r\n  \r\n}\r\n\r\nggplot(cbrt_governor_vol, aes(x = UnequalWeighted, y = EqualWeighted)) +\r\n  geom_point(size = 5, alpha = .2) +\r\n  geom_text(aes(label = Governor), vjust = -0.2, hjust = 0.47, size = 4) +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", hjust = 0.5),\r\n        plot.caption = element_text(face = \"italic\", size = 7)) +\r\n  labs(\r\n    title = \"TCMB BaÅŸkanlarÄ±nÄ±n Kendi DÃ¶neminde DÃ¶viz Kuru Volatilitesi\",\r\n    x = \"DevrettiÄŸi Volatilite (EWMA)\",\r\n    y = \"GÃ¶rev DÃ¶nemindeki Volatilite (Standart Sapma)\",\r\n    caption = \"KavcÄ±oÄŸlu'nun gÃ¶revi devrettiÄŸi varsayÄ±lmÄ±ÅŸtÄ±r.\"\r\n  ) +\r\n  scale_x_continuous(limits = c(min(cbrt_governor_vol$UnequalWeighted-0.1),\r\n                                max(cbrt_governor_vol$UnequalWeighted+0.1)))\r\n\r\ncbrt_governor_vol <- cbrt_governor_vol %>% \r\n  mutate(AvgVol = (UnequalWeighted + EqualWeighted)/2)\r\n\r\nggplot(cbrt_governor_vol, aes(x = reorder(Governor, AvgVol), y = AvgVol, fill = AvgVol)) +\r\n  geom_col() +\r\n  coord_flip() +\r\n  theme_minimal() +\r\n  theme(legend.position = \"none\",\r\n        axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.caption = element_text(face = \"italic\", size = 7)) +\r\n  scale_fill_gradient(low = \"orange\", high = \"red\") +\r\n  labs(title = \"Ortalama Volatilite*\",\r\n       caption = \"*DevrettiÄŸi volatilite ile dÃ¶neminde elde ettiÄŸi volatilite ortalamasÄ±dÄ±r.\")\r\n\r\nret_vol <- usdtry %>% \r\n  select(Date,Close,Governor) %>% \r\n  group_by(Governor) %>% \r\n  filter(Date == min(Date) | Date == max(Date)) %>% \r\n  mutate(\r\n    Return = log(lead(Close)/Close)\r\n  ) %>% \r\n  select(Governor,Return) %>% \r\n  na.omit() %>% \r\n  left_join(cbrt_governor_vol, by = \"Governor\")\r\n\r\nggplot(ret_vol, aes(x = Return, y = EqualWeighted)) +\r\n  geom_point(size = 5, alpha = .2) +\r\n  geom_vline(xintercept = 0, linetype = \"dashed\") +\r\n  geom_text(aes(label = Governor), vjust = -0.2, hjust = 0.47, size = 4) +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", hjust = 0.5),\r\n        plot.caption = element_text(face = \"italic\", size = 7)) +\r\n  labs(\r\n    title = \"TCMB BaÅŸkanlarÄ±nÄ±n Kendi DÃ¶neminde Kur DeÄŸiÅŸimi ve Volatilite\",\r\n    x = \"Kur DeÄŸiÅŸimi (Log DeÄŸiÅŸim)\",\r\n    y = \"GÃ¶rev DÃ¶nemindeki Volatilite (Standart Sapma)\",\r\n    caption = \"KavcÄ±oÄŸlu'nun gÃ¶revi devrettiÄŸi varsayÄ±lmÄ±ÅŸtÄ±r.\"\r\n  ) +\r\n  scale_x_continuous(limits = c(min(ret_vol$Return-0.1),\r\n                                max(ret_vol$Return+0.1)))\r\n\r\n\r\n\r\nYararlandÄ±ÄŸÄ±m Kaynaklar:\r\nFinansal Ekonometri; N.Ã‡.Yavuz\r\nTÃ¼rev Piyasalar ve YapÄ±landÄ±rÄ±lmÄ±ÅŸ ÃœrÃ¼nler; M.B.AkÃ§ay, M.Kasap,\r\nT.DoÄŸuÃ§, G.Kasap\r\nVolatility:\r\nExponentially weighted moving average, EWMA (FRM T2-22)\r\nMeasuring\r\nand Monitoring Volatility\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-06-08-post10/post10_files/figure-html5/unnamed-chunk-7-1.png",
    "last_modified": "2022-06-08T19:20:12+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-06-05-post9/",
    "title": "Bir SÃ¼recin Otomatize Edilmesi: Temel GÄ±da FiyatlarÄ±nÄ±n Takibi",
    "description": "Fiyat algÄ±sÄ±nÄ±n kaybolduÄŸu bir ortamda temel gÄ±da fiyatlarÄ±nÄ±n takibini otomatikleÅŸtirmek.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-06-05",
    "categories": [
      "Automation"
    ],
    "contents": "\r\nMayÄ±s 2022 verilerine gÃ¶re TÃ¼rkiyeâ€™de enflasyon TÃœÄ°Kâ€™e gÃ¶re 73.5%;\r\nENAGâ€™a gÃ¶re ise 160.76% oldu. Trading\r\nEconomics verilerine gÃ¶re dÃ¼nyada 6., Avrupaâ€™da 1.\r\nsÄ±radayÄ±z.\r\nRâ€™da bir sÃ¼reci otomatize etmeyi eÄŸlenceli bir konu ile anlatmak\r\nisterdim ancak iÃ§inde bulunduÄŸumuz ortam maalesef buna izin\r\nvermiyor.\r\nBu uygulamada, Cimriâ€™den temel gÄ±da kategorisini baz alarak aÅŸaÄŸÄ±daki\r\niÅŸlemleri yapacaÄŸÄ±z.\r\nWeb kazÄ±ma ile istenen kategoride verilerin Ã§ekilmesi (web kazÄ±ma\r\nile ilgili temel bilginizin olduÄŸunu varsayacaÄŸÄ±m).\r\nÃ‡ekilen verilerin veri tabanÄ±na kaydedilmesi.\r\nGÃ¼ncel veriler ile bir Ã¶nceki zamana ait verilerin\r\nkarÅŸÄ±laÅŸtÄ±rÄ±lmasÄ± ve karÅŸÄ±laÅŸtÄ±rmanÄ±n kaydedilmesi.\r\nTÃ¼m bu sÃ¼recin otomatik olarak yapÄ±lmasÄ± iÃ§in gÃ¶rev\r\nzamanlayÄ±cÄ±nÄ±n ayarlanmasÄ± ve scriptâ€™in belli bir frekansta\r\nÃ§alÄ±ÅŸtÄ±rÄ±lmasÄ±.\r\nCimri.com, farklÄ± Ã§evrimiÃ§i alÄ±ÅŸveriÅŸ sitelerinde yer alan\r\nÃ¼rÃ¼nleri listeleyen ve aralarÄ±nda karÅŸÄ±laÅŸtÄ±rmalar yapan Ä°stanbul,\r\nTÃ¼rkiye merkezli web sitesidir. -Vikipedi\r\n\r\n\r\nlibrary(rvest) # web kazÄ±ma\r\nlibrary(DBI); library(RSQLite) # sqlite\r\nlibrary(taskscheduleR) # gÃ¶rev zamanlayÄ±cÄ±\r\nlibrary(openxlsx) # excel olarak kaydetmek iÃ§in\r\nlibrary(tidyverse)\r\nlibrary(lubridate)\r\nlibrary(kableExtra) # zorunlu deÄŸil\r\n\r\n\r\n\r\nWeb kazÄ±ma ile istenen kategoride verilerin\r\nÃ§ekilmesi\r\nAÅŸaÄŸÄ±daki linkâ€™i kullanarak verileri Ã§ekeceÄŸiz.\r\n\r\n\r\nurl <- \"https://www.cimri.com/market/temel-gida\"\r\n\r\n\r\n\r\nTemel gÄ±da kategorisi 50 sayfadan oluÅŸuyor. EÄŸer linkâ€™in yanÄ±na\r\n?page=1 yazarsak bu ilk sayfa olduÄŸu anlamÄ±na gelecek.\r\nYani;\r\n\r\n\r\nurl <- \"https://www.cimri.com/market/temel-gida?page=1\"\r\n\r\n\r\n\r\nÄ°lk sayfada yer alan Ã¼rÃ¼nleri ve fiyatlarÄ± Ã§ekelim.\r\n\r\n\r\n# Ã¼rÃ¼n\r\nitem <- read_html(url) %>% \r\n  html_nodes(\"div.ProductCard_productName__35zi5\") %>% \r\n  html_text()\r\n\r\n# fiyat\r\nprice <- read_html(url) %>% \r\n  html_nodes(\"div.ProductCard_footer__Fc9OL span.ProductCard_price__10UHp\") %>% \r\n  html_text()\r\n\r\ndf <- data.frame(\r\n  Item = item,\r\n  Price = price\r\n)\r\n\r\n\r\n\r\nÄ°lk sayfada yer alan 32 Ã¼rÃ¼nÃ¼n ilk 10â€™u aÅŸaÄŸÄ±dadÄ±r.\r\n\r\n\r\nItem\r\n\r\n\r\nPrice\r\n\r\n\r\nBiryaÄŸ 5 lt AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n175,00 TL\r\n\r\n\r\nKomili Riviera SÄ±cak Lezzetler 5 lt ZeytinyaÄŸÄ±\r\n\r\n\r\n328,06 TL\r\n\r\n\r\nYudum 5 lt Teneke AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n192,50 TL\r\n\r\n\r\nBizim 5 lt Teneke AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n189,90 TL\r\n\r\n\r\nVera 5 lt Pet AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n145,00 TL\r\n\r\n\r\nYudum 1 lt AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n42,90 TL\r\n\r\n\r\nYudum 18 lt AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n739,95 TL\r\n\r\n\r\nSinangil 5 kg Un\r\n\r\n\r\n52,90 TL\r\n\r\n\r\nTorku AltÄ±n Ekin 5 lt AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n175,00 TL\r\n\r\n\r\nOna 5 lt AyÃ§iÃ§ek Teneke YaÄŸÄ±\r\n\r\n\r\n164,80 TL\r\n\r\n\r\nÄ°lk sayfayÄ± Ã§ektiÄŸimize gÃ¶re artÄ±k diÄŸer sayfalarÄ± da bir dÃ¶ngÃ¼ ile\r\nÃ§ekebiliriz (total sayfa sayÄ±sÄ±: 50). Son sayfa sayÄ±sÄ±nÄ± belirlemeyi\r\ndinamik hale getirebiliriz.\r\n\r\n\r\n# son sayfa\r\nlastPage <- read_html(url) %>% \r\n  html_nodes(\"div.Pagination_pagination__6kvLO li\") %>% \r\n  html_text()\r\n\r\nlastPage <- as.numeric(tail(lastPage[lastPage != \"\"], 1))\r\n\r\nurls <- str_c(\r\n  \"https://www.cimri.com/market/temel-gida?page=\",\r\n  seq(1,lastPage,1)\r\n) # tÃ¼m linkler\r\n\r\n\r\n\r\nDÃ¶ngÃ¼ye geÃ§ebiliriz.\r\n\r\n\r\n######### global #########\r\n\r\nmaster <- data.frame()\r\ntime <- format(Sys.time(), \"%Y-%m-%d %H:%M:%S\")\r\n\r\n##########################\r\n\r\nfor(i in 1:2){ # 1:2 yazdÄ±m ancak siz 1:lastPage yazabilirsiniz\r\n  \r\n  thepage <- read_html(urls[i]) # sayfa okundu\r\n  \r\n  # Ã¼rÃ¼n\r\n  item <- thepage %>% \r\n    html_nodes(\"div.ProductCard_productName__35zi5\") %>% \r\n    html_text()\r\n  \r\n  # fiyat\r\n  price <- thepage %>% \r\n    html_nodes(\"div.ProductCard_footer__Fc9OL span.ProductCard_price__10UHp\") %>% \r\n    html_text()\r\n  \r\n  # Ã¼rÃ¼n ve fiyatÄ±n birleÅŸtirilmesi\r\n  tbl <- data.frame(\r\n    Item = item,\r\n    Price = price\r\n  )\r\n  \r\n  # birleÅŸtirilen tablonun globalde yaratÄ±lan master ile birleÅŸtirilmesi\r\n  master <- master %>% \r\n    bind_rows(tbl)\r\n  \r\n  # sÃ¼rekli istek gÃ¶ndermemek iÃ§in sistem bir sÃ¼re (Ã¶r: 3 saniye) uyutulabilir\r\n  Sys.sleep(time = 3)\r\n  \r\n  if(i == 2){ # 2 yerine lastPage yazabilirsiniz\r\n    \r\n    # eÄŸer i deÄŸiÅŸkeni son sayfaya eÅŸitse ki dÃ¶ngÃ¼ bitecek;\r\n    # globalde yaratÄ±lan time deÄŸiÅŸkeni master veri Ã§erÃ§evesine eklenecek.\r\n    # time deÄŸiÅŸkeni zamanÄ±n sabit olmasÄ± iÃ§in globalde yaratÄ±ldÄ±.\r\n    \r\n    master$Time <- time\r\n    \r\n  }\r\n  \r\n}\r\n\r\n\r\n\r\nVarsayÄ±msal olarak 50; ÅŸimdilik 2 sayfanÄ±n tamamÄ±nÄ± Ã§ektik. Son 10\r\nÃ¼rÃ¼ne ve fiyatÄ±na bakalÄ±m.\r\n\r\n\r\n\r\n\r\nItem\r\n\r\n\r\nPrice\r\n\r\n\r\nTime\r\n\r\n\r\n55\r\n\r\n\r\nDuru 1 kg KarabuÄŸday GreÃ§ka\r\n\r\n\r\n67,80 TL\r\n\r\n\r\n2022-06-05 18:40:24\r\n\r\n\r\n56\r\n\r\n\r\nNestle 1927 2.5 kg KuvertÃ¼r SÃ¼tlÃ¼ Ã‡ikolata\r\n\r\n\r\n215,13 TL\r\n\r\n\r\n2022-06-05 18:40:24\r\n\r\n\r\n57\r\n\r\n\r\nSinangil 8 kg Un\r\n\r\n\r\n148,47 TL\r\n\r\n\r\n2022-06-05 18:40:24\r\n\r\n\r\n58\r\n\r\n\r\nÃ–zgÃ¼n 5 lt Naturel SÄ±zma ZeytinyaÄŸÄ±\r\n\r\n\r\n306,90 TL\r\n\r\n\r\n2022-06-05 18:40:24\r\n\r\n\r\n59\r\n\r\n\r\nPakmaya 100 gr Aktif Kuru Hamur MayasÄ±\r\n\r\n\r\n6,49 TL\r\n\r\n\r\n2022-06-05 18:40:24\r\n\r\n\r\n60\r\n\r\n\r\nYudum 1 lt Egemden Riviera ZeytinyaÄŸÄ±\r\n\r\n\r\n59,39 TL\r\n\r\n\r\n2022-06-05 18:40:24\r\n\r\n\r\n61\r\n\r\n\r\nTmo Teneke AyÃ§iÃ§ek YaÄŸÄ± 5 lt\r\n\r\n\r\n198,00 TL\r\n\r\n\r\n2022-06-05 18:40:24\r\n\r\n\r\n62\r\n\r\n\r\nAmasya Un 50 kg Ã‡eÅŸitlik Unu\r\n\r\n\r\n639,00 TL\r\n\r\n\r\n2022-06-05 18:40:24\r\n\r\n\r\n63\r\n\r\n\r\nÄ°ndomie 80 Gr Gurme AcÄ± Ve BaharatlÄ± HazÄ±r Noodle\r\n\r\n\r\n4,13 TL\r\n\r\n\r\n2022-06-05 18:40:24\r\n\r\n\r\n64\r\n\r\n\r\nOlin 18 lt AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n673,41 TL\r\n\r\n\r\n2022-06-05 18:40:24\r\n\r\n\r\nÃ‡ekilen verilerin veri tabanÄ±na kaydedilmesi\r\nÃ‡ektiÄŸimiz verileri veri tabanÄ±na kaydetme vakti. Bunun iÃ§in SQLiteâ€™Ä±\r\nkullanacaÄŸÄ±z. Bu uygulama iÃ§in tercih etme nedenim, herhangi bir\r\nyazÄ±lÄ±m/sunucu kurulumuna ihtiyacÄ±mÄ±z olmayacak. Bunun yanÄ±nda sade ve\r\nbasit bir yapÄ±sÄ± vardÄ±r.\r\nSQLite iÃ§in DBI ve RSQLite paketini; veri tabanÄ±nÄ±\r\n(geÃ§ici deÄŸil; sÃ¼rekli) yaratmak iÃ§in aÅŸaÄŸÄ±daki komutu kullanacaÄŸÄ±z.\r\nDosya yolu neredeyse oraya kaydedecektir.\r\n\r\n\r\n# dosya yolu\r\n# getwd()\r\n\r\nmyDB <- dbConnect(SQLite(), \"marketDB.sqlite\") # Dosya yolunu adres gÃ¶stermenizi tavsiye ederim.\r\n# Ã–r: \"C:/.../marketDB.sqlite\"\r\n\r\n\r\n\r\nVerileri veri tabanÄ±na kaydedelim. Bu iÅŸlemi belli bir frekansta ya\r\nda uygulamamÄ±zda olduÄŸu gibi saat baÅŸÄ± yapacaÄŸÄ±mÄ±z zaman yeni gelen\r\nverilerin veri tabanÄ±ndaki tablonun Ã¼zerine yazmamasÄ± Ã¶nemli olacak.\r\nBunun iÃ§in append parametresi TRUE olarak\r\nbelirlendi.\r\n\r\n\r\ndbWriteTable(myDB, \"master\", master, append = TRUE)\r\n\r\n\r\n\r\nVeri tabanÄ±na kaydettiÄŸimiz verileri SQL sorgusu ile Ã§ekelim.\r\n\r\n\r\nmastertbl <- dbGetQuery(myDB, \"SELECT * FROM master\")\r\n\r\n\r\n\r\n\r\n\r\nItem\r\n\r\n\r\nPrice\r\n\r\n\r\nTime\r\n\r\n\r\nBiryaÄŸ 5 lt AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n175,00 TL\r\n\r\n\r\n2022-06-05 18:24:16\r\n\r\n\r\nKomili Riviera SÄ±cak Lezzetler 5 lt ZeytinyaÄŸÄ±\r\n\r\n\r\n328,06 TL\r\n\r\n\r\n2022-06-05 18:24:16\r\n\r\n\r\nYudum 5 lt Teneke AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n192,50 TL\r\n\r\n\r\n2022-06-05 18:24:16\r\n\r\n\r\nBizim 5 lt Teneke AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n189,90 TL\r\n\r\n\r\n2022-06-05 18:24:16\r\n\r\n\r\nVera 5 lt Pet AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n145,00 TL\r\n\r\n\r\n2022-06-05 18:24:16\r\n\r\n\r\nYudum 1 lt AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n42,90 TL\r\n\r\n\r\n2022-06-05 18:24:16\r\n\r\n\r\nYudum 18 lt AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n739,95 TL\r\n\r\n\r\n2022-06-05 18:24:16\r\n\r\n\r\nSinangil 5 kg Un\r\n\r\n\r\n52,90 TL\r\n\r\n\r\n2022-06-05 18:24:16\r\n\r\n\r\nTorku AltÄ±n Ekin 5 lt AyÃ§iÃ§ek YaÄŸÄ±\r\n\r\n\r\n175,00 TL\r\n\r\n\r\n2022-06-05 18:24:16\r\n\r\n\r\nOna 5 lt AyÃ§iÃ§ek Teneke YaÄŸÄ±\r\n\r\n\r\n164,80 TL\r\n\r\n\r\n2022-06-05 18:24:16\r\n\r\n\r\nÄ°ÅŸlemler bittikten sonra aÅŸaÄŸÄ±daki kod ile veri tabanÄ±ndan\r\nÃ§Ä±kÄ±labilir. BaÅŸta yazÄ±lan kod (aÅŸaÄŸÄ±daki yorum satÄ±rÄ±) ile tekrar\r\nbaÄŸlanacaktÄ±r.\r\n\r\n\r\ndbDisconnect(myDB)\r\n# myDB <- dbConnect(SQLite(), \"marketDB.sqlite\")\r\n\r\n\r\n\r\nGÃ¼ncel veriler ile bir Ã¶nceki zamana ait verilerin\r\nkarÅŸÄ±laÅŸtÄ±rÄ±lmasÄ± ve karÅŸÄ±laÅŸtÄ±rmanÄ±n kaydedilmesi\r\nVeri tabanÄ±ndan alÄ±nan tablonun time sÃ¼tunu character\r\nformatÄ±nda olacaÄŸÄ± iÃ§in aÅŸaÄŸÄ±daki gibi zaman formatÄ±na\r\ndÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmelidir.\r\n\r\n\r\nmastertbl$Time <- as.POSIXct(mastertbl$Time)\r\n\r\n\r\n\r\nBizim bu tabloda iki zamana ihtiyacÄ±mÄ±z olacak: En gÃ¼ncel zaman ve\r\nbir Ã¶nceki.\r\n\r\n\r\n# En gÃ¼ncel zaman\r\nmaxTime <- mastertbl[ymd_hms(mastertbl$Time)==max(ymd_hms(mastertbl$Time)),]\r\n# Bir Ã¶nceki zaman\r\nmaxTime2 <- mastertbl[ymd_hms(mastertbl$Time)!=max(ymd_hms(mastertbl$Time)),]\r\nmaxTime2 <- maxTime2[ymd_hms(maxTime2$Time)==max(ymd_hms(maxTime2$Time)),]\r\n\r\n\r\n\r\nÄ°stediÄŸimiz verileri alÄ±p birleÅŸtirdikten sonra bazÄ± dÃ¼zenlemeler\r\nyapacaÄŸÄ±z. Ama Ã¶ncesinde ÅŸunu not dÃ¼ÅŸmekte fayda var: Bu sÃ¼reci ilk defa\r\nbaÅŸlattÄ±ÄŸÄ±mÄ±z zaman elimizde bir tane zaman olacak. Yani, herhangi bir\r\nkarÅŸÄ±laÅŸtÄ±rma olmayacak. Hata almamak ve sÃ¼reci devam ettirebilmek iÃ§in\r\nbazÄ± koÅŸullara ihtiyaÃ§ olacaktÄ±r.\r\nAÅŸaÄŸÄ±daki kodu Ã§alÄ±ÅŸtÄ±rmadan Ã¶nce maxTime2 deÄŸiÅŸkeninin\r\nsÄ±fÄ±rdan bÃ¼yÃ¼k olup olmadÄ±ÄŸÄ±na bakmamÄ±z gerekir. Bakmaz isek hata\r\nalÄ±rÄ±z.\r\n\r\n\r\nif(nrow(maxTime2) > 0){\r\n  \r\n  comparetbl <- maxTime %>% \r\n  bind_rows(maxTime2) %>% \r\n  group_by(Time) %>% \r\n  mutate(ID = cur_group_id(),\r\n         ID  = if_else(ID == 1, \"Before\", \"After\")) %>% \r\n  pivot_wider(!Time, names_from = \"ID\", values_from = \"Price\") %>% \r\n  mutate(\r\n    # VirgÃ¼lÃ¼n nokta yapÄ±lmasÄ± ve TL'nin kaldÄ±rÄ±lmasÄ±; numeric'e dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmesi\r\n    After = as.numeric(gsub(\"\\\\,\",\".\",gsub(\" TL\",\"\",After))),\r\n    Before = as.numeric(gsub(\"\\\\,\",\".\",gsub(\" TL\",\"\",Before))),\r\n    # Ã–ncesi ve sonrasÄ± arasÄ±ndaki fiyat farkÄ±\r\n    Diff = After - Before\r\n  ) %>% \r\n  filter(Diff != 0) # farkÄ± sÄ±fÄ±r olmayanlar filtrelendi\r\n  \r\n}\r\n\r\n\r\n\r\nEÄŸer son filtreden sonra veri Ã§erÃ§evesi 0â€™dan bÃ¼yÃ¼k ise bir excel\r\ndosyasÄ± ile kaydedeceÄŸiz. Ã–ncesinde ise bir koÅŸul koymak gerekiyor. EÄŸer\r\ncomparetbl tablosu var ise sÄ±fÄ±rdan bÃ¼yÃ¼k olup olmadÄ±ÄŸÄ±\r\nkoÅŸuluna geÃ§melidir.\r\n\r\n\r\nif(exists(\"comparetbl\")){\r\n  \r\n  if(nrow(comparetbl) > 0){\r\n    \r\n    write.xlsx(comparetbl, \"PriceTracker.xlsx\")\r\n    \r\n  }\r\n  \r\n}\r\n\r\n\r\n\r\nGÃ¶rev zamanlayÄ±cÄ±nÄ±n ayarlanmasÄ± ve scriptâ€™in belli bir\r\nfrekansta Ã§alÄ±ÅŸtÄ±rÄ±lmasÄ±\r\nGÃ¶rev zamanlayÄ±cÄ± PCâ€™den ayarlanabileceÄŸi gibi taskscheduleR\r\npaketi ile de yapÄ±labilir.\r\n\r\n\r\ntaskscheduler_create(\r\n  \r\n  taskname = \"OrnekScript\", # gÃ¶rev adÄ±\r\n  rscript = \"OrnekScript.R\", # Ã§alÄ±ÅŸtÄ±rÄ±lacak olan script;\r\n  # dosya yolu belirtilmeli (\"C:/.../OrnekScript.R\")\r\n  schedule = \"HOURLY\", # saatlik\r\n  starttime = \"18:00\", # manuel belirlenen saat ile baÅŸlayacak; Ã–r: 18:00\r\n  modifier = 1 # 1 saat ara ile\r\n  \r\n)\r\n\r\n\r\n\r\nAyarlar kod ile yapÄ±labileceÄŸi gibi Addins ile de yapÄ±labilir. R\r\nStudioâ€™da Addinsâ€™e tÄ±kladÄ±ktan sonra Schedule R Scripts on\r\nWindowsâ€™a tÄ±klanÄ±r. AÃ§Ä±lan ekran ile ayarlar daha kolay bir ÅŸekilde\r\nyapÄ±labilir.\r\nGÃ¶rev zamanlayÄ±cÄ± Ã§alÄ±ÅŸtÄ±ktan sonra tasknameâ€™e verdiÄŸiniz\r\nisim ile birlikte bir log dosyasÄ± atabilir. Burada olasÄ± uyarÄ± ve\r\nhatalarÄ± gÃ¶rebilirsiniz.\r\nSÃ¼recin otomatize edilmesi bitti. ÃœrÃ¼nlere ait fiyatlar veri\r\ntabanÄ±nda kayÄ±tlÄ± ve 1 adet de karÅŸÄ±laÅŸtÄ±rma dosyasÄ± bulunmaktadÄ±r. Buna\r\nbir de gÃ¶rsel ekleyebilirsiniz. Bu kÄ±smÄ± size bÄ±rakÄ±yorum :)\r\nBONUS\r\nÄ°ÅŸ hayatÄ±nda Outlook kullanÄ±ldÄ±ÄŸÄ± ve bu tip sÃ¼reÃ§leri birÃ§ok konuda\r\nentegre ettiÄŸim iÃ§in Outlook ile nasÄ±l mail atÄ±lÄ±r bunu gÃ¶stermek\r\nistiyorum.\r\n\r\n\r\nlibrary(RDCOMClient) # outlook mail\r\nlibrary(xtable) # html ile tablo oluÅŸturmak iÃ§in\r\n\r\nif(nrow(comparetbl) > 0){\r\n  \r\n  x <- head(comparetbl)\r\n  y <- print(xtable(x), type=\"html\", print.results=FALSE)\r\n  body <- paste0(\"<html>\", y, \"<\/html>\")\r\n  \r\n  OutApp <- COMCreate(\"Outlook.Application\")\r\n  outMail = OutApp$CreateItem(0)\r\n  outMail[[\"To\"]] = \"mailingidecegiadres@sirket.com\"\r\n  outMail[[\"subject\"]] = paste0(nrow(comparetbl),\" Adet ÃœrÃ¼nÃ¼n FiyatÄ±nda DeÄŸiÅŸiklik Var!\")\r\n  outMail[[\"Attachments\"]]$Add(paste0(\"PriceTracker.xlsx\"))\r\n  outMail[[\"HTMLbody\"]] = body\r\n  outMail$Send()\r\n}\r\n\r\n\r\n\r\nGitHub\r\nhesabÄ±mdan Ã¶rnek bir scriptâ€™e ulaÅŸabilirsiniz.\r\nOrnekScript.R:\r\n\r\n\r\nlibrary(rvest)\r\nlibrary(DBI); library(RSQLite)\r\nlibrary(openxlsx)\r\nlibrary(tidyverse)\r\nlibrary(lubridate)\r\n\r\nurl <- \"https://www.cimri.com/market/temel-gida?page=1\"\r\n\r\nlastPage <- read_html(url) %>% \r\n  html_nodes(\"div.Pagination_pagination__6kvLO li\") %>% \r\n  html_text()\r\nlastPage <- as.numeric(tail(lastPage[lastPage != \"\"], 1))\r\n\r\nurls <- str_c(\r\n  \"https://www.cimri.com/market/temel-gida?page=\",\r\n  seq(1,lastPage,1)\r\n)\r\n\r\nmaster <- data.frame()\r\ntime <- format(Sys.time(), \"%Y-%m-%d %H:%M:%S\")\r\n\r\nfor(i in 1:2){\r\n  \r\n  thepage <- read_html(urls[i])\r\n  \r\n  item <- thepage %>% \r\n    html_nodes(\"div.ProductCard_productName__35zi5\") %>% \r\n    html_text()\r\n  \r\n  price <- thepage %>% \r\n    html_nodes(\"div.ProductCard_footer__Fc9OL span.ProductCard_price__10UHp\") %>% \r\n    html_text()\r\n  \r\n  tbl <- data.frame(\r\n    Item = item,\r\n    Price = price\r\n  )\r\n  \r\n  master <- master %>% \r\n    bind_rows(tbl)\r\n  \r\n  Sys.sleep(time = 3)\r\n  \r\n  if(i == 2){\r\n    \r\n    master$Time <- time\r\n    \r\n  }\r\n  \r\n}\r\n\r\nmyDB <- dbConnect(SQLite(), \"marketDB.sqlite\")\r\ndbWriteTable(myDB, \"master\", master, append = TRUE)\r\nmastertbl <- dbGetQuery(myDB, \"SELECT * FROM master\")\r\ndbDisconnect(myDB)\r\n\r\nmastertbl$Time <- as.POSIXct(mastertbl$Time)\r\nmaxTime <- mastertbl[ymd_hms(mastertbl$Time)==max(ymd_hms(mastertbl$Time)),]\r\nmaxTime2 <- mastertbl[ymd_hms(mastertbl$Time)!=max(ymd_hms(mastertbl$Time)),]\r\nmaxTime2 <- maxTime2[ymd_hms(maxTime2$Time)==max(ymd_hms(maxTime2$Time)),]\r\n\r\nif(nrow(maxTime2) > 0){\r\n  \r\n  comparetbl <- maxTime %>% \r\n    bind_rows(maxTime2) %>% \r\n    group_by(Time) %>% \r\n    mutate(ID = cur_group_id(),\r\n           ID  = if_else(ID == 1, \"Before\", \"After\")) %>% \r\n    pivot_wider(!Time, names_from = \"ID\", values_from = \"Price\") %>% \r\n    mutate(\r\n      After = as.numeric(gsub(\"\\\\,\",\".\",gsub(\" TL\",\"\",After))),\r\n      Before = as.numeric(gsub(\"\\\\,\",\".\",gsub(\" TL\",\"\",Before))),\r\n      Diff = After - Before\r\n    ) %>% \r\n    filter(Diff != 0)\r\n  \r\n}\r\n\r\nif(exists(\"comparetbl\")){\r\n  \r\n  if(nrow(comparetbl) > 0){\r\n    \r\n    write.xlsx(comparetbl, \"PriceTracker.xlsx\")\r\n    \r\n  }\r\n  \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-06-05-post9/img1.png",
    "last_modified": "2022-06-05T18:40:48+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-06-01-post8/",
    "title": "DoÄŸrusal Zaman Serisi Modelleri ile Enflasyon Ã–ngÃ¶rÃ¼sÃ¼",
    "description": "2022 iÃ§in yÄ±l sonu enflasyon Ã¶ngÃ¶rÃ¼sÃ¼.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-06-01",
    "categories": [
      "Economics"
    ],
    "contents": "\r\nBu Ã§alÄ±ÅŸmada ele alacaÄŸÄ±mÄ±z zaman serisi modelleri tek deÄŸiÅŸkenlidir\r\nve kendi geÃ§miÅŸ deÄŸerleri ve hatalarÄ±na (kalÄ±ntÄ±lar) gÃ¶re kurulan\r\nmodellerdir.\r\n\\(Y_t\\) gibi bir serimiz olsun. Bu\r\ndurumda sÃ¶zel olarak ifade edilen ÅŸey aÅŸaÄŸÄ±daki gibi olur:\r\n\\(Y_t = f(Y_{t-1},Y_{t-2},\r\n...,\\epsilon_t,\\epsilon_{t-1},\\epsilon_{t-2},...)\\)\r\nOtoregresif SÃ¼reÃ§: AR(p)\r\nAR modeller, bir zaman serisinin herhangi bir dÃ¶nemdeki gÃ¶zlem\r\ndeÄŸerini, aynÄ± serinin ondan Ã¶nceki belirli sayÄ±da dÃ¶nemin gÃ¶zlem\r\ndeÄŸerinin ve hata teriminin doÄŸrusal bir bileÅŸimi olarak ifade eden\r\nmodellerdir.\r\nAR(p) sÃ¼reci ÅŸÃ¶yle ifade edilir:\r\n\\(Y_t = \\delta + \\phi_1Y_{t-1} +\r\n\\phi_2Y_{t-2} + ... + \\phi_pY_{t-p} + \\epsilon_t\\)\r\np = 1 olduÄŸunu varsayalÄ±m. Bu, AR(1) sÃ¼recidir. Buna aynÄ± zamanda\r\nbirinci derece otoregresif zaman serisi modeli de diyebiliriz. Ã‡Ã¼nkÃ¼,\r\n\\(Y_t\\) sadece kendi bir Ã¶nceki dÃ¶nemi\r\nolan \\(Y_{t-1}\\)â€™e ve bir rassal\r\nkalÄ±ntÄ± olan \\(\\epsilon_t\\)â€™ye\r\nbaÄŸlÄ±dÄ±r.\r\n\\(Y_t = \\delta + \\phi_1Y_{t-1} +\r\n\\epsilon_t; t = 1,2,...,T\\)\r\n\\(\\delta:\\) Sabit parametre (\\(Y_t\\)â€™nin ortalamasÄ±),\r\n\\(\\phi_1:\\) -1 ile 1 arasÄ±nda deÄŸer\r\naldÄ±ÄŸÄ± varsayÄ±lan bilinmeyen parametre,\r\n\\(\\epsilon_t:\\) OrtalamasÄ± sÄ±fÄ±r ve\r\nsabit varyanslÄ± \\(\\sigma_{\\epsilon}^2\\)\r\nkorelasyonsuz bir hata terimidir: \\(\\epsilon_t\r\n\\sim IID (0,\\sigma^2)\\)\r\nAR(1) sÃ¼reci iÃ§in simÃ¼lasyon ile alternatif yapÄ±lar oluÅŸturalÄ±m.\r\n\\(\\phi_1 = 0\\) iÃ§in \\(Y_t = \\epsilon_t\\) olur.\r\n\r\n\r\n\r\n\\(\\phi_1 = 0.3\\) iÃ§in \\(Y_t = 0.3Y_{t-1} + \\epsilon_t\\) olur.\r\n\r\n\r\n\r\n\\(\\phi_1 = 0.5\\) iÃ§in \\(Y_t = 0.5Y_{t-1} + \\epsilon_t\\) olur.\r\n\r\n\r\n\r\n\\(\\phi_1 = 0.7\\) iÃ§in \\(Y_t = 0.7Y_{t-1} + \\epsilon_t\\) olur.\r\n\r\n\r\n\r\n\\(\\phi_1 = 0.9\\) iÃ§in \\(Y_t = 0.9Y_{t-1} + \\epsilon_t\\) olur.\r\n\r\n\r\n\r\n\r\n\r\n\r\nYukarÄ±da, ilk simÃ¼le ettiÄŸimiz \\(\\phi_{1} =\r\n0\\)â€™Ä±n Ã§ok sÄ±k bir biÃ§imde ortalamayÄ± kestiÄŸini ve \\(\\phi_1\\)â€™in deÄŸeri arttÄ±kÃ§a ortalamayÄ± daha\r\naz kestiÄŸini gÃ¶rÃ¼yoruz. \\(\\phi_1\\) iÃ§in\r\n-1 ile 1 arasÄ±nda deÄŸer aldÄ±ÄŸÄ± varsayÄ±lan bilinmeyen parametre demiÅŸtik.\r\nYani, -1 < \\(\\phi_1\\) < 1 ya da\r\n\\(|\\phi_1| < 1\\) ÅŸeklinde de\r\nyazabiliriz. EÄŸer \\(\\phi_1 = 1\\) olursa\r\nki bu grafikte yok; sÃ¼recin duraÄŸan olmadÄ±ÄŸÄ± yorumunu yapabiliriz.\r\nHareketli Ortalama SÃ¼reci: MA(q)\r\nMA modeller, bir zaman serisinin herhangi bir dÃ¶nemindeki gÃ¶zlem\r\ndeÄŸerinin, aynÄ± dÃ¶neminin hata terimi ve belirli sayÄ±da geÃ§miÅŸ dÃ¶nemin\r\nhata terimlerinin doÄŸrusal bir bileÅŸimi olarak ifade edildiÄŸi\r\nmodellerdir.\r\nMA(q) sÃ¼reci ÅŸÃ¶yle ifade edilir:\r\n\\(Y_t = \\mu + \\epsilon_t +\r\n\\theta_1\\epsilon_{t-1} + \\theta_2\\epsilon_{t-2} + ... +\r\n\\theta_q\\epsilon_{t-q}\\)\r\nq = 1 olduÄŸunu varsayalÄ±m. Bu, MA(1) sÃ¼recidir. Buna aynÄ± zamanda\r\nbirinci derece hareketli ortalama sÃ¼reci de diyebiliriz. MA(1) sÃ¼recini\r\nÅŸÃ¶yle ifade edebiliriz:\r\n\\(Y_t = \\mu + \\epsilon_t +\r\n\\theta_1\\epsilon_{t-1}\\)\r\nFinans Ã¼zerinden Ã¶rneklendirelim. t gÃ¼nÃ¼ndeki hisse senedinin fiyatÄ±\r\n\\(P_t\\) olsun. Bu durumda bir gÃ¼nden\r\ndiÄŸerine fiyattaki deÄŸiÅŸmeyi ÅŸÃ¶yle ifade edebiliriz: \\(Y_t = P_t - P_{t-1} = \\epsilon_t; t =\r\n1,2,...,T\\)\r\nBeklenmeyen haberlerin olduÄŸu bir ortamda etkisi bir gÃ¼n iÃ§inde\r\ngeÃ§meyebilir. Yani, fiyat deÄŸiÅŸmeleri sonraki gÃ¼nlerde de etkilenebilir.\r\nÃ–rneÄŸin, \\(Y_{t+1} = \\epsilon_{t+1} +\r\n\\theta_1\\epsilon_t\\) olabilir. Burada, \\(\\epsilon_{t+1}\\), t+1 gÃ¼nÃ¼ndeki alÄ±nan yeni\r\nhaberlerin/bilgilerin etkisini gÃ¶sterir. \\(\\theta_1\\epsilon_t\\) ise bir gÃ¼n Ã¶ncesinin\r\nhaber etkisinin devamÄ±dÄ±r. Åžunu diyebiliriz: \\(Y_{t+1}\\)â€™in deÄŸeri cari ve geÃ§miÅŸ rassal\r\nbir kalÄ±ntÄ±nÄ±n aÄŸÄ±rlÄ±klÄ± ortalamasÄ±dÄ±r.\r\nMA sÃ¼recinde \\(Y_t\\)â€™nin k sayÄ±da\r\ngecikmesi ile olan kovaryansÄ± sÄ±fÄ±rdÄ±r. Yani, \\(Cov(Y_t,Y_{t-k}) = \\gamma_k = 0\\)â€™dÄ±r.\r\nÃ–rneÄŸin, MA(1) sÃ¼recinde k > 1 olduÄŸu bÃ¼tÃ¼n durumlarda kovaryanslar\r\nsÄ±fÄ±rdÄ±r. Bu da MA(1) sÃ¼recinin yalnÄ±zca bir dÃ¶nemlik bir belleÄŸe sahip\r\nolduÄŸunu ifade eder. Yani, \\(Y_t\\),\r\nsadece \\(Y_{t-1}\\) ve \\(Y_{t+1}\\) ile korelasyonludur, diÄŸer\r\ngecikmelerle arasÄ±nda herhangi bir korelasyon yoktur.\r\nMA(1) sÃ¼reci iÃ§in simÃ¼lasyon ile alternatif yapÄ±lar oluÅŸturalÄ±m.\r\n\\(\\theta_1 = 0\\) iÃ§in \\(Y_t = \\epsilon_t\\) olur.\r\n\r\n\r\n\r\n\\(\\theta_1 = -0.3\\) iÃ§in \\(Y_t = \\epsilon_t - 0.3\\epsilon_{t-1}\\)\r\nolur.\r\n\r\n\r\n\r\n\\(\\theta_1 = -0.5\\) iÃ§in \\(Y_t = \\epsilon_t - 0.5\\epsilon_{t-1}\\)\r\nolur.\r\n\r\n\r\n\r\n\\(\\theta_1 = -0.7\\) iÃ§in \\(Y_t = \\epsilon_t - 0.7\\epsilon_{t-1}\\)\r\nolur.\r\n\r\n\r\n\r\n\\(\\theta_1 = -0.9\\) iÃ§in \\(Y_t = \\epsilon_t - 0.9\\epsilon_{t-1}\\)\r\nolur.\r\n\r\n\r\n\r\n\r\n\r\n\r\nAR(1) sÃ¼recindeki simÃ¼lasyondan farklÄ± olarak MA(1) sÃ¼recinde \\(\\phi_1\\) deÄŸerleri deÄŸiÅŸtikÃ§e ortalamayÄ±\r\nkesme sÄ±klÄ±ÄŸÄ±nda bir deÄŸiÅŸiklik gÃ¶rÃ¼lmemektedir.\r\nOtoregresif Hareketli Ortalama SÃ¼reci: ARMA(p,q)\r\nBazen bir zaman serisi hem AR hem de MA sÃ¼recini iÃ§erebilir. Bu\r\nmodellerde bir zaman serisinin herhangi bir dÃ¶nemine ait gÃ¶zlem deÄŸeri,\r\nondan Ã¶nceki belirli sayÄ±da gÃ¶zlem deÄŸerinin ve hata teriminin doÄŸrusal\r\nbir bileÅŸimi olarak ifade edilir.\r\n\\(Y_t = \\delta + \\phi_1Y_{t-1} +\r\n\\phi_2Y_{t-2} + ... + \\phi_pY_{t-p} + \\epsilon_t + \\mu + \\epsilon_t +\r\n\\theta_1\\epsilon_{t-1} + \\theta_2\\epsilon_{t-2} + ... +\r\n\\theta_q\\epsilon_{t-q}\\)\r\nKesme terimi \\(\\delta\\), \\(Y_t\\)â€™nin ortalamasÄ±dÄ±r. \\(\\epsilon_t\\) hatalar, \\(E(\\epsilon_t) = 0\\) ve \\(Var(\\epsilon_t) = \\sigma_\\epsilon^2\\) ile\r\nkorelasyonsuz rassal deÄŸiÅŸkenlerdir. SÃ¼reÃ§ duraÄŸan ise ki bunun koÅŸulu\r\naÅŸaÄŸÄ±dadÄ±r, tÃ¼m dÃ¶nemler iÃ§in sabir bir ortalama, \\(\\mu\\), sÃ¶z konusudur.\r\nDuraÄŸanlÄ±k koÅŸulu: \\(\\phi_1 + \\phi_2 + ...\r\n+ \\phi_p < 1\\)â€™dir.\r\np = 1 ve q = 1 olsun. Bu bir ARMA(1,1) sÃ¼recidir.\r\n\\(Y_t = \\delta + \\phi_1Y_{t-1} + \\epsilon_t\r\n+ \\theta_1\\epsilon_{t-1}\\)\r\nARMA(1,1) sÃ¼reci iÃ§in simÃ¼lasyon ile alternatif yapÄ±lar\r\noluÅŸturalÄ±m.\r\n\\(\\phi_1 = 0.3\\) ve \\(\\theta_1 = -0.3\\) iÃ§in \\(Y_t = 0.3Y_{t-1} + \\epsilon_t -\r\n0.3\\epsilon_{t-1}\\) olur.\r\n\r\n\r\n\r\n\\(\\phi_1 = 0.8\\) ve \\(\\theta_1 = -0.3\\) iÃ§in \\(Y_t = 0.8Y_{t-1} + \\epsilon_t -\r\n0.3\\epsilon_{t-1}\\) olur.\r\n\r\n\r\n\r\n\\(\\phi_1 = 0.3\\) ve \\(\\theta_1 = -0.8\\) iÃ§in \\(Y_t = 0.3Y_{t-1} + \\epsilon_t -\r\n0.8\\epsilon_{t-1}\\) olur.\r\n\r\n\r\n\r\n\\(\\phi_1 = -0.8\\) ve \\(\\theta_1 = -0.8\\) iÃ§in \\(Y_t = -0.8Y_{t-1} + \\epsilon_t -\r\n0.8\\epsilon_{t-1}\\) olur.\r\n\r\n\r\n\r\n\\(\\phi_1 = 0.8\\) ve \\(\\theta_1 = 0.8\\) iÃ§in \\(Y_t = 0.8Y_{t-1} + \\epsilon_t +\r\n0.8\\epsilon_{t-1}\\) olur.\r\n\r\n\r\n\r\n\\(\\phi_1 = -0.9\\) ve \\(\\theta_1 = 0.8\\) iÃ§in \\(Y_t = -0.9Y_{t-1} + \\epsilon_t +\r\n0.8\\epsilon_{t-1}\\) olur.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\\(\\theta_1\\) parametresinin deÄŸil de\r\n\\(\\phi_1\\) parametresinin ki bu\r\notoregresif parametredir, etkili olduÄŸunu gÃ¶rÃ¼yoruz. Ã‡Ã¼nkÃ¼, bu\r\nparametrenin deÄŸeri arttÄ±kÃ§a ortalama daha az sayÄ±da kesiliyor.\r\nHomojen DuraÄŸan-DÄ±ÅŸÄ± SÃ¼reÃ§ler: ARIMA(p,d,q)\r\nBu baÅŸlÄ±ÄŸa kadar sÃ¼reÃ§lerin hep duraÄŸan olduÄŸunu varsaydÄ±k. Zaman\r\nserisi duraÄŸan-dÄ±ÅŸÄ± bir yapÄ±da ise bir ya da birden fazla farkÄ±nÄ± alarak\r\ndÃ¶nÃ¼ÅŸtÃ¼rme iÅŸlemi gerÃ§ekleÅŸtiriyoruz. Bu bir entegre sÃ¼reÃ§tir ve d\r\nharfine karÅŸÄ±lÄ±k gelir. dâ€™nin deÄŸeri alÄ±nan fark sayÄ±dÄ±r.\r\n\\(W_t = \\Delta^dY_t\\) duraÄŸan bir\r\nseri ise \\(Y_t\\) serisi d.Â dereceden\r\nhomojen duraÄŸan-dÄ±ÅŸÄ±dÄ±r.\r\nSÃ¼reci iki farklÄ± simÃ¼lasyon Ã¶rneÄŸi ile gÃ¶relim.\r\n\\(\\phi_1=0.5\\), \\(\\theta_1=-0.3\\) ve \\(\\delta = 1\\) ise ARIMA(1,1,1)â€™dir. Yani,\r\nARIMA(p = 1, d = 1, q = 1).\r\n\r\n\r\n\r\n\\(\\phi_1=0.5\\), \\(\\theta_1=-0.3\\) ve \\(\\delta = 2\\) ise ARIMA(1,2,1)â€™dir. Yani,\r\nARIMA(p = 1, d = 2, q = 1).\r\n\r\n\r\n\r\nARIMA Model Kurma SÃ¼reci: Box-Jenkins YaklaÅŸÄ±mÄ±\r\nBox-Jenkins yaklaÅŸÄ±mÄ±nÄ±n temel fikri cimrilik prensibidir. Yani,\r\nzaman serisi verilerinin Ã¶zelliklerini ortaya koyan optimal (minimum\r\nsayÄ±da parametre veya serbestlik derecesini gÃ¶z Ã¶nÃ¼nde tutan) bir model\r\nkurmayÄ± Ã¶ngÃ¶rÃ¼r.\r\nYaklaÅŸÄ±mÄ± 3 aÅŸamaya ayÄ±rabiliriz:\r\nTanÄ±mlama\r\n1.1. Veri HazÄ±rlama\r\nVaryansÄ± sabitleÅŸtirmek iÃ§in verilere dÃ¶nÃ¼ÅŸtÃ¼rme iÅŸlemi\r\nuygulanÄ±r.\r\nDuraÄŸan seriyi bulmak iÃ§in verilerin farkÄ± alÄ±nÄ±r.\r\n1.2. Model SeÃ§imi\r\nPotansiyel modelleri teÅŸhis edebilmek iÃ§in ACF ve PACF\r\nhesaplanÄ±r.\r\nTahmin ve Test Yapma\r\n2.1. Tahmin\r\nPotansiyel modellerdeki parametrelerin tahminleri\r\nyapÄ±lÄ±r.\r\nUygun kriterler kullanÄ±larak en iyi model seÃ§ilir.\r\n2.2. TanÄ± Kontrol\r\nKalÄ±ntÄ±larÄ±n ACF/PACFâ€™leri kontrol edilir.\r\nKalÄ±ntÄ±larÄ±n Portmanteau testleri yapÄ±lÄ±r.\r\nKalÄ±ntÄ±larÄ±n temiz-dizi olup olmadÄ±ÄŸÄ± kontrol edilir.\r\nModelin yeterliliÄŸine bakÄ±lÄ±r.\r\nUygulama\r\n3.1. Ã–nraporlama\r\nÃ–nraporlama ve kontrol amacÄ±yla model kullanÄ±lÄ±r.\r\nUygulama\r\n2022 iÃ§in yÄ±l sonu enflasyon Ã¶ngÃ¶rÃ¼sÃ¼ yapacaÄŸÄ±z.\r\nTCMB/EVDSâ€™den aldÄ±ÄŸÄ±m verilere (post8.xlsx) GitHub\r\nhesabÄ±mdan ulaÅŸabilirsiniz.\r\n\r\n\r\n\r\n\r\n\r\n\r\nZaman serisi analizlerinin geleneksel yaklaÅŸÄ±mÄ±nda ilk yaptÄ±ÄŸÄ±mÄ±z\r\niÅŸlem serinin zaman yolu grafiÄŸini Ã§izmektir. AmaÃ§, serinin bir trende\r\nsahip olup olmadÄ±ÄŸÄ±nÄ±, konjonktÃ¼rel dalgalanmalarÄ±n ÅŸiddetini, mevsimsel\r\nhareketleri incelemek; dÃ¼zensiz hareketleri gidermektir.\r\n\r\n\r\n\r\nYazÄ±nÄ±n ilerleyen kÄ±sÄ±mlarÄ±nda ayrÄ±ÅŸtÄ±rma iÅŸlemi yapmadan Râ€™da bunu\r\ndikkate alan fonksiyonu Ã§alÄ±ÅŸtÄ±racaÄŸÄ±z.\r\nBiz bu Ã§alÄ±ÅŸmada model seÃ§imi iÃ§in Akaike Bilgi Kriteriâ€™ni\r\nkullanacaÄŸÄ±z. Akaike Bilgi Kriteri (AIC) modeldeki terimlerin sayÄ±sÄ±nÄ±\r\ndikkate alarak modelin uyumunun iyiliÄŸini Ã¶lÃ§en bir kriterdir. AIC =\r\n-2LogL + 2m olarak tanÄ±mlanÄ±r. Burada, L olabilirlik iken; m = p +\r\nqâ€™dur. Alternatif tanÄ±mlar da mevcuttur.\r\nAlternatif modeller arasÄ±nda en kÃ¼Ã§Ã¼k deÄŸerler veren AIC en uygun\r\nmodel ki bu da p ve q, olarak seÃ§ilir.\r\nRâ€™da bulunan auto.arima() fonksiyonunu bunun iÃ§in\r\nkullanabiliriz.\r\n\r\nSeries: enflasyon \r\nARIMA(2,1,1)(0,0,1)[12] with drift \r\n\r\nCoefficients:\r\n          ar1     ar2     ma1     sma1   drift\r\n      -0.4312  0.1966  0.8280  -0.6551  0.0054\r\ns.e.   0.2036  0.1179  0.1852   0.0606  0.0036\r\n\r\nsigma^2 = 0.008768:  log likelihood = 206.92\r\nAIC=-401.83   AICc=-401.43   BIC=-381.5\r\n\r\n\r\n    Ljung-Box test\r\n\r\ndata:  Residuals from ARIMA(2,1,1)(0,0,1)[12] with drift\r\nQ* = 10.033, df = 19, p-value = 0.9521\r\n\r\nModel df: 5.   Total lags used: 24\r\n\r\nACF grafiÄŸinde tÃ¼m Ã§ubuklarÄ±n sÄ±nÄ±rlar iÃ§inde olduÄŸunu gÃ¶rÃ¼yoruz.\r\nKalÄ±ntÄ±lar iÃ§in beyaz gÃ¼rÃ¼ltÃ¼ye uyumlu ya da buna Ã§ok yakÄ±n diyebiliriz.\r\nKalÄ±ntÄ± otokorelasyonlarÄ±nÄ±n baÅŸtan sona kabul edilebilirliÄŸinin\r\nkontrolÃ¼ iÃ§in Ljung-Box testine baktÄ±ÄŸÄ±mÄ±zda p deÄŸerinin 0.9521 olduÄŸunu\r\ngÃ¶rÃ¼yoruz. Bu da otokorelasyon olmadÄ±ÄŸÄ± yÃ¶nÃ¼nde bize destek vermektedir.\r\nVarsayÄ±mlar saÄŸlandÄ±.\r\nEn uygun modelin ARIMA(2,1,1)(0,0,1)[12] olduÄŸunu gÃ¶rÃ¼yoruz. ARIMA(p\r\n= 2, d = 1, q = 1) kÄ±smÄ±nÄ± biliyoruz. Peki, (0,0,1)[12] nedir? Serimizde\r\nmevsimsellik olduÄŸu iÃ§in bunu dikkate alan bir model kurduk.\r\nMevsimselliÄŸi dikkate aldÄ±ÄŸÄ±mÄ±z zaman buna SARIMA diyebiliriz.\r\n\\(SARIMA(p,d,q)(P,D,Q)_m\\)\r\np,P: SÄ±rasÄ±yla, mevsimsel olmayan ve olan AR\r\nq,Q: SÄ±rasÄ±yla, mevsimsel olmayan ve olan MA\r\nd,D: SÄ±rasÄ±yla, seri duraÄŸan yapÄ±lana kadar kaÃ§ fark alÄ±ndÄ± ve\r\nseriden mevsimsel etkiyi kaldÄ±rmak iÃ§in kaÃ§ fark alÄ±ndÄ±nÄ±n\r\nkarÅŸÄ±lÄ±ÄŸÄ±dÄ±r.\r\nm: Frekans. AylÄ±k veriler ile Ã§alÄ±ÅŸtÄ±ÄŸÄ±mÄ±z iÃ§in 12â€™dir.\r\n\r\n\r\n\r\nModele gÃ¶re enflasyonun MayÄ±s ayÄ±nda 74.79% (Alt: 62.25%, Ãœst:\r\n89.86%); 2022 yÄ±lÄ±nÄ±n sonunda ise 46.07% (Alt: 22.14, Ãœst: 95.85%)\r\nolmasÄ± beklenmektedir. Evet, gÃ¼ven aralÄ±ÄŸÄ± oldukÃ§a geniÅŸ ki bu da\r\nistenen bir durum olmamalÄ± aslÄ±nda.\r\nModele gÃ¶re enflasyonda beklenen yÄ±l sonu dÃ¼ÅŸÃ¼ÅŸÃ¼ beni pek ÅŸaÅŸÄ±rtmadÄ±.\r\nÃ‡Ã¼nkÃ¼, TÃ¼rkiyeâ€™de yarÄ±n bile ne olacaÄŸÄ±nÄ± bilemiyoruz (o zaman neden\r\nmodel kuruyoruzun cevabÄ± Ã¶ngÃ¶rÃ¼ heyecanÄ± ve modeli nasÄ±l\r\niyileÅŸtirebilirizin sorgulanmasÄ±). 2021 yÄ±lÄ±nÄ±n sonlarÄ±na doÄŸru\r\nUSDTRYâ€™nin yÃ¼kseliÅŸi durdurulamazken bir anda KKM Ã§Ä±ktÄ± ve sert bir\r\ndÃ¼ÅŸÃ¼ÅŸ gÃ¶rdÃ¼k. BakalÄ±m enflasyon tarafÄ±nda ne yaÅŸayacaÄŸÄ±z.\r\nSon olarak, bu tÃ¼r Ã§alÄ±ÅŸmalarda modelin yeni veri geldikÃ§e gÃ¶zden\r\ngeÃ§irilmesi ve alternatif yÃ¶ntemlerle desteklenmesi Ã¶nemlidir\r\ndiyebilirim.\r\n\r\n\r\ntarih\r\n\r\n\r\nÃ–ngÃ¶rÃ¼\r\n\r\n\r\nAlt95\r\n\r\n\r\nÃœst95\r\n\r\n\r\n2022-05-01\r\n\r\n\r\n74.79428\r\n\r\n\r\n62.25376\r\n\r\n\r\n89.86098\r\n\r\n\r\n2022-06-01\r\n\r\n\r\n70.54543\r\n\r\n\r\n51.46939\r\n\r\n\r\n96.69160\r\n\r\n\r\n2022-07-01\r\n\r\n\r\n69.65640\r\n\r\n\r\n46.25963\r\n\r\n\r\n104.88657\r\n\r\n\r\n2022-08-01\r\n\r\n\r\n69.76207\r\n\r\n\r\n42.64513\r\n\r\n\r\n114.12196\r\n\r\n\r\n2022-09-01\r\n\r\n\r\n76.10810\r\n\r\n\r\n43.43605\r\n\r\n\r\n133.35566\r\n\r\n\r\n2022-10-01\r\n\r\n\r\n77.00459\r\n\r\n\r\n41.26345\r\n\r\n\r\n143.70364\r\n\r\n\r\n2022-11-01\r\n\r\n\r\n66.99449\r\n\r\n\r\n33.93994\r\n\r\n\r\n132.24130\r\n\r\n\r\n2022-12-01\r\n\r\n\r\n46.06953\r\n\r\n\r\n22.14357\r\n\r\n\r\n95.84728\r\n\r\n\r\n\r\n\r\n\r\nÃ‡alÄ±ÅŸmanÄ±n R kodlarÄ±na aÅŸaÄŸÄ±dan ulaÅŸÄ±labilir.\r\n\r\n\r\noptions(scipen = 999)\r\n\r\nar1_s1 <- arima.sim(model = list(ar = 0), n = 100)\r\nar1_s2 <- arima.sim(model = list(ar = 0.3), n = 100)\r\nar1_s3 <- arima.sim(model = list(ar = 0.5), n = 100)\r\nar1_s4 <- arima.sim(model = list(ar = 0.7), n = 100)\r\nar1_s5 <- arima.sim(model = list(ar = 0.9), n = 100)\r\n\r\nplot.ts(cbind(ar1_s1,ar1_s2,ar1_s3,ar1_s4,ar1_s5),\r\n        nc = 1,\r\n        main = \"AR(1) SÃ¼reci iÃ§in Alternatif YapÄ±lar\")\r\n\r\nma1_s1 <- arima.sim(model = list(ma = 0), n = 100)\r\nma1_s2 <- arima.sim(model = list(ma = -0.3), n = 100)\r\nma1_s3 <- arima.sim(model = list(ma = -0.5), n = 100)\r\nma1_s4 <- arima.sim(model = list(ma = -0.7), n = 100)\r\nma1_s5 <- arima.sim(model = list(ma = -0.9), n = 100)\r\n\r\nplot.ts(cbind(ma1_s1,ma1_s2,ma1_s3,ma1_s4,ma1_s5),\r\n        nc = 1,\r\n        main = \"MA(1) SÃ¼reci iÃ§in Alternatif YapÄ±lar\")\r\n\r\narma11_s1 <- arima.sim(model = list(ar = 0.3, ma = -0.3), n = 100)\r\narma11_s2 <- arima.sim(model = list(ar = 0.8, ma = -0.3), n = 100)\r\narma11_s3 <- arima.sim(model = list(ar = 0.3, ma = -0.8), n = 100)\r\narma11_s4 <- arima.sim(model = list(ar = -0.8, ma = -0.8), n = 100)\r\narma11_s5 <- arima.sim(model = list(ar = 0.8, ma = 0.8), n = 100)\r\narma11_s6 <- arima.sim(model = list(ar = -0.9, ma = 0.8), n = 100)\r\n\r\nplot.ts(cbind(arma11_s1,arma11_s2,arma11_s3,arma11_s4,arma11_s5,arma11_s6),\r\n        nc = 1,\r\n        main = \"ARMA(1,1) SÃ¼reci iÃ§in Alternatif YapÄ±lar\")\r\n\r\narima111_s1 <- arima.sim(model = list(order = c(1,1,1), ar = 0.5, ma = -0.3), n = 100)\r\nplot.ts(arima111_s1, main = \"ARIMA(1,1,1)\")\r\n\r\narima121_s1 <- arima.sim(model = list(order = c(1,2,1), ar = 0.5, ma = -0.3), n = 100)\r\nplot.ts(arima121_s1, main = \"ARIMA(1,2,1)\")\r\n\r\nlibrary(tidyverse)\r\nlibrary(forecast)\r\n\r\ndf <- readxl::read_excel(\"data.xlsx\") %>% \r\n  mutate(tarih = as.Date(paste0(tarih,\"-\",1)),\r\n         lenf = log(enf))\r\n\r\nenflasyon <- ts(data = df$lenf,\r\n                start = c(2004,1),\r\n                end = c(2022,4),\r\n                frequency = 12)\r\n\r\nggplot(df, aes(x = tarih, y = lenf)) +\r\n  geom_line() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.subtitle = element_text(face = \"italic\"),\r\n        plot.caption = element_text(face = \"italic\")) +\r\n  labs(\r\n    title = \"Enflasyon*, 2004/Ocak-2022/Nisan\",\r\n    subtitle = \"*Bir Ã¶nceki yÄ±lÄ±n aynÄ± ayÄ±na gÃ¶re deÄŸiÅŸim\",\r\n    caption = \"Serinin logaritmasÄ± alÄ±nmÄ±ÅŸtÄ±r.\"\r\n  )\r\n\r\nplot(decompose(enflasyon))\r\n\r\nmodel <- auto.arima(y = enflasyon, ic = \"aic\") # trace = TRUE olursa tÃ¼m modeller izlenebilir\r\nmodel\r\ncheckresiduals(model)\r\n\r\nongoru <- forecast(model, h = 8) # MayÄ±s-AralÄ±k = 8 ay\r\n\r\nmodel_output <- data.frame(\r\n  tarih = df$tarih,\r\n  Fit = model$fitted,\r\n  Enflasyon = model$x\r\n) %>% \r\n  bind_rows(\r\n    data.frame(\r\n      tarih = seq(as.Date(\"2022-05-01\"),as.Date(\"2022-12-01\"),by = \"months\"),\r\n      Fit = rep(NA,8),\r\n      Enflasyon = rep(NA,8)\r\n    )\r\n  ) %>% \r\n  mutate(`Ã–ngÃ¶rÃ¼` = c(rep(NA,220),ongoru$mean),\r\n         `Alt95` = c(rep(NA,220),ongoru$lower[,2]),\r\n         `Ãœst95` = c(rep(NA,220),ongoru$upper[,2])) %>% \r\n  pivot_longer(!tarih, names_to = \"var\", values_to = \"val\")\r\n\r\nggplot(model_output %>% filter(!(var %in% c(\"Alt95\",\"Ãœst95\"))),\r\n       aes(x = tarih, y = exp(val), color = var)) +\r\n  geom_line() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank(),\r\n        legend.position = \"top\",\r\n        plot.title = element_text(face = \"bold\")) +\r\n  scale_color_manual(values = c(\"red\",\"gray40\",\"blue\",\"gray\",\"gray\")) +\r\n  labs(title = \"Fit DeÄŸerler ve GerÃ§ek Enflasyon + Ã–ngÃ¶rÃ¼\")\r\n\r\nautoplot(forecast(model, h = 8))\r\n\r\n\r\n\r\nYararlandÄ±ÄŸÄ±m Kaynaklar:\r\nEkonometrik Zaman Serileri Analizi; M.SevÃ¼ktekin,\r\nM.Ã‡Ä±nar\r\nZAMAN\r\nSERÄ°LERÄ° ANALÄ°ZÄ°NDE ARIMA MODELLERÄ° VE BÄ°R UYGULAMA; Ã–.Duru\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-06-01-post8/post8_files/figure-html5/unnamed-chunk-28-1.png",
    "last_modified": "2022-06-08T18:48:04+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-30-post7/",
    "title": "CumhurbaÅŸkanlÄ±ÄŸÄ± HÃ¼kÃ¼met Sistemi YapÄ±sal KÄ±rÄ±lmaya Yol AÃ§tÄ± mÄ±?",
    "description": "Ekonomik ve finansal deÄŸiÅŸkenlerin yapÄ±sal kÄ±rÄ±lma analizi.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-05-30",
    "categories": [
      "Economics",
      "Finance"
    ],
    "contents": "\r\nCumhurbaÅŸkanlÄ±ÄŸÄ± hÃ¼kÃ¼met sistemi, 16 Nisan 2017 referandumu ile kabul\r\nedildi ve 9 Temmuz 2018 tarihinden itibaren de uygulanmaya baÅŸlandÄ±. 24\r\nHaziran 2018â€™de de genel seÃ§imler ile birlikte CumhurbaÅŸkanlÄ±ÄŸÄ± seÃ§imi\r\nyapÄ±ldÄ± ve sistemin ilk lideri ErdoÄŸan oldu.\r\nBu yazÄ±da inceleyeceÄŸimiz konu, CumhurbaÅŸkanlÄ±ÄŸÄ± HÃ¼kÃ¼met Sistemiâ€™nin\r\nekonomik ve finansal deÄŸiÅŸkenlerde yapÄ±sal kÄ±rÄ±lmaya yol aÃ§Ä±p\r\naÃ§madÄ±ÄŸÄ±dÄ±r.\r\nYapÄ±sal kÄ±rÄ±lma analizi iÃ§in enflasyon, kur ve faiz verilerini\r\nseÃ§tim. TCMB/EVDSâ€™den aldÄ±ÄŸÄ±m verilere (post7.xlsx) GitHub\r\nhesabÄ±mdan ulaÅŸabilirsiniz.\r\nFrekanslarÄ± aylÄ±k ve Ã§eyreklik bazda alÄ±p yapÄ±sal kÄ±rÄ±lmayÄ± bu\r\nÅŸekilde inceleyeceÄŸiz. Veri aralÄ±ÄŸÄ± ise 2015-2022 yÄ±llarÄ± arasÄ±nÄ±\r\nkapsayacak.\r\nAylÄ±k olan frekanslarÄ± Ã§eyreklik olarak da incelemek isteme sebebim,\r\nbir olayÄ±n etkisi hemen o ay deÄŸil; iÃ§inde bulunduÄŸu Ã§eyrek iÃ§inde\r\nbaÅŸladÄ±ysa kaÃ§Ä±rmamaktÄ±r. 2015-2022 yÄ±llarÄ±nÄ± seÃ§me sebebim ise 2018\r\nyÄ±lÄ±nÄ±n Ã¶ncesi ve sonrasÄ±na zamanÄ± yaklaÅŸÄ±k olarak eÅŸit daÄŸÄ±tmaktÄ±r.\r\nÃ‡alÄ±ÅŸmada, serilerde birden fazla yapÄ±sal kÄ±rÄ±lma olduÄŸu zaman\r\nkullanÄ±labilen ve bu kÄ±rÄ±lmalarÄ± endojen (iÃ§sel) olarak kabul eden\r\nBai-Perron yÃ¶ntemi kullanÄ±lmÄ±ÅŸtÄ±r. Bai-Perron (1998,2003), en kÃ¼Ã§Ã¼k\r\nkareler yÃ¶ntemi ile tahmin edilen regresyon modelinde bilinmeyen kÄ±rÄ±lma\r\nzamanlarÄ±nÄ± belirlemek amacÄ±yla Ã§oklu kÄ±rÄ±lmalarÄ±n tespitine yÃ¶nelik\r\ntest geliÅŸtirmiÅŸlerdir.\r\nBilinmeyen tarihlerdeki m adet kÄ±rÄ±lma (m+1 rejim) iÃ§in oluÅŸturulan\r\nÃ§oklu regresyon modeli ÅŸÃ¶yledir:\r\n\\(y_t = x_t'\\beta + z_t'\\delta_1 +\r\n\\epsilon_t; t = 1,...,T_1\\)\r\n\\(y_t = x_t'\\beta + z_t'\\delta_2 +\r\n\\epsilon_t; t = T_1 + 1,...,T_2\\)\r\n. . .\r\n\\(y_t = x_t'\\beta + z_t'\\delta_j +\r\n\\epsilon_t; t = T_{j-1} + 1,...T_j; j = 1,...,m\\)\r\nSon yazdÄ±ÄŸÄ±mÄ±z denklemde;\r\n\\(x_t'\\) ve \\(z_t'\\) sÄ±rasÄ±yla px1 ve qx1 boyutlu\r\nbaÄŸÄ±msÄ±z deÄŸiÅŸkenler vektÃ¶rÃ¼,\r\n\\(\\beta\\) ve \\(\\delta_j\\) katsayÄ±lar vektÃ¶rÃ¼,\r\n\\(\\epsilon_t\\) saf hata terimi,\r\n\\(T_0 = 0\\) ve \\(T_{m+1} = T\\) olmak Ã¼zere, \\(T_1,T_2,...,T_m\\) bilinmeyen kÄ±rÄ±lma\r\nnoktalarÄ±dÄ±r.\r\nBai-Perron testinin temel amacÄ±, T sayÄ±da gÃ¶zlem, \\(y_t\\), \\(x_t'\\) ve \\(z_t'\\)â€™nin deÄŸerlerinin bilindiÄŸi\r\nvarsayÄ±mÄ± altÄ±nda, bilinmeyen regresyon parametreleri (\\(\\beta,\\delta_1,...,\\delta_m\\)) ve kÄ±rÄ±lma\r\ntarihlerinin (\\(T_1,T_2,...,T_m\\))\r\nbirlikte tahmin edilmesidir.\r\n\r\n\r\n\r\nEnflasyon\r\n\r\n\r\n\r\n=============================\r\n                  (Intercept)\r\n-----------------------------\r\n2015(1) - 2018(5)    9.094   \r\n2018(6) - 2021(3)   15.302   \r\n2021(4) - 2022(4)   32.352   \r\n-----------------------------\r\n\r\nAylÄ±k frekansta 2 tane kÄ±rÄ±lmanÄ±n olduÄŸunu gÃ¶rÃ¼yoruz. Ä°lk kÄ±rÄ±lma\r\n2018 yÄ±lÄ±nÄ±n MayÄ±s ayÄ±na denk geliyor. Haziran ve Temmuz 2018â€™in\r\nsÄ±rasÄ±yla seÃ§imin yapÄ±ldÄ±ÄŸÄ± ve sistemin uygulanmaya baÅŸlandÄ±ÄŸÄ± aylar\r\nolduÄŸunu biliyoruz. Sistem iÃ§erisinde bir kÄ±rÄ±lma da Mart 2021â€™de\r\nyaÅŸanmÄ±ÅŸ. Bu, piyasalara verdiÄŸi gÃ¼ven ile bilinen TCMB eski baÅŸkanÄ±\r\nNaci AÄŸbalâ€™Ä±n gÃ¶revden alÄ±ndÄ±ÄŸÄ± dÃ¶nemdir. YazÄ±nÄ±n ilerleyen bÃ¶lÃ¼mlerinde\r\nfaizi de inceleyeceÄŸiz. Åžimdi o faizi alÄ±p enflasyon ile bir araya\r\ngetirip bir bakalÄ±m. Ã‡Ã¼nkÃ¼, faiz sebep enflasyon sonuÃ§tur\r\nÄ±srarÄ±nÄ±n bedelini Ã¶demeye devam ettiÄŸimizin resmi olacak.\r\n\r\n\r\n\r\n\r\n\r\n\r\n=============================\r\n                  (Intercept)\r\n-----------------------------\r\n2015(1) - 2021(2)   12.107   \r\n2021(3) - 2022(2)   42.438   \r\n-----------------------------\r\n\r\nÃ‡eyreklik frekansta sadece 1 kÄ±rÄ±lma verdi o da 2021 yÄ±lÄ±nÄ±n 2.\r\nÃ§eyreÄŸine ait.\r\nÃœzerinde durduÄŸumuz enflasyon-faiz serilerindeki kÄ±rÄ±lmayÄ± Ã§eyreklik\r\nolarak biraz daha fazla gÃ¶rebiliriz.\r\n\r\n\r\n\r\nFaiz\r\n\r\n\r\n\r\n===============================\r\n                    (Intercept)\r\n-------------------------------\r\n2015(1) - 2017(2)      8.488   \r\n2017(3) - 2018(6)     12.598   \r\n2018(7) - 2019(9)     22.383   \r\n2019(10) - 2020(10)   10.650   \r\n2020(11) - 2022(4)    16.628   \r\n-------------------------------\r\n\r\nAylÄ±k frekansta 4 tane kÄ±rÄ±lmanÄ±n olduÄŸunu gÃ¶rÃ¼yoruz. Sistemle\r\nberaber ilk kÄ±rÄ±lma 2018 yÄ±lÄ±nÄ±n Haziran ayÄ±nda yaÅŸanmÄ±ÅŸ ve bu\r\nkÄ±rÄ±lmadan sonra 2 kÄ±rÄ±lma daha yaÅŸanmÄ±ÅŸ. ErdoÄŸanâ€™Ä±n 24 Haziran Ã¶ncesi\r\nsÃ¶ylediÄŸi, 24â€™Ã¼nde siz bu kardeÅŸinize yetkiyi verin, ondan sonra bu\r\nfaizle, ÅŸunla bunla nasÄ±l uÄŸraÅŸÄ±lÄ±r gÃ¶receksiniz sÃ¶zÃ¼nÃ¼n tabloya\r\nyansÄ±mÄ±ÅŸ halini gÃ¶rÃ¼yoruz adeta.\r\n\r\n\r\n\r\n=============================\r\n                  (Intercept)\r\n-----------------------------\r\n2015(1) - 2017(1)    8.580   \r\n2017(2) - 2018(2)   12.706   \r\n2018(3) - 2019(3)   22.383   \r\n2019(4) - 2020(3)   10.522   \r\n2020(4) - 2022(2)   16.166   \r\n-----------------------------\r\n\r\nÃ‡eyreklik frekansta sistem ile beraber 3 kÄ±rÄ±lma gÃ¶rÃ¼yoruz. Ä°lki\r\nseÃ§imin de iÃ§inde bulunduÄŸu 2. Ã§eyrek.\r\nKur\r\n\r\n\r\n\r\n=============================\r\n                  (Intercept)\r\n-----------------------------\r\n2015(1) - 2018(4)    3.202   \r\n2018(5) - 2020(2)    5.565   \r\n2020(3) - 2021(3)    7.246   \r\n2021(4) - 2022(4)   10.790   \r\n-----------------------------\r\n\r\nAylÄ±k frekansta 3 tane kÄ±rÄ±lmanÄ±n olduÄŸunu gÃ¶rÃ¼yoruz. Sistemden Ã¶nce\r\nkÄ±rÄ±lma 2018 yÄ±lÄ±nÄ±n Nisan ayÄ±nda yaÅŸanmÄ±ÅŸ ve bu kÄ±rÄ±lmadan sonra sistem\r\niÃ§erisinde 2 kÄ±rÄ±lma daha yaÅŸanmÄ±ÅŸ. KÄ±rÄ±lmalardan biri yine daha Ã¶nce\r\nbahsettiÄŸim eski baÅŸkan AÄŸbalâ€™Ä±n gÃ¶revden alÄ±ndÄ±ÄŸÄ± tarihte yaÅŸanmÄ±ÅŸ.\r\n\r\n\r\n\r\n=============================\r\n                  (Intercept)\r\n-----------------------------\r\n2015(1) - 2018(2)    3.265   \r\n2018(3) - 2020(1)    5.700   \r\n2020(2) - 2021(2)    7.532   \r\n2021(3) - 2022(2)   12.046   \r\n-----------------------------\r\n\r\nÃ‡eyreklik frekansta sistemin de iÃ§inde bulunduÄŸu 2018 yÄ±lÄ±nÄ±n 2.\r\nÃ§eyreÄŸindeki kÄ±rÄ±lma ile beraber toplamda 3 kÄ±rÄ±lma yaÅŸanmÄ±ÅŸ.\r\nSon olarak enflasyon, faiz ve kur deÄŸiÅŸkenlerini endeks\r\nhaline getirelim. Soru: 2011 yÄ±lÄ± itibarÄ±yla kaÃ§ kÄ±rÄ±lma\r\nyaÅŸandÄ±?\r\nSerileri Ã¶nce aÅŸaÄŸÄ±daki gibi normalize edeceÄŸiz.\r\n\\(X_{nor} = \\frac{X - X_{min}}{X_{max} -\r\nX_{min}}\\)\r\nArdÄ±ndan da deÄŸiÅŸken sayÄ±sÄ±na bÃ¶lerek bir endeks oluÅŸturacaÄŸÄ±z.\r\n\\(Endeks =\r\n\\frac{Nor(Enflasyon)+Nor(Faiz)+Nor(Kur)}{3}\\)\r\nFaiz iÃ§in AÄŸÄ±rlÄ±klÄ± Ortalama Fonlama Maliyetiâ€™ni kullandÄ±ÄŸÄ±mÄ±z ve bu\r\nveri de 2011 yÄ±lÄ± itibarÄ±yla ulaÅŸÄ±labilir olduÄŸu iÃ§in 2011/Ocak -\r\n2022/Nisan verilerini kullanacaÄŸÄ±z.\r\n\r\n\r\n\r\n\r\n\r\n\r\n==============================\r\n                   (Intercept)\r\n------------------------------\r\n2011(1) - 2016(9)     0.082   \r\n2016(10) - 2018(5)    0.198   \r\n2018(6) - 2020(8)     0.382   \r\n2020(9) - 2022(4)     0.508   \r\n------------------------------\r\n\r\n2011 yÄ±lÄ± itbarÄ±yla aylÄ±k (ve Ã§eyreklik) frekansta 3 kÄ±rÄ±lmanÄ±n\r\nyaÅŸandÄ±ÄŸÄ±nÄ± gÃ¶rÃ¼yoruz. BunlarÄ±n ilki sistem Ã¶ncesi, biri sisteme Ã§ok\r\nyakÄ±n ve biri sistem sonrasÄ±. Sistem ile beraber oluÅŸturulan endeksin\r\nyukarÄ± doÄŸru tÄ±rmanÄ±ÅŸÄ± dikkat Ã§ekici. Her ne kadar sonrasÄ±nda bir\r\ntoparlanma sÃ¼recine girse de atÄ±lan yanlÄ±ÅŸ adÄ±mlarÄ±n etkisi Ã§ok ciddi\r\nolmuÅŸ ki olmaya da devam ediyor.\r\n\r\n\r\n\r\n=============================\r\n                  (Intercept)\r\n-----------------------------\r\n2011(1) - 2016(4)    0.084   \r\n2017(1) - 2018(2)    0.220   \r\n2018(3) - 2020(4)    0.378   \r\n2021(1) - 2022(2)    0.580   \r\n-----------------------------\r\n\r\nÃ‡alÄ±ÅŸmanÄ±n R kodlarÄ±na aÅŸaÄŸÄ±dan ulaÅŸÄ±labilir.\r\n\r\n\r\noptions(scipen = 999)\r\n\r\nlibrary(strucchange) # yapÄ±sal kÄ±rÄ±lma\r\nlibrary(tidyverse)\r\nlibrary(lubridate)\r\nlibrary(stargazer)\r\n\r\ndf_aylik <- readxl::read_excel(\"data.xlsx\") %>% \r\n  mutate(tarih = as.Date(paste0(tarih,\"-\",1))) %>% \r\n  na.omit() %>% \r\n  filter(tarih >= as.Date(\"2015-01-01\"))\r\n\r\n# enflasyon\r\n\r\nenf_aylik <- df_aylik %>% \r\n  select(tarih,enflasyon) %>% \r\n  mutate(t = seq(1,nrow(.),1))\r\n\r\nenf_ceyreklik <- enf_aylik %>% \r\n  mutate(tarih = as.Date(paste0(year(tarih),\"-\",quarter(tarih),\"-\",1))) %>% \r\n  group_by(tarih) %>% \r\n  summarise(enflasyon = mean(enflasyon)) %>% \r\n  ungroup() %>% \r\n  mutate(t = seq(1,nrow(.),1))\r\n\r\n# faiz\r\n\r\nfaiz_aylik <- df_aylik %>% \r\n  select(tarih,faiz) %>% \r\n  mutate(t = seq(1,nrow(.),1))\r\n\r\nfaiz_ceyreklik <- faiz_aylik %>% \r\n  mutate(tarih = as.Date(paste0(year(tarih),\"-\",quarter(tarih),\"-\",1))) %>% \r\n  group_by(tarih) %>% \r\n  summarise(faiz = mean(faiz)) %>% \r\n  ungroup() %>% \r\n  mutate(t = seq(1,nrow(.),1))\r\n\r\n# kur\r\n\r\nkur_aylik <- df_aylik %>% \r\n  select(tarih,kur) %>% \r\n  mutate(t = seq(1,nrow(.),1))\r\n\r\nkur_ceyreklik <- kur_aylik %>% \r\n  mutate(tarih = as.Date(paste0(year(tarih),\"-\",quarter(tarih),\"-\",1))) %>% \r\n  group_by(tarih) %>% \r\n  summarise(kur = mean(kur)) %>% \r\n  ungroup() %>% \r\n  mutate(t = seq(1,nrow(.),1))\r\n\r\nenf_aylik_ts <- ts(data = enf_aylik$enflasyon,\r\n                   start = c(2015,1),\r\n                   frequency = 12)\r\n\r\nenf_aylik_bps <- breakpoints(enf_aylik_ts~1)\r\n\r\nenf_aylik <- enf_aylik %>% \r\n  mutate(bp = ifelse(t %in% enf_aylik_bps$breakpoints, t, NA))\r\n\r\nggplot(enf_aylik, aes(x = tarih, y = enflasyon)) +\r\n  geom_line() +\r\n  geom_vline(data = enf_aylik %>% na.omit(),\r\n             aes(xintercept = tarih), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", size = 10),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        axis.title = element_blank()) +\r\n  scale_x_date(date_breaks = \"year\", date_labels = \"%Y\") +\r\n  labs(title = \"Enflasyon, AylÄ±k\",\r\n       subtitle = \"2015/Ocak-2022/Nisan\")\r\n\r\nstargazer(coef(enf_aylik_bps), type = \"text\")\r\n\r\nenf_faiz_aylik <- merge(enf_aylik[,c(1,2)], faiz_aylik[,c(1,2)]) %>% \r\n  mutate(t = seq(1,nrow(.),1)) %>% \r\n  pivot_longer(!c(t,tarih), names_to = \"vars\", values_to = \"vals\")\r\n\r\nenf_faiz_tarih <- enf_faiz_aylik %>% \r\n  filter(t == enf_aylik_bps$breakpoints[2]) %>% \r\n  pull(tarih)\r\n\r\nggplot(enf_faiz_aylik, aes(x = tarih, y = vals, group = vars, color = vars)) +\r\n  geom_line() +\r\n  geom_vline(xintercept = enf_faiz_tarih, linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        legend.position = \"top\",\r\n        legend.title = element_blank()) +\r\n  scale_color_manual(values = c(\"red\",\"blue\")) +\r\n  scale_x_date(date_breaks = \"year\", date_labels = \"%Y\") +\r\n  labs(title = \"AylÄ±k\")\r\n\r\nenf_ceyreklik_ts <- ts(data = enf_ceyreklik$enflasyon,\r\n                       start = c(2015,1),\r\n                       frequency = 4)\r\n\r\nenf_ceyreklik_bps <- breakpoints(enf_ceyreklik_ts~1)\r\n\r\nenf_ceyreklik <- enf_ceyreklik %>% \r\n  mutate(bp = ifelse(t %in% enf_ceyreklik_bps$breakpoints, t, NA))\r\n\r\nggplot(enf_ceyreklik, aes(x = tarih, y = enflasyon)) +\r\n  geom_line() +\r\n  geom_vline(data = enf_ceyreklik %>% na.omit(),\r\n             aes(xintercept = tarih), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", size = 10),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        plot.caption = element_text(face = \"italic\", size = 7),\r\n        axis.title = element_blank()) +\r\n  scale_x_date(date_breaks = \"year\", date_labels = \"%Y\") +\r\n  labs(title = \"Enflasyon, Ã‡eyreklik*\",\r\n       subtitle = \"2015/Q1-2022/Q2**\",\r\n       caption = \"*ÃœÃ§er aylÄ±k ortalamalardÄ±r.\\n**HenÃ¼z tamamlanmamÄ±ÅŸtÄ±r.\")\r\n\r\nstargazer(coef(enf_ceyreklik_bps), type = \"text\")\r\n\r\nenf_faiz_ceyreklik <- merge(enf_ceyreklik[,c(1,2)], faiz_ceyreklik[,c(1,2)]) %>% \r\n  mutate(t = seq(1,nrow(.),1)) %>% \r\n  pivot_longer(!c(t,tarih), names_to = \"vars\", values_to = \"vals\")\r\n\r\nenf_faiz_tarih2 <- enf_faiz_ceyreklik %>% \r\n  filter(t == enf_ceyreklik_bps$breakpoints[1]) %>% \r\n  pull(tarih)\r\n\r\nggplot(enf_faiz_ceyreklik, aes(x = tarih, y = vals, group = vars, color = vars)) +\r\n  geom_line() +\r\n  geom_vline(xintercept = enf_faiz_tarih2, linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        legend.position = \"top\",\r\n        legend.title = element_blank()) +\r\n  scale_color_manual(values = c(\"red\",\"blue\")) +\r\n  scale_x_date(date_breaks = \"year\", date_labels = \"%Y\") +\r\n  labs(title = \"Ã‡eyreklik\")\r\n\r\nfaiz_aylik_ts <- ts(data = faiz_aylik$faiz,\r\n                    start = c(2015,1),\r\n                    frequency = 12)\r\n\r\nfaiz_aylik_bps <- breakpoints(faiz_aylik_ts~1)\r\n\r\nfaiz_aylik <- faiz_aylik %>% \r\n  mutate(bp = ifelse(t %in% faiz_aylik_bps$breakpoints, t, NA))\r\n\r\nggplot(faiz_aylik, aes(x = tarih, y = faiz)) +\r\n  geom_line() +\r\n  geom_vline(data = faiz_aylik %>% na.omit(),\r\n             aes(xintercept = tarih), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", size = 10),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        axis.title = element_blank()) +\r\n  scale_x_date(date_breaks = \"year\", date_labels = \"%Y\") +\r\n  labs(title = \"Faiz, AylÄ±k\",\r\n       subtitle = \"2015/Ocak-2022/Nisan\")\r\n\r\nstargazer(coef(faiz_aylik_bps), type = \"text\")\r\n\r\nfaiz_ceyreklik_ts <- ts(data = faiz_ceyreklik$faiz,\r\n                        start = c(2015,1),\r\n                        frequency = 4)\r\n\r\nfaiz_ceyreklik_bps <- breakpoints(faiz_ceyreklik_ts~1)\r\n\r\nfaiz_ceyreklik <- faiz_ceyreklik %>% \r\n  mutate(bp = ifelse(t %in% faiz_ceyreklik_bps$breakpoints, t, NA))\r\n\r\nggplot(faiz_ceyreklik, aes(x = tarih, y = faiz)) +\r\n  geom_line() +\r\n  geom_vline(data = faiz_ceyreklik %>% na.omit(),\r\n             aes(xintercept = tarih), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", size = 10),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        plot.caption = element_text(face = \"italic\", size = 7),\r\n        axis.title = element_blank()) +\r\n  scale_x_date(date_breaks = \"year\", date_labels = \"%Y\") +\r\n  labs(title = \"Faiz, Ã‡eyreklik*\",\r\n       subtitle = \"2015/Q1-2022/Q2**\",\r\n       caption = \"*ÃœÃ§er aylÄ±k ortalamalardÄ±r.\\n**HenÃ¼z tamamlanmamÄ±ÅŸtÄ±r.\")\r\n\r\nstargazer(coef(faiz_ceyreklik_bps), type = \"text\")\r\n\r\nkur_aylik_ts <- ts(data = kur_aylik$kur,\r\n                   start = c(2015,1),\r\n                   frequency = 12)\r\n\r\nkur_aylik_bps <- breakpoints(kur_aylik_ts~1)\r\n\r\nkur_aylik <- kur_aylik %>% \r\n  mutate(bp = ifelse(t %in% kur_aylik_bps$breakpoints, t, NA))\r\n\r\nggplot(kur_aylik, aes(x = tarih, y = kur)) +\r\n  geom_line() +\r\n  geom_vline(data = kur_aylik %>% na.omit(),\r\n             aes(xintercept = tarih), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", size = 10),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        axis.title = element_blank()) +\r\n  scale_x_date(date_breaks = \"year\", date_labels = \"%Y\") +\r\n  labs(title = \"Kur, AylÄ±k\",\r\n       subtitle = \"2015/Ocak-2022/Nisan\")\r\n\r\nstargazer(coef(kur_aylik_bps), type = \"text\")\r\n\r\nkur_ceyreklik_ts <- ts(data = kur_ceyreklik$kur,\r\n                       start = c(2015,1),\r\n                       frequency = 4)\r\n\r\nkur_ceyreklik_bps <- breakpoints(kur_ceyreklik_ts~1)\r\n\r\nkur_ceyreklik <- kur_ceyreklik %>% \r\n  mutate(bp = ifelse(t %in% kur_ceyreklik_bps$breakpoints, t, NA))\r\n\r\nggplot(kur_ceyreklik, aes(x = tarih, y = kur)) +\r\n  geom_line() +\r\n  geom_vline(data = kur_ceyreklik %>% na.omit(),\r\n             aes(xintercept = tarih), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", size = 10),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        plot.caption = element_text(face = \"italic\", size = 7),\r\n        axis.title = element_blank()) +\r\n  scale_x_date(date_breaks = \"year\", date_labels = \"%Y\") +\r\n  labs(title = \"Kur, Ã‡eyreklik*\",\r\n       subtitle = \"2015/Q1-2022/Q2**\",\r\n       caption = \"*ÃœÃ§er aylÄ±k ortalamalardÄ±r.\\n**HenÃ¼z tamamlanmamÄ±ÅŸtÄ±r.\")\r\n\r\nstargazer(coef(kur_ceyreklik_bps), type = \"text\")\r\n\r\ndf_aylik2 <- readxl::read_excel(\"data.xlsx\") %>% \r\n  mutate(tarih = as.Date(paste0(tarih,\"-\",1))) %>% \r\n  na.omit()\r\n\r\nnormalize <- function(x){\r\n  \r\n  return((x - min(x)) / (max(x) - min(x)))\r\n  \r\n}\r\n\r\ndf_endeks <- df_aylik2 %>% \r\n  mutate_at(vars(-tarih), function(x) normalize(x)) %>% \r\n  mutate(endeks = rowSums(.[,-1])/ncol(.[,-1]),\r\n         t = seq(1,nrow(.),1))\r\n\r\nendeks_aylik_ts <- ts(data = df_endeks$endeks,\r\n                      start = c(2011,1),\r\n                      frequency = 12)\r\n\r\nendeks_aylik_bps <- breakpoints(endeks_aylik_ts~1)\r\n\r\ndf_endeks <- df_endeks %>% \r\n  mutate(bp = ifelse(t %in% endeks_aylik_bps$breakpoints, t, NA))\r\n\r\nggplot(df_endeks, aes(x = tarih, y = endeks)) +\r\n  geom_line() +\r\n  geom_vline(data = df_endeks %>% na.omit(),\r\n             aes(xintercept = tarih), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", size = 10),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        plot.caption = element_text(face = \"italic\"),\r\n        axis.title = element_blank()) +\r\n  scale_x_date(date_breaks = \"year\", date_labels = \"%Y\") +\r\n  labs(title = \"2011 YÄ±lÄ± Ä°tibarÄ±yla YapÄ±sal KÄ±rÄ±lmalar\",\r\n       subtitle = \"2011/Ocak-2022/Nisan\",\r\n       caption = \"*Normalize edilen (Enflasyon+Faiz+Kur)/3\")\r\n\r\nstargazer(coef(endeks_aylik_bps), type = \"text\")\r\n\r\ndf_endeks2 <- df_endeks %>% \r\n  select(1:5) %>% \r\n  mutate(tarih = as.Date(paste0(year(tarih),\"-\",quarter(tarih),\"-\",1))) %>% \r\n  group_by(tarih) %>% \r\n  summarise(endeks = mean(endeks)) %>% \r\n  ungroup() %>% \r\n  mutate(t = seq(1,nrow(.),1))\r\n\r\nendeks_ceyreklik_ts <- ts(data = df_endeks2$endeks,\r\n                          start = c(2011,1),\r\n                          frequency = 4)\r\n\r\nendeks_ceyreklik_bps <- breakpoints(endeks_ceyreklik_ts~1)\r\n\r\ndf_endeks2 <- df_endeks2 %>% \r\n  mutate(bp = ifelse(t %in% endeks_ceyreklik_bps$breakpoints, t, NA))\r\n\r\nggplot(df_endeks2, aes(x = tarih, y = endeks)) +\r\n  geom_line() +\r\n  geom_vline(data = df_endeks2 %>% na.omit(),\r\n             aes(xintercept = tarih), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", size = 10),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        plot.caption = element_text(face = \"italic\"),\r\n        axis.title = element_blank()) +\r\n  scale_x_date(date_breaks = \"year\", date_labels = \"%Y\") +\r\n  labs(title = \"2011 YÄ±lÄ± Ä°tibarÄ±yla YapÄ±sal KÄ±rÄ±lmalar\",\r\n       subtitle = \"2011/Q1-2022/Q2*\",\r\n       caption = \"*Normalize edilen (Enflasyon+Faiz+Kur)/3\\nHenÃ¼z tamamlanmamÄ±ÅŸtÄ±r.\")\r\n\r\nstargazer(coef(endeks_ceyreklik_bps), type = \"text\")\r\n\r\n\r\n\r\nYararlandÄ±ÄŸÄ±m Kaynaklar:\r\nFinansal Ekonometri; N.Ã‡.Yavuz\r\nCumhurbaÅŸkanlÄ±ÄŸÄ±\r\nHÃ¼kÃ»met Sistemi\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-05-30-post7/post7_files/figure-html5/unnamed-chunk-11-1.png",
    "last_modified": "2022-05-30T18:29:06+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-24-post6/",
    "title": "Ä°llerin SeÃ§im ZamanÄ± TÃ¼ketici GÃ¼ven Endeksi ve Enflasyona Olan DuyarlÄ±lÄ±ÄŸÄ±",
    "description": "TÃ¼ketici GÃ¼ven Endeksi ve Enflasyon ile illerin oy oranlarÄ± arasÄ±ndaki korelasyon.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-05-24",
    "categories": [
      "Election"
    ],
    "contents": "\r\nOy vermede seÃ§menleri etkileyen birÃ§ok faktÃ¶r bulunmaktadÄ±r ve\r\nliteratÃ¼rde birÃ§ok oy verme modeli bulunmaktadÄ±r. Bunlardan biri de\r\nekonomik oy verme modelidir. Siyaset biliminde ekonomik oylama, seÃ§men\r\ndavranÄ±ÅŸÄ±nÄ±n seÃ§im anÄ±nda Ã¼lkelerindeki ekonomik koÅŸullardan bÃ¼yÃ¼k\r\nÃ¶lÃ§Ã¼de etkilendiÄŸini savunan teorik bir bakÄ±ÅŸ aÃ§Ä±sÄ±dÄ±r.\r\nEkonomik oy verme modelinden yola Ã§Ä±karak iki tane deÄŸiÅŸken\r\nbelirledim: TÃ¼ketici GÃ¼ven Endeksi ve Enflasyon. Ä°llerin oy oranlarÄ±nÄ±\r\nise AKP ile sÄ±nÄ±rlayÄ±p 2007, 2011, 2015-I, 2015-II ve 2018 genel\r\nseÃ§imlerini dikkate aldÄ±m. GÃ¶zlem sayÄ±sÄ±nÄ±n az oluÅŸundan (N = 5) dolayÄ±\r\nanalizime temkinli yaklaÅŸÄ±lmasÄ± konusunda uyarmalÄ±yÄ±m ancak bir miktar\r\nfikir verebileceÄŸini de eklemek istiyorum. Ã–zellikle TÃ¼ketici GÃ¼ven\r\nEndeksi tarafÄ± yakÄ±ndan takip edilmelidir.\r\nTÃœÄ°Kâ€™ten aldÄ±ÄŸÄ±m verilere (post6_1.xls, post6_2.xls,\r\npost6_3.xls) GitHub\r\nhesabÄ±mdan ulaÅŸabilirsiniz. Oy oranlarÄ± verileri Vikipediâ€™den web\r\nkazÄ±ma yÃ¶ntemi ile alÄ±nmÄ±ÅŸtÄ±r.\r\n\r\n\r\n\r\nTÃ¼ketici GÃ¼ven Endeksi\r\n\r\n\r\n\r\nTÃ¼ketici GÃ¼ven Endeksi, 2004 yÄ±lÄ±nÄ±n Ocak ayÄ±ndan 2022 yÄ±lÄ±nÄ±n MayÄ±s\r\nayÄ±na kadar toparlama sÃ¼recine girse de aÅŸaÄŸÄ± yÃ¶nlÃ¼ bir eÄŸilim\r\nsergilemiÅŸtir. 0 ile 200 arasÄ±nda yer alan endeksin 100 Ã¼zerinde\r\nolmasÄ±nÄ±n iyimser durumu gÃ¶sterdiÄŸini baz alÄ±rsak 221 ayÄ±n sadece\r\n7â€™sinde iyimser bÃ¶lgede kalabilmiÅŸ. Bu 7 deÄŸerin 6â€™sÄ± 2004, 1â€™i ise 2006\r\nyÄ±lÄ±na aittir.\r\nVerilerin olduÄŸu aralÄ±kta ilk genel seÃ§im 22 Temmuz 2007â€™de oldu ve\r\nendeks Haziran ve Temmuz 2007â€™de sÄ±rasÄ±yla 96.5 ve 97.2 idi. BugÃ¼n\r\nendeks 67.6 olmuÅŸtur.\r\n\r\n\r\n\r\nEnflasyon\r\n\r\n\r\n\r\nEnflasyon, 2004 yÄ±lÄ±nÄ±n Ocak ayÄ±ndan 2022 yÄ±lÄ±nÄ±n Nisan ayÄ±na kadar\r\nlogaritmik olarak baktÄ±ÄŸÄ±mÄ±z zaman eksponansiyel bir artÄ±ÅŸ sergilemiÅŸ\r\ndiyebiliriz. Ä°lk ciddi bozulmasÄ±nÄ± ise 2018 yÄ±lÄ±nda gÃ¶stermiÅŸ. 20% Ã¼stÃ¼\r\nenflasyonun olduÄŸu 11 ayÄ±n 4â€™Ã¼ 2018â€™e, 1â€™i 2019â€™a, 2â€™si 2021â€™e ve kalan\r\n4â€™Ã¼ 2022â€™ye aittir.\r\nVerilerin olduÄŸu aralÄ±kta ilk genel seÃ§im 22 Temmuz 2007â€™de oldu ve\r\nenflasyon Haziran ve Temmuz 2007â€™de sÄ±rasÄ±yla 8.6% ve 6.9% idi. BugÃ¼n\r\nenflasyon 70% olmuÅŸtur.\r\n\r\n\r\n\r\nGenel SeÃ§imler AKP Oy OranÄ±\r\nTÃ¼rkiye, AKPâ€™nin olduÄŸu 6 genel seÃ§im gÃ¶rmÃ¼ÅŸtÃ¼r.\r\n3 KasÄ±m 2002\r\n22 Temmuz 2007\r\n12 Haziran 2011\r\n7 Haziran 2015\r\n1 KasÄ±m 2015\r\n24 Haziran 2018\r\nGenel seÃ§imlerde (2002 analizde olmayacaÄŸÄ± iÃ§in hariÃ§) aldÄ±klarÄ± oy\r\noranlarÄ±nÄ±n zaman serisi aÅŸaÄŸÄ±daki gibidir.\r\n\r\n\r\n\r\nDeÄŸiÅŸkenler ile Oy OranlarÄ± ArasÄ±ndaki Ä°liÅŸki\r\n\r\n\r\n\r\nTÃ¼ketici GÃ¼ven Endeksi ve TÃ¼rkiye Geneli Oy OranlarÄ±\r\nKorelasyonu\r\nTÃ¼rkiye genelinde, TÃ¼ketici GÃ¼ven Endeksiâ€™nin artÄ±ÅŸÄ± oy oranlarÄ±na\r\npozitif; dÃ¼ÅŸÃ¼ÅŸÃ¼ ise negatif yansÄ±mÄ±ÅŸtÄ±r. Aradaki korelasyon: 90.5%\r\n\r\n\r\n\r\nEnflasyon ve TÃ¼rkiye Geneli Oy OranlarÄ±\r\nKorelasyonu\r\nTÃ¼rkiye genelinde, Enflasyon artÄ±ÅŸÄ± oy oranlarÄ±na negatif; dÃ¼ÅŸÃ¼ÅŸÃ¼ ise\r\npozitif yansÄ±mÄ±ÅŸtÄ±r ifadesini aslÄ±nda tam olarak sÃ¶yleyemiyoruz. 2018\r\nyÄ±lÄ±na ait enflasyon oranÄ± bir uÃ§ deÄŸer olmuÅŸtur ve eÄŸimi aÅŸaÄŸÄ±ya\r\nÃ§ekmektedir. Aradaki korelasyon: -45.8%\r\n\r\n\r\n\r\nYukarÄ±daki inceleme geneli yansÄ±tmaktaydÄ±. Ä°ller bazÄ±nda iliÅŸkiler ve\r\nkorelasyon katsayÄ±larÄ± deÄŸiÅŸkenlik gÃ¶sterebilir ki konumuz da bununla\r\nilgilidir.\r\nTÃ¼ketici GÃ¼ven Endeksi ve Ä°llere Ait Oy OranlarÄ±\r\nKorelasyonu\r\n\r\n\r\n\r\nTÃ¼ketici GÃ¼ven Endeksiâ€™ne en hassas ilin Erzurum olduÄŸunu\r\nsÃ¶yleyebiliriz. Bu ili sÄ±rasÄ±yla EskiÅŸehir ve BingÃ¶l takip ediyor. ZayÄ±f\r\nda olsa negatif korelasyon gÃ¶steren 3 il ise Rize, KÄ±rklareli ve Edirne.\r\n81 ilin 58â€™i 50%â€™den fazla pozitif korelasyonu olan yerlerdir.\r\n\r\n\r\n\r\n90% Ã¼stÃ¼ pozitif korelasyona sahip iller\r\n\r\n\r\n\r\nEnflasyon ve Ä°llere Ait Oy OranlarÄ± Korelasyonu\r\n\r\n\r\n\r\nEnflasyona en hassas ilin Yozgat olduÄŸunu sÃ¶yleyebiliriz. Bu ili\r\nsÄ±rasÄ±yla Erzincan ve KÄ±rÄ±kkale takip ediyor. Ne zayÄ±f ne gÃ¼Ã§lÃ¼\r\ndiyebileceÄŸimiz pozitif korelasyon gÃ¶steren en yÃ¼ksek 3 il ise Sinop,\r\nTunceli ve KÄ±rklareliâ€™dir. 81 ilin 19â€™u 50%â€™den fazla negatif\r\nkorelasyonu olan yerlerdir.\r\n\r\n\r\n\r\n60% Ã¼stÃ¼ negatif korelasyona sahip iller\r\n\r\n\r\n\r\nTÃ¼ketici GÃ¼ven Endeksi ve Enflasyon OranÄ± DeÄŸiÅŸkenlerinin Oy\r\nOranlarÄ±yla Olan Korelasyonu\r\n\r\n\r\n\r\n\r\n\r\n\r\nYukarÄ±daki grafiÄŸi, dikey eksenden (enflasyon) aÅŸaÄŸÄ±ya doÄŸru\r\ngittikÃ§e ve yatay eksenden (tÃ¼ketici gÃ¼ven endeksi) saÄŸa doÄŸru gittikÃ§e\r\nbu deÄŸiÅŸkenlere olan hassasiyet artmaktadÄ±r ÅŸeklinde\r\nokuyabiliriz.\r\nÃ‡alÄ±ÅŸmanÄ±n R kodlarÄ±na aÅŸaÄŸÄ±dan ulaÅŸÄ±labilir.\r\n\r\n\r\noptions(scipen = 999)\r\n\r\nlibrary(tidyverse)\r\nlibrary(rvest) # web kazÄ±ma\r\n\r\ntge1 <- readxl::read_excel(\"tge1.xls\") %>% \r\n  select(1,2) %>% \r\n  slice(5:100) %>% \r\n  rename(\"donem\"=1,\"tge\"=2) %>% \r\n  mutate(donem = seq(as.Date(\"2004-01-01\"),as.Date(\"2011-12-01\"), \"months\"),\r\n         tge = as.numeric(tge))\r\n\r\ntge2 <- readxl::read_excel(\"tge2.xls\") %>% \r\n  select(1,4) %>% \r\n  slice(5:129) %>% \r\n  rename(\"donem\"=1,\"tge\"=2) %>% \r\n  mutate(donem = seq(as.Date(\"2012-01-01\"),as.Date(\"2022-05-01\"), \"months\"),\r\n         tge = as.numeric(tge))\r\n\r\ntge <- rbind(tge1,tge2) %>% \r\n  mutate(tgeLag = lag(tge))\r\n\r\nggplot(tge, aes(x = donem, y = tge)) +\r\n  geom_line() +\r\n  geom_smooth(method = \"loess\", color = \"red\") +\r\n  geom_hline(yintercept = 100) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.subtitle = element_text(face = \"italic\"),\r\n        plot.caption = element_text(face = \"italic\")) +\r\n  labs(title = \"TÃ¼ketici GÃ¼ven Endeksi\",\r\n       subtitle = \"Ocak/2004 - MayÄ±s/2022\",\r\n       caption = \"Veri: TÃœÄ°K\")\r\n\r\nenf <- readxl::read_excel(\"enflasyon.xls\") %>% \r\n  slice(80:98) %>% \r\n  `colnames<-`(c(\"yil\",paste0(\"C\",seq(1,18,1)))) %>% \r\n  pivot_longer(!yil, names_to = \"ay\", values_to = \"enf\") %>% \r\n  na.omit() %>% \r\n  mutate(donem = seq(as.Date(\"2004-01-01\"),as.Date(\"2022-04-01\"), \"months\"),\r\n         enf = as.numeric(enf),\r\n         enfLag = lag(enf)) %>% \r\n  select(donem,enf,enfLag)\r\n\r\nggplot(enf, aes(x = donem, y = log(enf))) +\r\n  geom_line() +\r\n  geom_smooth(method = \"loess\", color = \"red\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.subtitle = element_text(face = \"italic\"),\r\n        plot.caption = element_text(face = \"italic\")) +\r\n  labs(title = \"Enflasyon (Bir Ã–nceki YÄ±lÄ±n AynÄ± AyÄ±na GÃ¶re)\",\r\n       subtitle = \"Ocak/2004 - Nisan/2022\",\r\n       caption = \"Veriler logaritmiktir.\\n Veri: TÃœÄ°K\")\r\n\r\nakp <- data.frame(\r\n  t = seq(1,5,1),\r\n  tarih = c(\r\n    as.Date(\"2007-07-22\"),\r\n    as.Date(\"2011-06-12\"),\r\n    as.Date(\"2015-06-07\"),\r\n    as.Date(\"2015-11-01\"),\r\n    as.Date(\"2018-06-24\")\r\n  ),\r\n  oran = c(46.58,49.83,40.87,49.50,42.56)\r\n)\r\n\r\nggplot(akp, aes(x = t, y = oran)) +\r\n  geom_line() +\r\n  geom_point(size = 5) +\r\n  geom_text(aes(label = paste0(tarih,\"\\n\",oran,\"%\")), vjust = -0.5, size = 2) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.caption = element_text(face = \"italic\")) +\r\n  scale_y_continuous(limits = c(0,100)) +\r\n  labs(title = \"Genel SeÃ§imler AKP Oy OranlarÄ±\",\r\n       caption = \"Veri: Vikipedi\")\r\n\r\ne1 <- read_html(\"https://tr.wikipedia.org/wiki/2007_T%C3%BCrkiye_genel_se%C3%A7imleri\") %>% \r\n  html_table() %>% \r\n  .[[7]] %>% \r\n  select(1,4) %>% \r\n  rename(\"il\"=1,\"akp\"=2) %>% \r\n  mutate(akp = gsub(\",\",\".\",akp),\r\n         donem = as.Date(\"2007-07-01\"))\r\n\r\ne2 <- read_html(\"https://tr.wikipedia.org/wiki/2011_T%C3%BCrkiye_genel_se%C3%A7imleri\") %>% \r\n  html_table() %>% \r\n  .[[9]] %>% \r\n  select(1,4) %>% \r\n  rename(\"il\"=1,\"akp\"=2) %>% \r\n  mutate(akp = gsub(\",\",\".\",akp),\r\n         donem = as.Date(\"2011-06-01\"))\r\n\r\ne3 <- read_html(\"https://tr.wikipedia.org/wiki/Haziran_2015_T%C3%BCrkiye_genel_se%C3%A7imleri\") %>% \r\n  html_table() %>% \r\n  .[[23]] %>% \r\n  select(1,4) %>% \r\n  rename(\"il\"=1,\"akp\"=2) %>% \r\n  mutate(akp = gsub(\",\",\".\",akp),\r\n         donem = as.Date(\"2015-06-01\"))\r\n\r\ne4 <- read_html(\"https://tr.wikipedia.org/wiki/Kas%C4%B1m_2015_T%C3%BCrkiye_genel_se%C3%A7imleri\") %>% \r\n  html_table() %>% \r\n  .[[19]] %>% \r\n  select(1,5) %>% \r\n  rename(\"il\"=1,\"akp\"=2) %>% \r\n  mutate(akp = gsub(\",\",\".\",akp),\r\n         il = gsub(\"\\\\(toplam)\",\"\",il),\r\n         donem = as.Date(\"2015-11-01\")) %>% \r\n  filter(!grepl(\"\\\\(I)|\\\\(II)|\\\\(III)\",il))\r\n    \r\ne5 <- read_html(\"https://tr.wikipedia.org/wiki/2018_T%C3%BCrkiye_genel_se%C3%A7imleri\") %>% \r\n  html_table() %>% \r\n  .[[21]] %>% \r\n  select(1,5) %>% \r\n  rename(\"il\"=1,\"akp\"=2) %>% \r\n  mutate(akp = gsub(\",\",\".\",akp)) %>% \r\n  mutate(akp = gsub(\",\",\".\",akp),\r\n         il = gsub(\"\\\\(toplam)\",\"\",il),\r\n         donem = as.Date(\"2018-06-01\")) %>% \r\n  filter(!grepl(\"\\\\(I)|\\\\(II)|\\\\(III)\",il))\r\n\r\ne <- rbind(e1,e2,e3,e4,e5) %>% \r\n  mutate(il = str_trim(il),\r\n         akp = as.numeric(akp),\r\n         il = gsub(\" ToplamÄ±| toplamÄ±\",\"\",il))\r\n\r\nmaster <- e %>% \r\n  left_join(tge[,c(1,2)], by = \"donem\") %>% \r\n  left_join(enf[,c(1,2)], by = \"donem\") %>% \r\n  arrange(donem)\r\n\r\nmaster %>% \r\n  filter(il == \"TÃ¼rkiye\") %>% \r\n  ggplot(aes(x = tge, y = akp)) +\r\n  geom_smooth(method = \"lm\") +\r\n  geom_point(size = 5) +\r\n  geom_text(aes(label = paste0(donem,\"\\n\",akp,\"%\")), vjust = -0.7, size = 2) +\r\n  geom_text(aes(label = round(tge, digits = 1)), vjust = 2.5, size = 2) +\r\n  theme_minimal() +\r\n  labs(x = \"TÃ¼ketici GÃ¼ven Endeksi\",\r\n       y = \"Oy OranÄ±\")\r\n\r\nmaster %>% \r\n  filter(il == \"TÃ¼rkiye\") %>% \r\n  ggplot(aes(x = enf, y = akp)) +\r\n  geom_smooth(method = \"lm\") +\r\n  geom_point(size = 5) +\r\n  geom_text(aes(label = paste0(donem,\"\\n\",akp,\"%\")), vjust = -0.7, size = 2) +\r\n  geom_text(aes(label = round(enf, digits = 1)), vjust = 2.5, size = 2) +\r\n  theme_minimal() +\r\n  labs(x = \"Enflasyon\",\r\n       y = \"Oy OranÄ±\")\r\n\r\ntge_corr_il <- master %>% \r\n  group_by(il) %>% \r\n  summarise(corr = cor(akp,tge)) %>% \r\n  arrange(corr) %>% \r\n  mutate(tip = \"TGE\",\r\n         grup = ifelse(corr > 0, \"pozitif\", \"negatif\"))\r\n\r\nggplot(tge_corr_il, aes(x = reorder(il, corr), y = corr, fill = grup)) +\r\n  geom_col() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        axis.text.y = element_text(size = 10),\r\n        axis.text.x = element_text(size = 10),\r\n        legend.position = \"none\") +\r\n  scale_fill_manual(values = c(\"red\",\"orange\")) +\r\n  scale_y_continuous(sec.axis = sec_axis(trans=~.*1)) +\r\n  coord_flip()\r\n\r\ncorr90_tge <- tge_corr_il %>% \r\n  arrange(desc(corr)) %>% \r\n  filter(corr > 0.9 & il != \"TÃ¼rkiye\") %>% \r\n  pull(il)\r\n\r\nmaster %>% \r\n  filter(il %in% corr90_tge) %>% \r\n  ggplot(aes(x = tge, y = akp)) +\r\n  geom_smooth(method = \"lm\") +\r\n  geom_point(size = 2) +\r\n  theme_minimal() +\r\n  labs(x = \"TÃ¼ketici GÃ¼ven Endeksi\",\r\n       y = \"Oy OranÄ±\") +\r\n  facet_wrap(~il, scales = \"free\")\r\n\r\nenf_corr_il <- master %>% \r\n  group_by(il) %>% \r\n  summarise(corr = cor(akp,enf)) %>% \r\n  arrange(corr) %>% \r\n  mutate(tip = \"ENF\",\r\n         grup = ifelse(corr > 0, \"pozitif\", \"negatif\"))\r\n\r\nggplot(enf_corr_il, aes(x = reorder(il, corr), y = corr, fill = grup)) +\r\n  geom_col() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        axis.text.y = element_text(size = 10),\r\n        axis.text.x = element_text(size = 10),\r\n        legend.position = \"none\") +\r\n  scale_fill_manual(values = c(\"red\",\"orange\")) +\r\n  scale_y_continuous(sec.axis = sec_axis(trans=~.*1)) +\r\n  coord_flip()\r\n\r\ncorr60_enf <- enf_corr_il %>% \r\n  arrange(desc(corr)) %>% \r\n  filter(corr < -0.6 & il != \"TÃ¼rkiye\") %>% \r\n  pull(il)\r\n\r\nmaster %>% \r\n  filter(il %in% corr60_enf) %>% \r\n  ggplot(aes(x = enf, y = akp)) +\r\n  geom_smooth(method = \"lm\") +\r\n  geom_point(size = 2) +\r\n  theme_minimal() +\r\n  labs(x = \"Enflasyon\",\r\n       y = \"Oy OranÄ±\") +\r\n  facet_wrap(~il, scales = \"free\")\r\n\r\ncorr_il <- rbind(tge_corr_il,enf_corr_il) %>% \r\n  select(-grup) %>% \r\n  pivot_wider(names_from = \"tip\", values_from = \"corr\")\r\n\r\ntr_enf <- corr_il %>% \r\n  filter(il == \"TÃ¼rkiye\") %>% \r\n  pull(ENF)\r\n\r\ntr_tge <- corr_il %>% \r\n  filter(il == \"TÃ¼rkiye\") %>% \r\n  pull(TGE)\r\n\r\nggplot(corr_il, aes(x = TGE, y = ENF)) +\r\n  geom_point(alpha = .1) +\r\n  geom_vline(xintercept = tr_tge, linetype = \"dashed\") +\r\n  geom_hline(yintercept = tr_enf, linetype = \"dashed\") +\r\n  geom_vline(xintercept = 0) +\r\n  geom_hline(yintercept = 0) +\r\n  ggrepel::geom_text_repel(data = corr_il %>% filter(il != \"TÃ¼rkiye\"),\r\n                           aes(label = il), size = 5) +\r\n  ggrepel::geom_label_repel(data = corr_il %>% filter(il == \"TÃ¼rkiye\"),\r\n                            aes(label = il), fill = \"red\",\r\n                            size = 5, alpha = .5, color = \"white\") +\r\n  theme_minimal() +\r\n  theme(plot.title = element_text(face = \"bold\", hjust = 0.5),\r\n        plot.subtitle = element_text(face = \"italic\"),\r\n        plot.caption = element_text(face = \"italic\"),\r\n        axis.text = element_text(size = 15),\r\n        axis.title = element_text(size = 15)) +\r\n  labs(title = \"Ä°llere GÃ¶re Enflasyon ile TÃ¼ketici GÃ¼ven Endeksinin \r\n       AKP Oy OranÄ±yla Korelasyonu\",\r\n       caption = \"TÃ¼rkiye Genel SeÃ§imleri \r\n       (2007,2011,2015-I,2015-II,2018) oy oranlarÄ±dÄ±r.\\n\r\n       Veriler seÃ§imden Ã¶nceki aya aittir.\",\r\n       x = \"TÃ¼ketici GÃ¼ven Endeksi Korelasyonu\",\r\n       y = \"Enflasyon Korelasyonu\")\r\n\r\n\r\n\r\nYararlandÄ±ÄŸÄ±m Kaynaklar:\r\nEconomic\r\nvoting\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-05-24-post6/post6_files/figure-html5/unnamed-chunk-17-1.png",
    "last_modified": "2022-05-24T22:22:22+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-22-post4/",
    "title": "Geometric Brownian Motion'Ä± KÃ¼meleme AlgoritmasÄ±yla Kullanmak: USDTRY SimÃ¼lasyon UygulamasÄ±",
    "description": "SimÃ¼le edilmiÅŸ deÄŸerleri kÃ¼meleme algoritmasÄ±yla kullanmak performansÄ± iyileÅŸtirebilir.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-05-22",
    "categories": [
      "Finance",
      "Machine Learning"
    ],
    "contents": "\r\nBrownian hareketi (Brownian motion), toz parÃ§acÄ±klarÄ± gibi bÃ¼yÃ¼k\r\nparÃ§acÄ±klarÄ±n akÄ±ÅŸkan iÃ§erisinde sÄ±vÄ± ya da gaz molekÃ¼lleri gibi daha\r\nkÃ¼Ã§Ã¼k parÃ§acÄ±klarla Ã§arpÄ±ÅŸmasÄ± sonucu oluÅŸan rastlantÄ±sal harekettir.\r\nBrown hareketi literatÃ¼rde Wiener sÃ¼reci olarak da bilinmektedir.\r\nBrownian hareket sÃ¼recinin en basit Ã¶zel durumu standart Brownian\r\nhareket sÃ¼recidir.\r\nYukarÄ±da bahsedilen standart Brownian hareket sÃ¼reci negatif deÄŸerler\r\nde alabildiÄŸi iÃ§in uygulamamÄ±za uymayacaktÄ±r. Bu noktada devreye\r\ngeometrik Brownian hareket sÃ¼reci giriyor. Bu sÃ¼reÃ§te getiriler\r\nlog-normal daÄŸÄ±lÄ±mlÄ± olduÄŸu iÃ§in negatif durum ortadan kaldÄ±rÄ±lÄ±yor.\r\nBunun yanÄ±nda log-normal daÄŸÄ±lÄ±m ile kalÄ±n kuyruk durumu ve Ã§arpÄ±klÄ±k\r\ndikkate alÄ±nmÄ±ÅŸ oluyor.\r\nGeometrik Brownian hareket sÃ¼recine uyan bir finansal varlÄ±ÄŸÄ±n\r\nfiyatÄ±ndaki deÄŸiÅŸim Ã¶zellikle finansal modellemede \\(dS_t = \\mu S_t d_t + \\sigma S_t dW_t\\)\r\n(stokastik diferansiyel denklem) olarak ifade edilmektedir. Bu denklem\r\naÅŸaÄŸÄ±daki gibi yeniden yazÄ±labilir:\r\n\\(dlogS_t = (\\mu - \\frac{\\sigma^2}{2})dt +\r\n\\sigma dW_t\\)\r\n\\(dt\\) zaman aralÄ±ÄŸÄ±nda deÄŸiÅŸim olan\r\n\\(dW_t = \\epsilon \\sqrt{dt}\\)â€™dir.\r\nBurada, \\(W_t\\)â€™deki deÄŸiÅŸme miktarÄ±\r\nepsilon ile geÃ§en sÃ¼renin karekÃ¶kÃ¼nÃ¼n Ã§arpÄ±mÄ±; \\(\\epsilon \\sim N(0,1)\\)â€™dir ve \\(\\epsilon\\) ortalamasÄ± 0, standart sapmasÄ± 1\r\nolan standart normal daÄŸÄ±lÄ±m tablosundan Ã¼retilen rastsal rakamdÄ±r.\r\nSonuÃ§ olarak kullanacaÄŸÄ±mÄ±z denklem (Ito Lemma):\r\n\\(S_t = S_0 exp((\\mu -\r\n\\frac{1}{2}\\sigma^2)t + \\sigma W_t)\\) olacaktÄ±r.\r\n\\(S_0:\\) baÅŸlangÄ±Ã§ fiyatÄ±,\r\n\\(\\mu:\\) beklenen getiri (drift,\r\nsÃ¼rÃ¼klenme),\r\n\\(\\sigma:\\) volatilitedir.\r\nUygulamayÄ± ÅŸÃ¶yle tasarladÄ±m:\r\n\\(\\mu\\) ve \\(\\sigma\\)â€™nÄ±n her bir yÄ±l iÃ§in hesaplanmasÄ±\r\nve test edilecek yÄ±l iÃ§in regresyon modeli kullanÄ±larak uygun \\(\\mu\\) ve \\(\\sigma\\) deÄŸerinin kullanÄ±lmasÄ±.\r\nHer bir yÄ±l iÃ§in 1000 adet simÃ¼le deÄŸerin oluÅŸturulmasÄ± ve\r\nortalamasÄ±nÄ±n alÄ±nmasÄ±.\r\n2018, 2019, 2020 ve 2021 iÃ§in test edilmesi.\r\nAlternatif yÃ¶ntem ile karÅŸÄ±laÅŸtÄ±rmanÄ±n yapÄ±lmasÄ±.\r\nInvestingâ€™ten aldÄ±ÄŸÄ±m verilere (post4.xlsx) GitHub\r\nhesabÄ±mdan ulaÅŸabilirsiniz.\r\n\r\n\r\nset.seed(1) # simÃ¼le deÄŸerlerin her Ã§alÄ±ÅŸtÄ±rmada aynÄ± Ã¼retmesi iÃ§in\r\n\r\nlibrary(tidyverse)\r\nlibrary(lubridate)\r\n\r\n\r\n\r\n\r\n\r\ndf <- readxl::read_excel(\"data.xlsx\")\r\ndf <- df %>% \r\n  mutate(\r\n    logReturn = lag(log(lead(close)/close)),\r\n    date = as.Date(date),\r\n    year = year(date)\r\n  ) %>% \r\n  na.omit()\r\n\r\n\r\n\r\n\r\n\r\n\r\nGeometrik Brownian motionâ€™a ait fonksiyonu oluÅŸturalÄ±m.\r\n\r\n\r\ngbmFunc <- function(nsim,t,mu,sigma,S0,nwd){ # kullanÄ±cÄ± tarafÄ±ndan girilecek deÄŸerler \r\n  \r\n  gbm <- matrix(ncol = nsim, nrow = t)\r\n  # simÃ¼lasyon sayÄ±sÄ± kadar sÃ¼tun; gÃ¼n sayÄ±sÄ± kadar satÄ±r\r\n  \r\n  for(i in 1:nsim){ # i: initial (baÅŸlangÄ±Ã§)\r\n    \r\n    gbm[1,i] <- S0 # gbm matrisinin ilk satÄ±rlarÄ± girilen baÅŸlangÄ±Ã§ fiyatÄ± olacak\r\n    \r\n    for(d in 2:t){ # d: day (gÃ¼n); ilk satÄ±r belli olduÄŸu iÃ§in ikinci satÄ±rdan baÅŸlayacak\r\n      \r\n      epsilon <- rnorm(1) # epsilon ortalamasÄ± sÄ±fÄ±r ve standart sapmasÄ± 1 idi\r\n      \r\n      dt <- 1 / nwd # nwd: number of working days (iÅŸ gÃ¼nleri sayÄ±sÄ±)\r\n      \r\n      gbm[d,i] <- gbm[(d-1),i] * exp((mu - sigma**2 / 2) * dt + sigma * epsilon * sqrt(dt))\r\n      \r\n    }\r\n    \r\n  }\r\n  \r\n  return(gbm)\r\n  \r\n}\r\n\r\n\r\n\r\nTarihsel olarak \\(\\mu\\) ve \\(\\sigma\\) deÄŸerlerine bakalÄ±m.\r\n\r\n\r\nmusigma_hist <- df %>% \r\n  group_by(year) %>% \r\n  summarise(\r\n    n = n(),\r\n    mu = mean(logReturn),\r\n    sigma = sd(logReturn)*sqrt(n) # iÅŸ gÃ¼nÃ¼ sayÄ±sÄ±nÄ±n karekÃ¶kÃ¼ ile yÄ±llÄ±klandÄ±rma\r\n  ) %>% \r\n  ungroup() %>% \r\n  mutate(t = seq(1,nrow(.),1), .before = n) %>% \r\n  select(-n)\r\n\r\n\r\n\r\n\r\n\r\n\r\nHer yÄ±l iÃ§in geÃ§miÅŸ 5 seneyi dikkate alarak \\(\\mu\\) ve \\(\\sigma\\) deÄŸerlerini tahmin edelim.\r\n\r\n\r\nmusigma_hist$pred_mu <- NA\r\nmusigma_hist$pred_sigma <- NA\r\n\r\ntarget <- 2018:2021\r\n\r\nfor(j in 1:length(target)) {\r\n  m_df <- musigma_hist %>%\r\n    filter(year < target[j] & year >= target[j] - 5) %>%\r\n    mutate(t = seq(1, nrow(.), 1))\r\n  \r\n  model_mu <- lm(mu ~ 0 + t, data = m_df)\r\n  model_sigma <- lm(sigma ~ 0 + t, data = m_df)\r\n  # t: trend\r\n  \r\n  pred_mu <- predict(model_mu, newdata = data.frame(t = nrow(m_df) + 1))\r\n  pred_sigma <- predict(model_sigma, newdata = data.frame(t = nrow(m_df) + 1))\r\n  \r\n  musigma_hist[which(musigma_hist$year == target[j]), ][5] <- as.numeric(pred_mu)\r\n  musigma_hist[which(musigma_hist$year == target[j]), ][6] <- as.numeric(pred_sigma)\r\n  \r\n}\r\n\r\n\r\n\r\nTahmin ettiÄŸimiz deÄŸerlerin baÅŸarÄ±sÄ±nÄ± RMSE metriÄŸi ile Ã¶lÃ§eceÄŸiz.\r\nKÃ¶k Ortalama Kare Hata da diyebileceÄŸimiz Root Mean Square Error, tahmin\r\nhatalarÄ±nÄ±n (residuals) standart sapmasÄ±dÄ±r. RMSE iÃ§in regresyon\r\nÃ§izgisinin etrafÄ±ndaki yoÄŸunlaÅŸmayÄ± Ã¶lÃ§Ã¼yor da diyebiliriz.\r\n\\(RMSE =\r\n\\sqrt{\\frac{\\sum_{i=1}^{N}(Tahmin_i-GerÃ§ek_i)^2}{N}}\\)\r\n\r\n\r\nrmse <- function(predicted,actual){\r\n  \r\n  rmse_value <- sqrt(mean((predicted-actual)^2))\r\n  return(rmse_value)\r\n  \r\n}\r\n\r\nrmse_df <- data.frame(\r\n  \"year\" = 2018:2021,\r\n  \"rmse_avg\" = NA\r\n)\r\n\r\n\r\n\r\nTÃ¼m yÄ±llarÄ± hesaplayalÄ±m.\r\n\r\n\r\nsim_master <- data.frame()\r\ngbmdf_master <- data.frame()\r\n\r\nfor(k in 1:length(target)){\r\n  \r\n  df_target <- df %>% \r\n    filter(year == target[k])\r\n  \r\n  sim_target <- gbmFunc(nsim = 1000,\r\n                        t = nrow(df_target),\r\n                        mu = as.numeric(musigma_hist[(j+15),5]),\r\n                        sigma = as.numeric(musigma_hist[(j+15),6]),\r\n                        S0 = as.numeric(df_target[1,2]),\r\n                        nwd = nrow(df_target)) %>% \r\n    as.data.frame() %>% \r\n    mutate(\"simAvg\" = rowMeans(.)) %>% \r\n    mutate(rn = 1:nrow(.), .before = V1) %>% \r\n    cbind(df_target[,2]) %>% \r\n    mutate(\"year\" = target[k], .after = rn)\r\n  \r\n  sim_master <- sim_master %>% bind_rows(sim_target)\r\n  \r\n  gbmdf_target <- as.data.frame(sim_target) %>% \r\n    pivot_longer(!c(rn,year), names_to = \"sim\", values_to = \"value\")\r\n  \r\n  gbmdf_master <- gbmdf_master %>% bind_rows(gbmdf_target)\r\n  \r\n  rmse_df$rmse_avg[k] <- rmse(predicted = sim_target$simAvg, actual = sim_target$close)\r\n  \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n2018-2021 yÄ±llarÄ± iÃ§in yaptÄ±ÄŸÄ±mÄ±z simÃ¼lasyonlardan elde ettiÄŸimiz\r\nRMSE deÄŸerleri aÅŸaÄŸÄ±daki gibidir.\r\n\r\n\r\nyear\r\n\r\n\r\nrmse_avg\r\n\r\n\r\n2018\r\n\r\n\r\n1.3661915\r\n\r\n\r\n2019\r\n\r\n\r\n0.4085097\r\n\r\n\r\n2020\r\n\r\n\r\n1.3118926\r\n\r\n\r\n2021\r\n\r\n\r\n2.1905821\r\n\r\n\r\nBundan sonra asÄ±l konumuza giriÅŸ yapacaÄŸÄ±z.\r\nTÃ¼m simÃ¼le deÄŸerlerin ortalamasÄ±nÄ± almak yerine kÃ¼meleme\r\nalgoritmasÄ± kullanÄ±p aynÄ± kÃ¼meye dÃ¼ÅŸen simÃ¼le deÄŸerlerin ortalamasÄ±nÄ±\r\nalsaydÄ±k performans ne olurdu?\r\nKÃ¼meleme iÃ§in aÅŸaÄŸÄ±dakileri kullanacaÄŸÄ±z:\r\nKÃ¼meleme algoritmasÄ± Hierarchical\r\nBaÄŸlantÄ± yÃ¶ntemi Ward\r\nUzaklÄ±k Ã¶lÃ§Ã¼tÃ¼ Euclidean\r\nKÃ¼meleme AlgoritmasÄ± Hierarchical\r\n(HiyerarÅŸik)\r\nHiyerarÅŸik kÃ¼meleme yÃ¶ntemleri, ayrÄ± ayrÄ± ele alÄ±nan kÃ¼melerin\r\naÅŸamalÄ± olarak birleÅŸtirilmesi veya bir ana kÃ¼me olarak ele alÄ±narak\r\naÅŸamalÄ± olarak alt kÃ¼melere ayrÄ±lmasÄ± esasÄ±na dayanÄ±r.\r\nBaÄŸlantÄ± YÃ¶ntemi Ward\r\nWard, agglomerative nesting denilen birleÅŸtirici kÃ¼meleme yÃ¶ntemidir.\r\nBu yÃ¶ntemde amaÃ§, bir kÃ¼me oluÅŸturabilmek iÃ§in toplam varyanstaki\r\nartÄ±ÅŸlarÄ±n minimize edilmesidir. Bunun iÃ§in kÃ¼me iÃ§indeki kareli\r\ntoplamlar kullanÄ±lÄ±r ve bu deÄŸerin minimize edilmesi esas alÄ±nÄ±r.\r\n\\(ESS = \\sum_{g=1}^{G} \\sum_{i=1}^{n_g}\r\n\\sum_{j=1}^{p} (x_{ij}^g - \\overline{x}_j^g)^2\\)\r\n\\(G:\\) KÃ¼melerin sayÄ±sÄ±\r\n\\(n_g:\\) g. kÃ¼me iÃ§indeki gÃ¶zlem\r\nsayÄ±sÄ±\r\n\\(x_{ij}^g:\\) g. kÃ¼me iÃ§indeki i.\r\ngÃ¶zlemin j. niteliÄŸinin deÄŸeri\r\n\\(\\overline{x}_j^g:\\) g. kÃ¼me\r\niÃ§indeki j niteliÄŸinin ortalamasÄ±\r\nUzaklÄ±k Ã¶lÃ§Ã¼tÃ¼ Euclidean (Ã–klid)\r\nBu uzaklÄ±k boyutlu uzayda Pisagor teoreminin bir uygulamasÄ±dÄ±r. A\r\nnoktasÄ± \\((x_1,y_1)\\); B noktasÄ± \\((x_2,y_2)\\) olsun.\r\nA ve B noktalarÄ± arasÄ±ndaki Ã–klid uzaklÄ±ÄŸÄ±:\r\n\\(d(A,B) = \\sqrt{(x_1 - x_2)^2 + (y_1 -\r\ny_2)^2}\\)\r\nAlgoritmayÄ± uygulama aÅŸamasÄ±na geÃ§ebiliriz. Ã–nceki testlerimizden\r\nfarklÄ± olarak burada simÃ¼lasyonu biraz daha geriden baÅŸlatacaÄŸÄ±z. Ã‡Ã¼nkÃ¼\r\ntest edilecek yÄ±la ait deÄŸerlerin henÃ¼z gerÃ§ekleÅŸmediÄŸini varsayarsak,\r\nÃ¶nceki yÄ±lÄ±n bir bÃ¶lÃ¼mÃ¼nÃ¼ alÄ±p burada gerÃ§ekleÅŸen deÄŸerleri bir kÃ¼meye\r\ndahil etmemiz gerekir. Bunun iÃ§in de test edilecek yÄ±ldan bir Ã¶nceki\r\nyÄ±lÄ±n son 100 iÅŸ gÃ¼nÃ¼nÃ¼ alabiliriz. Bu durumda aÅŸamalarÄ± ÅŸÃ¶yle\r\nsÄ±ralayabiliriz: Test edilecek yÄ±ldan bir Ã¶nceki yÄ±lÄ±n son 100 iÅŸ gÃ¼nÃ¼nÃ¼\r\nal, burayÄ± simÃ¼le et, simÃ¼le deÄŸerleri kÃ¼melere ayÄ±r, 100 gÃ¼n iÃ§in\r\ngerÃ§ekleÅŸen deÄŸerleri bir kÃ¼meye dahil et ve buradan seÃ§ilen kÃ¼meleri\r\nkullanarak test edilecek yÄ±lÄ±n deÄŸerlerini bul. 100 iÅŸ gÃ¼nÃ¼nÃ¼ seÃ§me\r\nnedenim vade uzadÄ±kÃ§a tahmin gÃ¼cÃ¼nÃ¼n zayÄ±flayabileceÄŸini dikkate alarak\r\nÃ§ok geriden baÅŸlatÄ±p tahmini kÃ¶tÃ¼leÅŸtirmemek; bununla beraber, Ã§ok da\r\nerken baÅŸlatÄ±p zaman serilerini kÃ¼melerken kaliteyi dÃ¼ÅŸÃ¼rmemek.\r\n\r\n\r\nfilter_min <- df %>% \r\n  filter(year %in% 2017:2020) %>% \r\n  group_by(year) %>% \r\n  slice(tail(row_number(), 100)) %>% \r\n  filter(date == min(date)) %>% \r\n  pull(date)\r\n\r\nfilter_max <- df %>% \r\n  filter(year %in% 2018:2021) %>% \r\n  group_by(year) %>% \r\n  filter(date == max(date)) %>% \r\n  pull(date)\r\n\r\nmlsim_master <- data.frame()\r\njoined_clusters_master <- data.frame()\r\n\r\nfor(m in 1:length(target)){\r\n  \r\n  mldf <- df %>% \r\n    filter(date >= filter_min[m] & date <= filter_max[m])\r\n  \r\n  mlsim <- gbmFunc(nsim = 1000,\r\n                   t = nrow(mldf),\r\n                   mu = as.numeric(musigma_hist[(m+15),5]),\r\n                   sigma = as.numeric(musigma_hist[(m+15),6]),\r\n                   S0 = as.numeric(mldf[1,2]),\r\n                   nwd = nrow(mldf)) %>% \r\n    as.data.frame() %>% \r\n    mutate(rn = 1:nrow(.), .before = V1) %>% \r\n    cbind(mldf[,2]) %>% \r\n    mutate(\"year\" = target[m], .after = rn)\r\n  \r\n  mlsim_master <- mlsim_master %>% bind_rows(mlsim)\r\n  \r\n  mlgbm <- t(scale(mlsim[1:100,-c(1,2)])) # son 100 gÃ¼nÃ¼ kÃ¼melemeye dahil etmeliyiz\r\n  mlgbm_dist <- dist(mlgbm, method=\"euclidean\")\r\n  fit <- hclust(mlgbm_dist, method=\"ward.D\")\r\n  \r\n  clustered <- cutree(fit, k=50) # 50 adet kÃ¼me oluÅŸturulmuÅŸtur\r\n  clustered_tidy <- as.data.frame(as.table(clustered)) %>% \r\n    rename(\"sim\"=1,\"cluster\"=2) %>% \r\n    mutate(sim = as.character(sim))\r\n  cluster_x <- clustered_tidy %>% \r\n    filter(sim == \"close\") %>% \r\n    pull(cluster) %>% \r\n    .[[1]]\r\n  \r\n  mldf_2 <- mlsim %>% \r\n    pivot_longer(!c(rn,year), names_to = \"sim\", values_to = \"value\")\r\n  \r\n  joined_clusters <- mldf_2 %>%\r\n    inner_join(clustered_tidy, by = \"sim\") %>% \r\n    filter(cluster == cluster_x) %>% \r\n    select(-cluster) %>% \r\n    pivot_wider(names_from = \"sim\", values_from = \"value\") %>% \r\n    mutate(\"simAvg\" = apply(.[,-c(1,2,ncol(.))], 1, function(x) median(x))) %>% \r\n    # uÃ§ deÄŸerlerden etkilenmemek iÃ§in ortalama yerine medyan (ortanca) kullanÄ±ldÄ±\r\n    pivot_longer(!c(rn,year), names_to = \"sim\", values_to = \"value\")\r\n  \r\n  joined_clusters_master <- joined_clusters_master %>% bind_rows(joined_clusters)\r\n  \r\n  if(m == length(target)){\r\n    \r\n    rmse_df2 <- joined_clusters_master %>% \r\n      filter(sim %in% c(\"simAvg\",\"close\")) %>% \r\n      pivot_wider(names_from = \"sim\", values_from = \"value\") %>% \r\n      group_by(year) %>% \r\n      summarise(\"rmse_avg_cluster\" = rmse(simAvg,close)) %>% \r\n      ungroup() %>% \r\n      left_join(rmse_df, by = \"year\")\r\n    \r\n  }\r\n  \r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nyear\r\n\r\n\r\nrmse_avg_cluster\r\n\r\n\r\nrmse_avg\r\n\r\n\r\n2018\r\n\r\n\r\n1.1098768\r\n\r\n\r\n1.3661915\r\n\r\n\r\n2019\r\n\r\n\r\n0.6884056\r\n\r\n\r\n0.4085097\r\n\r\n\r\n2020\r\n\r\n\r\n1.0413089\r\n\r\n\r\n1.3118926\r\n\r\n\r\n2021\r\n\r\n\r\n1.8937623\r\n\r\n\r\n2.1905821\r\n\r\n\r\nYukarÄ±daki tablodan ve aÅŸaÄŸÄ±daki grafikten gÃ¶rÃ¼leceÄŸi Ã¼zere RMSE\r\ndeÄŸerlerini tek bir yÄ±l hariÃ§ dÃ¼ÅŸÃ¼rdÃ¼k ki sÄ±fÄ±ra yaklaÅŸmasÄ± hiÃ§ tahmin\r\nhatasÄ± yapÄ±lmadÄ±ÄŸÄ± anlamÄ±na geliyor.\r\n\r\n\r\n\r\nÃ‡alÄ±ÅŸmada kÃ¼meleme algoritmasÄ±nÄ±n simÃ¼lasyonda faydalÄ± olabileceÄŸine\r\nodaklanmak istedim. Burada \\(\\mu\\) ve\r\n\\(\\sigma\\) deÄŸerlerinin, iÅŸ gÃ¼nÃ¼\r\nsayÄ±sÄ±nÄ±n, kÃ¼me sayÄ±sÄ±nÄ±n en uygun ÅŸekilde seÃ§imi Ã¶nem kazanacaktÄ±r.\r\nGÃ¶rsellere ait kodlara aÅŸaÄŸÄ±dan ulaÅŸÄ±labilir.\r\n\r\n\r\nggplot(df, aes(x = date, y = log(close), group = 1)) +\r\n  geom_line() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        plot.caption = element_text(face = \"italic\", size = 7)) +\r\n  labs(title = \"USDTRY GÃ¼nlÃ¼k DeÄŸerler\",\r\n       subtitle = \"01.01.2003 - 31.12.2021\",\r\n       caption = \"DeÄŸerler logaritmiktir.\\nVeriler Investing'ten alÄ±nmÄ±ÅŸtÄ±r.\")\r\n\r\nggplot(df, aes(x = date, y = logReturn, group = 1)) +\r\n  geom_line() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        plot.caption = element_text(face = \"italic\", size = 7)) +\r\n  labs(title = \"USDTRY GÃ¼nlÃ¼k Logaritmik Getiriler\",\r\n       subtitle = \"01.01.2003 - 31.12.2021\",\r\n       caption = \"Veriler Investing'ten alÄ±nmÄ±ÅŸtÄ±r.\")\r\n\r\nmusigma_hist %>% \r\n  select(-t) %>% \r\n  mutate(mu = scale(mu),\r\n         sigma = scale(sigma)) %>% \r\n  pivot_longer(!year, names_to = \"cons\", values_to = \"val\") %>% \r\n  ggplot(aes(x = factor(year), y = val, group = cons, color = cons)) +\r\n  geom_line() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        plot.caption = element_text(face = \"italic\", size = 7),\r\n        legend.title = element_blank(),\r\n        legend.position = \"top\") +\r\n  labs(title = expression(\"Tarihsel \"~mu~\"ve\"~sigma~\"DeÄŸerleri\"),\r\n       subtitle = \"2003-2021\",\r\n       caption = \"Veriler standardize edilmiÅŸtir.\") +\r\n  scale_color_manual(values = c(\"red\",\"blue\"))\r\n\r\nggplot(gbmdf_master, aes(x = rn, group = sim)) +\r\n  geom_line(data = gbmdf_master %>% filter(!(sim %in% c(\"simAvg\",\"close\"))),\r\n            aes(y = value), color = \"gray80\") +\r\n  geom_line(data = gbmdf_master %>% filter(sim == \"simAvg\"),\r\n            aes(y = value), color = \"red\") +\r\n  geom_line(data = gbmdf_master %>% filter(sim == \"close\"),\r\n            aes(y = value), color = \"blue\") +\r\n  facet_wrap(~year, scales = \"free\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"italic\", size = 7)) +\r\n  labs(title = \"KÄ±rmÄ±zÄ±: Ortalama SimÃ¼le, Mavi: GerÃ§ek, Gri: SimÃ¼le\")\r\n\r\nggplot(joined_clusters_master, aes(x = rn, group = sim)) +\r\n  geom_line(data = joined_clusters_master %>% filter(!(sim %in% c(\"simAvg\",\"close\"))),\r\n            aes(y = value), color = \"gray80\") +\r\n  geom_line(data = joined_clusters_master %>% filter(sim == \"simAvg\"),\r\n            aes(y = value), color = \"red\") +\r\n  geom_line(data = joined_clusters_master %>% filter(sim == \"close\"),\r\n            aes(y = value), color = \"blue\") +\r\n  facet_wrap(~year, scales = \"free\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        plot.title = element_text(face = \"italic\", size = 7)) +\r\n  labs(title = \"KÄ±rmÄ±zÄ±: Ortalama SimÃ¼le, Mavi: GerÃ§ek, Gri: SimÃ¼le\")\r\n\r\nrmse_df2 %>% \r\n  pivot_longer(!year, names_to = \"rmse_test_type\", values_to = \"RMSE\") %>% \r\n  ggplot(aes(x = year, y = RMSE, fill = rmse_test_type)) +\r\n  geom_bar(stat = \"identity\", position = position_dodge()) +\r\n  geom_text(aes(label = round(RMSE, digits = 4)),\r\n            position = position_dodge(width = 0.9), vjust = -0.2) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank(),\r\n        legend.position = \"top\") +\r\n  scale_fill_manual(values = c(\"gray30\",\"red\"))\r\n\r\n\r\n\r\nYararlandÄ±ÄŸÄ±m Kaynaklar:\r\nStokastik SÃ¼reÃ§ler ve R UygulamalarÄ±; G.Ã–.KadÄ±lar\r\nBiyoenformatik DNA Mikrodizi Veri MadenciliÄŸi; Ã‡.S.Erol,\r\nY.Ã–zkan\r\nRMSE:\r\nRoot Mean Square Error\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-05-22-post4/post4_files/figure-html5/unnamed-chunk-13-1.png",
    "last_modified": "2022-05-22T19:18:46+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-22-post5/",
    "title": "Twitter Verilerini Kullanarak Liderlerin PopÃ¼laritesini Ã–lÃ§mek",
    "description": "TÃ¼rkiye'deki bazÄ± politik liderlerin Twitter'daki popÃ¼laritesi Ã¼zerine basit bir Ã§alÄ±ÅŸma.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-05-22",
    "categories": [
      "Social Media"
    ],
    "contents": "\r\nTwitter geliÅŸtirici hesabÄ± aÃ§madan rtweet paketi ile belli\r\nsÄ±nÄ±rlarda veriler Ã§ekilebilir ve kÄ±sa vadeli analizler\r\ngerÃ§ekleÅŸtirilebilir. Bunun nasÄ±l olabileceÄŸini gÃ¶relim.\r\nUygulamada, isim ve gÃ¼ndem olarak Ã¶n plana Ã§Ä±kmÄ±ÅŸ bazÄ± politik\r\nliderlerin tweetlerini Ã§ekip zamanla popÃ¼laritelerinde nasÄ±l bir deÄŸiÅŸim\r\nolmuÅŸ bunu inceleyeceÄŸiz.\r\nPopÃ¼lariteyi Ã¶lÃ§mek iÃ§in birtakÄ±m indikatÃ¶rleri bir araya getirmemiz\r\ngerekir ancak bu uygulamada tek bir indikatÃ¶r olarak tweetlerine gelen\r\nbeÄŸeni sayÄ±larÄ±nÄ± alacaÄŸÄ±z.\r\n\r\n\r\n#install.packages(\"rtweet\")\r\nlibrary(rtweet)\r\nlibrary(tidyverse)\r\n\r\n\r\n\r\nBaÅŸlamadan Ã¶nce bir not: rtweet paketinin fonksiyonlarÄ±nÄ± kullanmaya\r\nbaÅŸladÄ±ÄŸÄ±nÄ±z zaman karÅŸÄ±nÄ±za bir authentication (kimlik doÄŸrulama)\r\nsayfasÄ± gelecektir. Bu noktada giriÅŸ yapmanÄ±z yeterli olacaktÄ±r. GiriÅŸ\r\nyaptÄ±ktan sonra authentication gerÃ§ekleÅŸmiÅŸ olacaktÄ±r.\r\nAÅŸaÄŸÄ±daki liderlerin tweetlerini Ã§ekerek baÅŸlayalÄ±m.\r\n\r\n\r\nleaders <- c(\r\n  \"RTErdogan\",\r\n  \"kilicdarogluk\",\r\n  \"meral_aksener\",\r\n  \"ekrem_imamoglu\",\r\n  \"mansuryavas06\",\r\n  \"umitozdag\",\r\n  \"alibabacan\",\r\n  \"Ahmet_Davutoglu\"\r\n)\r\n\r\n\r\n\r\nrtweet paketindeki get_timeline() fonksiyonu ile bir hesabÄ±n\r\ntweetlerini diÄŸer tÃ¼m detaylarÄ± ile birlikte Ã§ekebiliriz.\r\nDokÃ¼mantasyonda yer alan bilgiye gÃ¶re maksimum 3200 tweet\r\nÃ§ekebiliyoruz.\r\nhttps://www.rdocumentation.org/packages/rtweet/versions/0.7.0/topics/get_timeline\r\n\r\nmaster <- data.frame()\r\n\r\nfor(i in 1:length(leaders)){\r\n  \r\n  user_tl <- get_timeline(\r\n    user = leaders[i],\r\n    n = Inf, # alÄ±nabilecek maksimum tweet sayÄ±sÄ±dÄ±r; girilmezse default 100 tane Ã§eker\r\n  )\r\n  \r\n  # her bir hesabÄ±n Ã§ekilen tweetlerini (user_tl) master veri Ã§erÃ§evesinde birleÅŸtir\r\n  master <- master %>% \r\n    bind_rows(user_tl)\r\n  \r\n  Sys.sleep(time = 1) # dÃ¶ngÃ¼ her Ã§alÄ±ÅŸtÄ±ÄŸÄ±nda 1 saniye bekletebiliriz\r\n  # sÄ±k gÃ¶nderilen isteklerde problem olmamasÄ± iÃ§in kullanÄ±labilecek bir fonksiyon\r\n  \r\n}\r\n\r\n\r\n\r\nVeri Ã§erÃ§evesini biraz dÃ¼zenleyelim.\r\n\r\n\r\ndf <- master %>% \r\n  filter(!is_retweet) %>% # retweetler kaldÄ±rÄ±ldÄ±\r\n  select(created_at,name,favorite_count) %>% # 3 adet kolon seÃ§ildi\r\n  mutate(created_at = as.Date(created_at)) # tarih formatÄ± dÃ¼zeltildi (sadece yyyy-mm-dd)\r\n\r\n\r\n\r\nHer bir liderin 2022 yÄ±lÄ±nda attÄ±ÄŸÄ± toplam tweet ve beÄŸeni sayÄ±sÄ±na\r\nbakalÄ±m.\r\n\r\n\r\ndf2022 <- df %>% \r\n  filter(created_at >= as.Date(\"2022-01-01\")) %>% \r\n  group_by(name) %>% \r\n  summarise(\r\n    n = n(), # toplam tweet sayÄ±sÄ±\r\n    totalFav = sum(favorite_count) # toplam beÄŸeni sayÄ±sÄ±\r\n  )\r\n\r\n\r\n\r\n\r\n\r\n\r\nBir de 2022 yÄ±lÄ±na ait tweet baÅŸÄ±na dÃ¼ÅŸen beÄŸeni sayÄ±sÄ±na\r\nbakalÄ±m.\r\n\r\n\r\ndf2022 <- df2022 %>% \r\n  mutate(lpt = totalFav / n) # lpt: like per tweet (tweet baÅŸÄ±na beÄŸeni)\r\n\r\n\r\n\r\n\r\n\r\nggplot(df2022, aes(x = reorder(name,lpt), y = lpt, fill = lpt)) +\r\n  geom_col() +\r\n  coord_flip() +\r\n  theme_minimal() +\r\n  theme(legend.position = \"none\") +\r\n  scale_y_continuous(labels = scales::comma) +\r\n  scale_fill_gradient(low = \"orange\", high = \"red\") +\r\n  labs(x = \"\", y = \"Tweet BaÅŸÄ±na BeÄŸeni SayÄ±sÄ±\")\r\n\r\n\r\n\r\n\r\n2022 yÄ±lÄ±na ait gÃ¼nlÃ¼k bazda popÃ¼laritenin zaman ile olan eÄŸilimine\r\nbakabiliriz.\r\n\r\n\r\ndf_pop <- df %>% \r\n  filter(created_at >= as.Date(\"2022-01-01\")) %>% \r\n  group_by(name,created_at) %>% \r\n  summarise(\r\n    n = n(),\r\n    totalFav = sum(favorite_count)\r\n  ) %>% \r\n  mutate(lpt = totalFav / n) %>% \r\n  group_by(name) %>% \r\n  mutate(t = row_number()) # t: gÃ¶zlem sayÄ±sÄ±\r\n\r\n\r\n\r\n\r\n\r\nggplot(df_pop, aes(x = t, y = lpt)) +\r\n  geom_line(color = \"gray\") +\r\n  geom_point(color = \"gray40\") +\r\n  geom_smooth(method = \"loess\", color = \"red\") +\r\n  facet_wrap(~name, scales = \"free\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        axis.text.y = element_text(size = 7),\r\n        axis.text.x = element_blank(),\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.subtitle = element_text(face = \"italic\")) +\r\n  scale_y_continuous(labels = scales::unit_format(unit = \"K\", scale = 1e-3, sep = \"\")) +\r\n  labs(title = \"GÃ¼nlÃ¼k Tweet BaÅŸÄ±na BeÄŸeni SayÄ±sÄ±, 2022\",\r\n       subtitle = \"GÃ¼nlÃ¼k Toplam BeÄŸeni / GÃ¼nlÃ¼k Toplam Tweet\")\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-05-22-post5/post5_files/figure-html5/unnamed-chunk-10-1.png",
    "last_modified": "2022-05-22T19:46:06+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-19-post3/",
    "title": "Faizdeki DeÄŸiÅŸimin Enflasyon Ãœzerindeki Etkisinin Markov Zinciri Modeli ile Analizi",
    "description": "Enflasyonun uzun dÃ¶nemde yÃ¼kselmesi olasÄ±lÄ±ÄŸÄ± 70%'tir.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-05-19",
    "categories": [
      "Finance",
      "Economics"
    ],
    "contents": "\r\nMarkov sÃ¼reci, bir stokastik sÃ¼recin ÅŸu anki deÄŸerleri bilindiÄŸinde,\r\nsÃ¼recin gelecekteki deÄŸerlerinin geÃ§miÅŸteki deÄŸerlerinden koÅŸullu olarak\r\nbaÄŸÄ±msÄ±z olduÄŸu sÃ¼reÃ§tir. Markov zinciri ise Markov sÃ¼recinin kesikli\r\ndurum uzayÄ±na sahip olduÄŸu Ã¶zel bir durumdur. Stokastik sistemlerin kÄ±sa\r\nveya uzun dÃ¶nemdeki davranÄ±ÅŸlarÄ±nÄ±n modellenmesinde Markov\r\nzincirlerinden yararlanÄ±lmaktadÄ±r.\r\nAylÄ±k frekansta olan ve Haziran 2018 (baÅŸkanlÄ±k sistemi) ile Nisan\r\n2022 (son veri) arasÄ±nÄ± kapsayan verileri TCMB/EVDSâ€™den aldÄ±m. Faizi\r\ntemsilen AÄŸÄ±rlÄ±k Ortalama Fonlama Maliyetiâ€™ni; enflasyonu temsilen de\r\nTÃœFEâ€™den elde edilen yÄ±llÄ±k deÄŸiÅŸimleri kullandÄ±m. Verilere\r\n(post3.xlsx) GitHub\r\nhesabÄ±mdan ulaÅŸabilirsiniz.\r\n\r\n\r\nlibrary(kableExtra) # zorunlu deÄŸil\r\nlibrary(expm) # %^% operatÃ¶rÃ¼\r\nlibrary(markovchain) # uzun dÃ¶nem denge hesaplamasÄ±\r\nlibrary(tidyverse)\r\nlibrary(ggalluvial)\r\n\r\ndf <- readxl::read_excel(\"data.xlsx\")\r\ndf <- df %>% \r\n  mutate(tarih = as.Date(paste0(tarih,\"-\",1))) %>% \r\n  filter(tarih >= as.Date(\"2018-06-01\")) %>% \r\n  na.omit() # MayÄ±s 2022 verisi Ã§Ä±karÄ±ldÄ±.\r\n\r\n\r\n\r\n\r\n\r\n\r\nElimizdeki durumlarÄ±n (State; S1, S2, â€¦) neler olabileceÄŸine\r\nbakalÄ±m:\r\nS1: Faiz YÃ¼kseldi - Enflasyon YÃ¼kseldi\r\nS2: Faiz YÃ¼kseldi - Enflasyon DÃ¼ÅŸtÃ¼\r\nS3: Faiz DÃ¼ÅŸtÃ¼ - Enflasyon YÃ¼kseldi\r\nS4: Faiz DÃ¼ÅŸtÃ¼ - Enflasyon DÃ¼ÅŸtÃ¼\r\nS5: Faiz DeÄŸiÅŸmedi - Enflasyon YÃ¼kseldi\r\nS6: Faiz DeÄŸiÅŸmedi - Enflasyon DÃ¼ÅŸtÃ¼\r\n\r\n\r\ndf2 <- df %>% \r\n  mutate(\r\n    durum = case_when(\r\n      lead(faiz) > faiz & lead(enflasyon) > enflasyon ~ \"S1\",\r\n      lead(faiz) > faiz & lead(enflasyon) < enflasyon ~ \"S2\",\r\n      lead(faiz) < faiz & lead(enflasyon) > enflasyon ~ \"S3\",\r\n      lead(faiz) < faiz & lead(enflasyon) < enflasyon ~ \"S4\",\r\n      lead(faiz) == faiz & lead(enflasyon) > enflasyon ~ \"S5\",\r\n      lead(faiz) == faiz & lead(enflasyon) < enflasyon ~ \"S6\",\r\n    ) # lead() ---> bir sonraki durum; t + 1 ile t karÅŸÄ±laÅŸtÄ±rÄ±lÄ±yor\r\n  ) %>% \r\n  na.omit() %>% # NA iÃ§eren deÄŸerler Ã§Ä±karÄ±ldÄ±\r\n  select(durum) # yeterli olacak sÃ¼tun\r\n\r\n\r\n\r\nKesikli parametreli Markov zincirlerinde sistem belirli bir olasÄ±lÄ±k\r\ndaÄŸÄ±lÄ±mÄ±na baÄŸlÄ± olarak bulunduÄŸu durumdan baÅŸka bir duruma geÃ§ebilir\r\nveya aynÄ± durumda kalabilir. Bu nedenle, incelenen sistemin iÃ§inde\r\nbulunabileceÄŸi farklÄ± durumlarÄ±n ve bu durumlarÄ±n birinden diÄŸerine\r\ngeÃ§iÅŸ olasÄ±lÄ±klarÄ±nÄ± bilmemiz gerekir. Sistemin bu durum deÄŸiÅŸiklikleri\r\ngeÃ§iÅŸ olarak isimlendirilir ve durum uzayÄ±ndaki herhangi i ve j\r\ndurumlarÄ± iÃ§in, \\(p_{ij}(m,n) = P(X_{m+n} =\r\nj/X_m = i)\\) biÃ§imindeki koÅŸullu olasÄ±lÄ±ÄŸa geÃ§iÅŸ olasÄ±lÄ±ÄŸÄ± adÄ±\r\nverilir. AyrÄ±ca, homojen bir Markov zincirinde geÃ§iÅŸ olasÄ±lÄ±ÄŸÄ± yalnÄ±zca\r\nadÄ±m sayÄ±sÄ±nÄ±n bir fonksiyonudur ve m zamanÄ±na baÄŸlÄ± deÄŸildir.\r\nYukarÄ±daki durumlarÄ± baz alarak Markov geÃ§iÅŸ matrisini\r\noluÅŸturalÄ±m.\r\n\r\n\r\nmgm <- df2 %>% \r\n  mutate(\r\n    durum2 = lead(durum)\r\n  ) %>% # hangi durumdan hangi duruma geÃ§ti\r\n  na.omit() %>% \r\n  group_by(durum,durum2) %>% \r\n  summarise(n = n()) %>% \r\n  ungroup()\r\n\r\n\r\n\r\nTabloda olmayan bazÄ± durumlar var. BunlarÄ± tÃ¼m durumlarÄ± baz alarak\r\nekleyebiliriz.\r\n\r\n\r\ntumDurumlar <- data.frame(\r\n  durum = paste0(\"S\",seq(1,6,1)), # tÃ¼m durumlar\r\n  durum2 = paste0(\"S\",seq(1,6,1)) # tÃ¼m durumlar 2\r\n) %>% \r\n  expand(durum,durum2) %>% # tÃ¼m durumlar burada geniÅŸletiliyor\r\n  left_join(mgm, by = c(\"durum\",\"durum2\")) %>% \r\n  mutate(n = replace(n,is.na(n),0))\r\n\r\n\r\n\r\n\r\n\r\n\r\nMatrisi oluÅŸturabiliriz. Her bir hÃ¼creyi o satÄ±rÄ±n toplamÄ±na bÃ¶lerek\r\nolasÄ±lÄ±klarÄ± hesaplayacaÄŸÄ±z.\r\n\r\n\r\nm <- tumDurumlar %>% \r\n  pivot_wider(names_from = \"durum2\", values_from = \"n\") %>% # sÃ¼tun\r\n  column_to_rownames(var = \"durum\") %>% # satÄ±r\r\n  mutate_all(.funs = function(x) round(x / rowSums(.), digits = 2)) %>% \r\n  mutate_if(is.numeric, funs(ifelse(is.nan(.), 0, .))) %>% \r\n  as.matrix()\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nS1\r\n\r\n\r\nS2\r\n\r\n\r\nS3\r\n\r\n\r\nS4\r\n\r\n\r\nS5\r\n\r\n\r\nS6\r\n\r\n\r\nS1\r\n\r\n\r\n0.38\r\n\r\n\r\n0.12\r\n\r\n\r\n0.25\r\n\r\n\r\n0.12\r\n\r\n\r\n0.12\r\n\r\n\r\n0.00\r\n\r\n\r\nS2\r\n\r\n\r\n0.50\r\n\r\n\r\n0.00\r\n\r\n\r\n0.25\r\n\r\n\r\n0.25\r\n\r\n\r\n0.00\r\n\r\n\r\n0.00\r\n\r\n\r\nS3\r\n\r\n\r\n0.07\r\n\r\n\r\n0.07\r\n\r\n\r\n0.47\r\n\r\n\r\n0.13\r\n\r\n\r\n0.13\r\n\r\n\r\n0.13\r\n\r\n\r\nS4\r\n\r\n\r\n0.00\r\n\r\n\r\n0.14\r\n\r\n\r\n0.43\r\n\r\n\r\n0.43\r\n\r\n\r\n0.00\r\n\r\n\r\n0.00\r\n\r\n\r\nS5\r\n\r\n\r\n0.12\r\n\r\n\r\n0.00\r\n\r\n\r\n0.12\r\n\r\n\r\n0.00\r\n\r\n\r\n0.62\r\n\r\n\r\n0.12\r\n\r\n\r\nS6\r\n\r\n\r\n0.33\r\n\r\n\r\n0.33\r\n\r\n\r\n0.00\r\n\r\n\r\n0.00\r\n\r\n\r\n0.33\r\n\r\n\r\n0.00\r\n\r\n\r\nYukarÄ±daki matris bir-adÄ±m geÃ§iÅŸ olasÄ±lÄ±ÄŸÄ± matrisidir. Homojen bir\r\nMarkov zincirinde m. adÄ±mda i durumunda bulunan sÃ¼recin bir adÄ±m sonra j\r\ndurumunda bulunmasÄ± olasÄ±lÄ±ÄŸÄ± \\(p_{ij} =\r\np_{ij}(1) = p_{ij}^{(1)} = P(X_{m+1} = j/X_m = i)\\)â€™dir.\r\nYukarÄ±daki bir-adÄ±m geÃ§iÅŸ matrisinde satÄ±rlar sistemin ÅŸu an\r\nbulunabileceÄŸi durumlarÄ±; sÃ¼tunlar ise bir adÄ±m sonra bulunabileceÄŸi\r\ndurumlarÄ± gÃ¶stermektedir.\r\nBaÅŸlangÄ±Ã§ durumu S5â€™tir. Yani, faiz deÄŸiÅŸmedi - enflasyon yÃ¼kseldi.\r\nGelecek MayÄ±s ayÄ±na ait olasÄ±lÄ±klara bakalÄ±m.\r\n\r\n\r\nbaslangicDurum <- matrix(\r\n  data = c(0,0,0,0,1,0), # S5 ---> 1; diÄŸerleri 0\r\n  nrow = 1,\r\n  byrow = TRUE\r\n)\r\n\r\n\r\n\r\n\r\n\r\nbaslangicDurum %*% m\r\n\r\n\r\n\r\n\r\n\r\nS1\r\n\r\n\r\nS2\r\n\r\n\r\nS3\r\n\r\n\r\nS4\r\n\r\n\r\nS5\r\n\r\n\r\nS6\r\n\r\n\r\n0.12\r\n\r\n\r\n0\r\n\r\n\r\n0.12\r\n\r\n\r\n0\r\n\r\n\r\n0.62\r\n\r\n\r\n0.12\r\n\r\n\r\nFaizin deÄŸiÅŸmediÄŸi ve enflasyonun yÃ¼kseldiÄŸi bir dÃ¶nemden yine faizin\r\ndeÄŸiÅŸmediÄŸi ve enflasyonun yÃ¼kseldiÄŸi bir dÃ¶neme geÃ§iÅŸ olasÄ±lÄ±ÄŸÄ±\r\n62%â€™dir.\r\nPeki, Haziran ayÄ± iÃ§in (iki-adÄ±m geÃ§iÅŸ) olasÄ±lÄ±klar ne olacaktÄ±r?\r\n\r\n\r\nm %^% 2 %>% as.matrix() %>% round(., digits = 2)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nS1\r\n\r\n\r\nS2\r\n\r\n\r\nS3\r\n\r\n\r\nS4\r\n\r\n\r\nS5\r\n\r\n\r\nS6\r\n\r\n\r\nS1\r\n\r\n\r\n0.24\r\n\r\n\r\n0.08\r\n\r\n\r\n0.31\r\n\r\n\r\n0.16\r\n\r\n\r\n0.15\r\n\r\n\r\n0.05\r\n\r\n\r\nS2\r\n\r\n\r\n0.21\r\n\r\n\r\n0.11\r\n\r\n\r\n0.35\r\n\r\n\r\n0.20\r\n\r\n\r\n0.09\r\n\r\n\r\n0.03\r\n\r\n\r\nS3\r\n\r\n\r\n0.15\r\n\r\n\r\n0.10\r\n\r\n\r\n0.33\r\n\r\n\r\n0.14\r\n\r\n\r\n0.19\r\n\r\n\r\n0.08\r\n\r\n\r\nS4\r\n\r\n\r\n0.10\r\n\r\n\r\n0.09\r\n\r\n\r\n0.42\r\n\r\n\r\n0.28\r\n\r\n\r\n0.06\r\n\r\n\r\n0.06\r\n\r\n\r\nS5\r\n\r\n\r\n0.17\r\n\r\n\r\n0.06\r\n\r\n\r\n0.16\r\n\r\n\r\n0.03\r\n\r\n\r\n0.45\r\n\r\n\r\n0.09\r\n\r\n\r\nS6\r\n\r\n\r\n0.33\r\n\r\n\r\n0.04\r\n\r\n\r\n0.20\r\n\r\n\r\n0.12\r\n\r\n\r\n0.24\r\n\r\n\r\n0.04\r\n\r\n\r\nMarkov zincirinde ilk olasÄ±lÄ±k daÄŸÄ±lÄ±mÄ± ve zincirin bir-adÄ±m geÃ§iÅŸ\r\nmatrisini belirlediÄŸimizde zincirin tÃ¼m adÄ±mlarÄ±ndaki olasÄ±lÄ±klarÄ±\r\nkolayca elde edebiliriz. n-adÄ±m olasÄ±lÄ±klÄ± vektÃ¶rÃ¼ \\(\\pi_{n} = \\pi_{n-1}P\\) olsun. Buradan\r\naÅŸaÄŸÄ±daki eÅŸitlikleri tÃ¼retebiliriz.\r\n\\(\\pi_n = (\\pi_{n-2}P)P =\r\n\\pi_{n-2}P^2\\)\r\n.\r\n.\r\n.\r\n\\(\\pi_n = \\pi_0P^n\\)\r\nP geÃ§iÅŸ matrisinin n.Â kuvvetini aldÄ±ÄŸÄ±mÄ±zda elde edeceÄŸimiz n-adÄ±m\r\ngeÃ§iÅŸ matrisi \\(P^n\\)â€™de n deÄŸeri\r\nbÃ¼yÃ¼dÃ¼kÃ§e \\(P_{ij}^{(n)}\\) olasÄ±lÄ±k\r\ndeÄŸerleri sabit bir deÄŸere ya da limite yaklaÅŸÄ±yorsa, n-adÄ±m geÃ§iÅŸ\r\nolasÄ±lÄ±klarÄ± denge durumuna ulaÅŸÄ±r. Denge durumuna ulaÅŸtÄ±ÄŸÄ±mÄ±zda geÃ§iÅŸ\r\nmatrisinin satÄ±rlarÄ±nda deÄŸiÅŸim olmadÄ±ÄŸÄ±nÄ± gÃ¶receÄŸiz. Yani, her satÄ±rÄ±\r\naynÄ± olan bir geÃ§iÅŸ matrisi elde edeceÄŸiz.\r\n\\(\\pi_n = [\\pi_0 \\pi_1 ...\r\n\\pi_n]\\)\r\n\r\n\r\nm <- tumDurumlar %>% \r\n  pivot_wider(names_from = \"durum2\", values_from = \"n\") %>% # sÃ¼tun\r\n  column_to_rownames(var = \"durum\") %>% # satÄ±r\r\n  mutate_all(.funs = function(x) x / rowSums(.)) %>% \r\n  # satÄ±r toplamÄ± 1 olmasÄ± iÃ§in round() kaldÄ±rÄ±ldÄ±\r\n  mutate_if(is.numeric, funs(ifelse(is.nan(.), 0, .))) %>% \r\n  as.matrix()\r\n\r\nn_adim <- new(\r\n  \"markovchain\",\r\n  transitionMatrix = matrix(as.numeric(m), nrow = 6, ncol = 6)\r\n)\r\n\r\n\r\n\r\n\r\n\r\nsteadyStates(n_adim) %>% round(. ,digits = 2)\r\n\r\n\r\n\r\n\r\n\r\n1\r\n\r\n\r\n2\r\n\r\n\r\n3\r\n\r\n\r\n4\r\n\r\n\r\n5\r\n\r\n\r\n6\r\n\r\n\r\n0.18\r\n\r\n\r\n0.09\r\n\r\n\r\n0.29\r\n\r\n\r\n0.15\r\n\r\n\r\n0.23\r\n\r\n\r\n0.07\r\n\r\n\r\nUzun dÃ¶nemde;\r\nFaizin yÃ¼kseldiÄŸi ve enflasyonun yÃ¼kseldiÄŸi dÃ¶nem olasÄ±lÄ±ÄŸÄ±\r\n18%,\r\nFaizin yÃ¼kseldiÄŸi ve enflasyonun dÃ¼ÅŸtÃ¼ÄŸÃ¼ dÃ¶nem olasÄ±lÄ±ÄŸÄ±\r\n9%,\r\nFaizin dÃ¼ÅŸtÃ¼ÄŸÃ¼ ve enflasyonun yÃ¼kseldiÄŸi dÃ¶nem olasÄ±lÄ±ÄŸÄ±\r\n29%,\r\nFaizin dÃ¼ÅŸtÃ¼ÄŸÃ¼ ve enflasyonun dÃ¼ÅŸtÃ¼ÄŸÃ¼ dÃ¶nem olasÄ±lÄ±ÄŸÄ±\r\n15%,\r\nFaizin deÄŸiÅŸmediÄŸi ve enflasyonun yÃ¼kseldiÄŸi dÃ¶nem olasÄ±lÄ±ÄŸÄ±\r\n23%,\r\nFaizin deÄŸiÅŸmediÄŸi ve enflasyonun dÃ¼ÅŸtÃ¼ÄŸÃ¼ dÃ¶nem olasÄ±lÄ±ÄŸÄ±\r\n7%â€™dir.\r\nDeÄŸerlerin toplamÄ± yuvarlamadan dolayÄ± 100% deÄŸildir.\r\nYukarÄ±daki olasÄ±lÄ±klarÄ± baz aldÄ±ÄŸÄ±mÄ±zda uzun vadede enflasyonun\r\nyÃ¼kselmesi olasÄ±lÄ±ÄŸÄ± 70% iken; dÃ¼ÅŸmesi olasÄ±lÄ±ÄŸÄ± 30%â€™dur.\r\nGÃ¶rsellere ait kodlara aÅŸaÄŸÄ±dan ulaÅŸÄ±labilir.\r\n\r\n\r\ndf %>% \r\n  rename(\"AOFM\"=2, \"Enflasyon\"=3) %>% \r\n  pivot_longer(!tarih, names_to = \"variables\", values_to = \"values\") %>% \r\n  ggplot(aes(x = tarih, y = log(values), group = variables, color = variables)) +\r\n  geom_line() +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank(),\r\n        legend.position = \"top\",\r\n        plot.title = element_text(face = \"bold\"),\r\n        plot.subtitle = element_text(face = \"italic\", size = 7),\r\n        plot.caption = element_text(face = \"italic\", size = 5)) +\r\n  scale_color_manual(values = c(\"blue\",\"red\")) +\r\n  labs(title = \"AÄŸÄ±rlÄ±klÄ± Ortalama Fonlama Faizi ve Enflasyon (YoY)\",\r\n       subtitle = \"Ocak 2011 - Nisan 2022\",\r\n       caption = \"DeÄŸerler logaritmiktir.\\nVeriler TCMB/EVDS'den alÄ±nmÄ±ÅŸtÄ±r.\")\r\n\r\nggplot(data = tumDurumlar, aes(axis1 = durum, axis2 = durum2, y = n)) +\r\n  geom_alluvium(aes(fill = durum2)) +\r\n  geom_stratum(fill = \"gray15\") +\r\n  geom_text(stat = \"stratum\", aes(label = after_stat(stratum)), color = \"white\") +\r\n  scale_x_discrete(limits = c(\"durum\", \"durum2\"), expand = c(0.15, 0.05)) +\r\n  theme_void() + \r\n  theme(legend.position = \"none\") +\r\n  scale_fill_viridis_d()\r\n\r\n\r\n\r\nYararlandÄ±ÄŸÄ±m Kaynaklar:\r\nStokastik SÃ¼reÃ§ler ve R UygulamalarÄ±; G.Ã–.KadÄ±lar\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-05-19-post3/post3_files/figure-html5/unnamed-chunk-6-1.png",
    "last_modified": "2022-05-29T01:32:02+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-04-post2/",
    "title": "Merkez BankasÄ± Rezervleri NasÄ±l HesaplanÄ±r?",
    "description": "Bir fonksiyon ile gÃ¼ncel rezerv deÄŸerine kolay eriÅŸim.",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-05-04",
    "categories": [
      "Finance"
    ],
    "contents": "\r\nRezervlerin Râ€™da nasÄ±l hesaplanabileceÄŸini gÃ¶stermek iÃ§in Mahfi\r\nEÄŸilmezâ€™in Rezerv\r\nMeselesi baÅŸlÄ±klÄ± bulabildiÄŸim en gÃ¼ncel yazÄ±sÄ±ndan faydalandÄ±m. En\r\ngÃ¼ncel diyorum Ã§Ã¼nkÃ¼ diÄŸer yazÄ±larÄ±na gÃ¶re farklÄ±lÄ±klar gÃ¶rdÃ¼m ve en\r\ngÃ¼ncelin en doÄŸru olabileceÄŸini dÃ¼ÅŸÃ¼ndÃ¼m. Tabi ki hesaplama ile ilgili\r\ngÃ¶rÃ¼ÅŸ farklÄ±lÄ±klarÄ± Ã§Ä±kacaktÄ±r ancak bu tartÄ±ÅŸma bu yazÄ±nÄ±n konusu\r\ndeÄŸildir.\r\nÃœÃ§ ana konuyu Ã¶ÄŸretmeyi hedefliyorum: 1) TCMBâ€™den veri nasÄ±l Ã§ekilir?\r\n2) Râ€™da bu hesaplamayÄ± nasÄ±l otomatik hale getirebiliriz? 3)\r\nRezervlerimiz nasÄ±l hesaplanÄ±yor?\r\nTCMB EVDS sistemine Ã¼ye nasÄ±l olunur ve sistemden API\r\nanahtarÄ± nasÄ±l alÄ±nÄ±r?\r\nTCMBâ€™nin Elektronik Veri DaÄŸÄ±tÄ±m Sistemi olan EVDSâ€™ye buradan ulaÅŸabilirsiniz.\r\nDokÃ¼mantasyon okumayÄ± alÄ±ÅŸkanlÄ±k haline getirmeliyiz. Bunun iÃ§in sayfada\r\nyer alan KullanÄ±cÄ±\r\nDokÃ¼manlarÄ± baÅŸlÄ±ÄŸÄ±na tÄ±klayÄ±p Web\r\nServis KullanÄ±m KÄ±lavuzuâ€™na eriÅŸiyoruz.\r\nTCMB bu dokÃ¼man ile web servis metotlarÄ±nÄ±n parametrelerini\r\naÃ§Ä±klamÄ±ÅŸ. Bu sayfa ÅŸimdilik kalsÄ±n.\r\nYine aynÄ± sayfada yer alan GiriÅŸ Yap\r\nbÃ¶lÃ¼mÃ¼ne giriyoruz. Daha Ã¶nce kayÄ±t olmadÄ±ysanÄ±z KayÄ±t Olun\r\nseÃ§eneÄŸi ile kayÄ±t iÅŸleminizi yapabilirsiniz. ArdÄ±ndan kullanÄ±cÄ±\r\nadÄ±, parola ve doÄŸrulama kodu ile giriÅŸ\r\nyapÄ±labilir. Bundan sonra bir API anahtarÄ±na ihtiyacÄ±nÄ±z olacak. Bunun\r\niÃ§in de isminiz ve soyisminizin yer aldÄ±ÄŸÄ± yerden profilinize gidip\r\nAPI AnahtarÄ± butonuna tÄ±klayabilirsiniz. TarayÄ±cÄ±nÄ±zda Ã§Ä±kan\r\nbir mesaj ile API anahtarÄ±nÄ±z verilecek. Bunu kopyalayÄ±n ya da aÅŸaÄŸÄ±daki\r\ngibi bir objeye kaydedin.\r\n\r\n\r\napi_key <- \"api_anahtariniz\"\r\n\r\n\r\n\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(jsonlite)\r\n\r\n\r\n\r\nBaÅŸlamadan bir not: Ã–nce detaylÄ± bir ÅŸekilde aÃ§Ä±klayacaÄŸÄ±m,\r\nsonrasÄ±nda Ã¶ÄŸrendiklerimizi tek bir fonksiyonda toplayÄ±p vereceÄŸim.\r\nBaÅŸlamadan diÄŸer bir not: Ã–nce yazÄ±da hesaplanan deÄŸerlere ulaÅŸÄ±p bir\r\nnevi deÄŸerleri teyit edeceÄŸiz; ardÄ±ndan gÃ¼ncel rezervi\r\nhesaplayacaÄŸÄ±z.\r\nRezervleri Hesaplamak Ä°Ã§in Denklemler:\r\nNet Rezervler = (DÄ±ÅŸ VarlÄ±klar / O gÃ¼nkÃ¼ TCMB USD AlÄ±ÅŸ Kuru) - (DÃ¶viz\r\nYÃ¼kÃ¼mlÃ¼lÃ¼kleri / O gÃ¼nkÃ¼ TCMB USD AlÄ±ÅŸ Kuru)\r\nSwaplar = DÃ¶viz SwaplarÄ± + AltÄ±n SwaplarÄ±\r\nSwap HariÃ§ Net Rezervler = Net Rezervler - Swaplar\r\nNet Rezervler\r\nNet Rezervler = (DÄ±ÅŸ VarlÄ±klar / O gÃ¼nkÃ¼ TCMB USD AlÄ±ÅŸ Kuru) - (DÃ¶viz\r\nYÃ¼kÃ¼mlÃ¼lÃ¼kleri / O gÃ¼nkÃ¼ TCMB USD AlÄ±ÅŸ Kuru)\r\nEVDSâ€™deki yeri: TÃ¼m Seriler > TCMB BilanÃ§o Verileri > Merkez\r\nBankasÄ± Analitik BilanÃ§o (Bin TL)\r\nWeb Servis ile almak iÃ§in aÅŸaÄŸÄ±daki adÄ±mlarÄ± takip edebiliriz.\r\nKategorileri gÃ¶relim.\r\nDokÃ¼manda 4 noâ€™lu EVDS Metaveri web servisleri baÅŸlÄ±ÄŸÄ±\r\naltÄ±ndaki 4.1 noâ€™lu Konu BaÅŸlÄ±ÄŸÄ± Servisi alt baÅŸlÄ±ÄŸÄ±nda\r\nbulunmaktadÄ±r.\r\nTÃ¼m konu baÅŸlÄ±klarÄ±nÄ± sunan bir servistir. Bu servisi temsilen\r\nâ€œhttps://evds2.tcmb.gov.tr/service/evds/â€ tanÄ±mÄ±ndan\r\nsonra â€œcategoriesâ€ eklenmelidir.\r\nhttps://evds2.tcmb.gov.tr/service/evds/categories/key=XXXXXX&type=xml\r\nUzantÄ±sÄ± xml olsa da biz bunu json ile alabiliriz (json iÃ§in jsonlite\r\npaketinin fromJSON() fonksiyonundan faydalanacaÄŸÄ±z).\r\n\r\n\r\nurl_kategori <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/categories/key=\",\r\n                       api_key,\r\n                       \"&type=json\")\r\n\r\ndf_kategori <- fromJSON(url_kategori) %>%\r\n  as.data.frame() %>%\r\n  select(CATEGORY_ID,TOPIC_TITLE_TR)\r\n\r\nkategori_id <- df_kategori %>% \r\n  filter(TOPIC_TITLE_TR == 'TCMB BÄ°LANÃ‡O VERÄ°LERÄ°') %>% \r\n  pull(CATEGORY_ID)\r\n\r\n\r\n\r\n2 sÃ¼tun ve 24 satÄ±rdan oluÅŸan df_kategori objesini aldÄ±k. TCMB\r\nBilanÃ§o Verileriâ€™nin kategori IDâ€™si 13â€™tÃ¼r.\r\nVeri gruplarÄ±nÄ± gÃ¶relim.\r\nDokÃ¼manda 4 noâ€™lu EVDS Metaveri web servisleri baÅŸlÄ±ÄŸÄ±\r\naltÄ±ndaki 4.2 noâ€™lu Veri Grubu Servisi alt baÅŸlÄ±ÄŸÄ±nda\r\nbulunmaktadÄ±r.\r\nÄ°lgili Konu baÅŸlÄ±ÄŸÄ± bazÄ±nda ya da tek bir veri grubunun metaveri\r\nbilgilerini listeleyen bir servistir. Bu servisi temsilen â€œhttps://evds2.tcmb.gov.tr/service/evds/â€ tanÄ±mÄ±ndan\r\nsonra â€œdatagroupsâ€ eklenmelidir.\r\nhttps://evds2.tcmb.gov.tr/service/evds/datagroups/key=XXXX&mode=1&code=bie_yssk&type=json\r\nhttps://evds2.tcmb.gov.tr/service/evds/datagroups/key=XXXX&mode=2&code=2&type=xml\r\nVerilen Ã¶rneklerde mode=1 ve mode=2 olarak verilse de biz mode=0\r\nolarak kullanacaÄŸÄ±z. Ã‡Ã¼nkÃ¼ tÃ¼m konu baÅŸlÄ±klarÄ± altÄ±ndaki tÃ¼m veri\r\ngruplarÄ±nÄ± gÃ¶receÄŸiz.\r\n\r\n\r\nurl_verigrubu <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/datagroups/key=\",\r\n                        api_key,\r\n                        \"&mode=0&type=json\")\r\n\r\ndf_verigrubu <- fromJSON(url_verigrubu) %>% \r\n  as.data.frame() %>% \r\n  filter(CATEGORY_ID == kategori_id) %>% \r\n  select(CATEGORY_ID,\r\n         DATAGROUP_CODE,\r\n         DATAGROUP_NAME,\r\n         FREQUENCY_STR,\r\n         NOTE,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nverigrubu_kodu <- df_verigrubu %>% \r\n  filter(DATAGROUP_NAME == 'Merkez BankasÄ± Analitik BilanÃ§o(Bin TL)') %>% \r\n  pull(DATAGROUP_CODE)\r\n\r\n\r\n\r\n7 sÃ¼tun ve 6 satÄ±rdan oluÅŸan df_verigrubu objesini aldÄ±k. Merkez\r\nBankasÄ± Analitik BilanÃ§o(Bin TL)â€™nin veri grubu kodu\r\nbie_abanlbilâ€™dir.\r\nSerileri gÃ¶relim.\r\nDokÃ¼manda 4 noâ€™lu EVDS Metaveri web servisleri baÅŸlÄ±ÄŸÄ±\r\naltÄ±ndaki 4.3 noâ€™lu Seri Listesi Servisi alt baÅŸlÄ±ÄŸÄ±nda\r\nbulunmaktadÄ±r.\r\nSeri listesini veri grubu ya da seri kodu bazÄ±nda sunan bir\r\nservistir. Bu servisi temsilen â€œhttps://evds2.tcmb.gov.tr/service/evds/â€ tanÄ±mÄ±ndan\r\nsonra â€œserieListâ€ eklenmelidir.\r\nhttps://evds2.tcmb.gov.tr/service/evds/serieList/key=XXXXX&type=xml&code=TP.DK.USD.A\r\nhttps://evds2.tcmb.gov.tr/service/evds/serieList/key=XXXXX&type=csv&code=bie_yssk\r\nBiz kodumuzu bildiÄŸimiz iÃ§in Ã¶rnekte verilen code= kÄ±smÄ±na kendi\r\nkodumuzu yazacaÄŸÄ±z.\r\n\r\n\r\nurl_seri <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/serieList/key=\",\r\n                   api_key,\r\n                   \"&type=json&code=\",\r\n                   verigrubu_kodu)\r\n\r\ndf_seri <- fromJSON(url_seri) %>% \r\n  as.data.frame() %>% \r\n  select(SERIE_CODE,\r\n         DATAGROUP_CODE,\r\n         SERIE_NAME,\r\n         FREQUENCY_STR,\r\n         DEFAULT_AGG_METHOD_STR,\r\n         DEFAULT_AGG_METHOD,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nseri <- df_seri %>% \r\n  filter(SERIE_NAME %in% c('A.1-DIÅž VARLIKLAR(Bin TL)',\r\n                           'P.1-TOPLAM DÃ–VÄ°Z YÃœKÃœMLÃœLÃœKLERÄ°(Bin TL)')) %>% \r\n  pull(SERIE_CODE)\r\n\r\n\r\n\r\n8 sÃ¼tun ve 31 satÄ±rdan oluÅŸan df_seri objesini aldÄ±k. A.1-DIÅž\r\nVARLIKLAR(Bin TL)â€™nin seri kodu TP.AB.A02; P.1-TOPLAM DÃ–VÄ°Z\r\nYÃœKÃœMLÃœLÃœKLERÄ°(Bin TL)â€™nin seri kodu TP.AB.A10â€™dur.\r\nSon olarak verileri alabiliriz. URL olarak temelde https://evds2.tcmb.gov.tr/service/evds/series=\r\nkullanacaÄŸÄ±z. SonrasÄ± ise parametrelerin eklenmesi olacak. DokÃ¼manda\r\nbununla ilgili aÃ§Ä±klayÄ±cÄ± Ã¶rnekler bulunmaktadÄ±r.\r\nAÅŸaÄŸÄ±daki Ã¶rnekte urlâ€™den sonra seri kodlarÄ±nÄ±n arasÄ±na â€œ-â€ koyduk.\r\nYani, birden fazla seriyi alabiliyoruz. DevamÄ±nda ise baÅŸlangÄ±Ã§ ve bitiÅŸ\r\ntarihlerine sÄ±rasÄ±yla &startDate= ve &endDate= ile adres\r\ngÃ¶sterdik. Bunlara ek olarak urlâ€™e frekans tipini ekleyeceÄŸiz Ã§Ã¼nkÃ¼ bu\r\nseri default iÅŸ gÃ¼nÃ¼ olarak geliyor ve bunu haftalÄ±k yapmamÄ±z gerekir.\r\nEklenecek olan parametre frequency ve haftalÄ±k olduÄŸu iÃ§in 3\r\ndiyeceÄŸiz.\r\n\r\n\r\nhaftalikTarih <- \"26-02-2021\"\r\nfrekans <- 3\r\n\r\nurl_veri <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                   seri[1],\r\n                   \"-\",\r\n                   seri[2],\r\n                   \"&startDate=\",\r\n                   haftalikTarih,\r\n                   \"&endDate=\",\r\n                   haftalikTarih,\r\n                   \"frequency=\",\r\n                   frekans,\r\n                   \"&type=json&key=\",\r\n                   api_key)\r\n\r\ndf_veri <- fromJSON(url_veri) %>% \r\n  as.data.frame() %>% \r\n  select(2,3,4) %>% \r\n  rename(\r\n    \"Tarih\"=1,\r\n    \"A.1-DIÅž VARLIKLAR(Bin TL)\"=2,\r\n    \"P.1-TOPLAM DÃ–VÄ°Z YÃœKÃœMLÃœLÃœKLERÄ°(Bin TL)\"=3\r\n  )\r\n\r\n\r\n\r\nDÄ±ÅŸ varlÄ±klardan toplam dÃ¶viz yÃ¼kÃ¼mlÃ¼lÃ¼klerini Ã§Ä±karacaÄŸÄ±z ancak\r\nÃ§Ä±kacak olan fark TL cinsinden olduÄŸu iÃ§in bunu dolara Ã§evirmemiz\r\ngerekiyor. Bunu da o gÃ¼ne ait kur Ã¼zerinden yapacaÄŸÄ±z (yazÄ±da hesaplama\r\nyapÄ±lÄ±rken 15:30â€™da belirlenen gÃ¶sterge niteliÄŸindeki Merkez BankasÄ±\r\nkuru kullanÄ±lÄ±yor; biz ise EVDS sisteminden aldÄ±ÄŸÄ±mÄ±z kuru\r\nkullanacaÄŸÄ±z).\r\n26 Åžubat 2021â€™deki USD/TL kur deÄŸerine ulaÅŸalÄ±m. Kurlarâ€™Ä±n bulunduÄŸu\r\nkategorinin IDâ€™si 2â€™dir. Bunun yanÄ±nda Kurlar-DÃ¶viz KurlarÄ±â€™nÄ±n veri\r\ngrubu kodu bie_dkdovytl; (USD) ABD DolarÄ± (DÃ¶viz AlÄ±ÅŸ)â€™Ä±n seri kodu\r\nTP.DK.USD.A.YTLâ€™dir.\r\n\r\n\r\nkategori_id_2 <- df_kategori %>% \r\n  filter(TOPIC_TITLE_TR == 'KURLAR') %>% \r\n  pull(CATEGORY_ID)\r\n\r\ndf_verigrubu_2 <- fromJSON(url_verigrubu) %>% \r\n  as.data.frame() %>% \r\n  filter(CATEGORY_ID == kategori_id_2) %>% \r\n  select(CATEGORY_ID,\r\n         DATAGROUP_CODE,\r\n         DATAGROUP_NAME,\r\n         FREQUENCY_STR,\r\n         NOTE,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nverigrubu_kodu_2 <- df_verigrubu_2 %>% \r\n  filter(DATAGROUP_NAME == 'Kurlar-DÃ¶viz KurlarÄ±') %>% \r\n  pull(DATAGROUP_CODE)\r\n\r\nurl_seri_2 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/serieList/key=\",\r\n                     api_key,\r\n                     \"&type=json&code=\",\r\n                     verigrubu_kodu_2)\r\n\r\ndf_seri_2 <- fromJSON(url_seri_2) %>% \r\n  as.data.frame() %>% \r\n  select(SERIE_CODE,\r\n         DATAGROUP_CODE,\r\n         SERIE_NAME,\r\n         FREQUENCY_STR,\r\n         DEFAULT_AGG_METHOD_STR,\r\n         DEFAULT_AGG_METHOD,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nseri_2 <- df_seri_2 %>% \r\n  filter(SERIE_NAME == '(USD) ABD DolarÄ± (DÃ¶viz AlÄ±ÅŸ)') %>% \r\n  pull(SERIE_CODE)\r\n\r\nurl_veri_2 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                     seri_2,\r\n                     \"&startDate=\",\r\n                     haftalikTarih,\r\n                     \"&endDate=\",\r\n                     haftalikTarih,\r\n                     \"&type=json&key=\",\r\n                     api_key)\r\n\r\ndf_veri_2 <- fromJSON(url_veri_2) %>% \r\n  as.data.frame() %>% \r\n  select(2,3) %>% \r\n  rename(\r\n    \"Tarih\"=1,\r\n    \"(USD) ABD DolarÄ± (DÃ¶viz AlÄ±ÅŸ)\"=2\r\n  )\r\n\r\n\r\n\r\nNet Rezerv aÅŸaÄŸÄ±daki gibi hesaplanabilir.\r\n\r\n\r\n# Birimler Bin TL'dir.\r\n\r\ndis_varliklar <- as.numeric(df_veri$`A.1-DIÅž VARLIKLAR(Bin TL)`)\r\ndoviz_yukumluluk <- as.numeric(df_veri$`P.1-TOPLAM DÃ–VÄ°Z YÃœKÃœMLÃœLÃœKLERÄ°(Bin TL)`)\r\nkur <- as.numeric(df_veri_2$`(USD) ABD DolarÄ± (DÃ¶viz AlÄ±ÅŸ)`)\r\n\r\nnet_rezerv <- (dis_varliklar - doviz_yukumluluk) / kur\r\n\r\n\r\n\r\nNet Rezerv = -2247086 ya da -2,2 milyar dolar.\r\nSwaplar\r\n\r\n\r\n\r\nSwaplar = DÃ¶viz SwaplarÄ± + AltÄ±n SwaplarÄ±\r\nEVDSâ€™deki yeri: TÃ¼m Seriler > Ã–demeler Dengesi, UluslararasÄ±\r\nYatÄ±rÄ±m Pozisyonu > UluslararasÄ± Rezervler ve DÃ¶viz Likiditesi\r\nTablosu (Milyon ABD DolarÄ±)\r\nWeb Servis ile almak iÃ§in:\r\nÃ–DEMELER DENGESÄ°, ULUSLARARASI YATIRIM POZÄ°SYONUâ€™nun bulunduÄŸu\r\nkategorinin IDâ€™si 18â€™dir. Bunun yanÄ±nda UluslararasÄ± Rezervler ve DÃ¶viz\r\nLikiditesi Tablosu (Milyon ABD DolarÄ±)â€™nÄ±n veri grubu kodu\r\nbie_ulusdovlkd; II.2. Yurt iÃ§i para karÅŸÄ±lÄ±ÄŸÄ±nda dÃ¶viz forward ve\r\nfutureâ€™larÄ±n toplam kÄ±sa ve fazla pozisyon bÃ¼yÃ¼klÃ¼kleri (para\r\nswaplarÄ±nÄ±n gelecekteki bacaÄŸÄ±nÄ± da kapsar.) (Milyon ABD DolarÄ±)â€™nÄ±n ve\r\nII.3. DiÄŸer (Milyon ABD DolarÄ±)â€™nÄ±n seri kodlarÄ± sÄ±rasÄ±yla\r\nTP.DOVVARNC.K14 ve TP.DOVVARNC.K23â€™tÃ¼r.\r\n\r\n\r\nkategori_id_3 <- df_kategori %>% \r\n  filter(TOPIC_TITLE_TR == 'Ã–DEMELER DENGESÄ°, ULUSLARARASI YATIRIM POZÄ°SYONU') %>% \r\n  pull(CATEGORY_ID)\r\n\r\ndf_verigrubu_3 <- fromJSON(url_verigrubu) %>% \r\n  as.data.frame() %>% \r\n  filter(CATEGORY_ID == kategori_id_3) %>% \r\n  select(CATEGORY_ID,\r\n         DATAGROUP_CODE,\r\n         DATAGROUP_NAME,\r\n         FREQUENCY_STR,\r\n         NOTE,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nverigrubu_kodu_3 <- df_verigrubu_3 %>% \r\n  filter(DATAGROUP_NAME == 'UluslararasÄ± Rezervler ve DÃ¶viz Likiditesi Tablosu (Milyon ABD DolarÄ±)') %>% \r\n  pull(DATAGROUP_CODE)\r\n\r\nurl_seri_3 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/serieList/key=\",\r\n                     api_key,\r\n                     \"&type=json&code=\",\r\n                     verigrubu_kodu_3)\r\n\r\ndf_seri_3 <- fromJSON(url_seri_3) %>% \r\n  as.data.frame() %>% \r\n  select(SERIE_CODE,\r\n         DATAGROUP_CODE,\r\n         SERIE_NAME,\r\n         FREQUENCY_STR,\r\n         DEFAULT_AGG_METHOD_STR,\r\n         DEFAULT_AGG_METHOD,\r\n         START_DATE,\r\n         END_DATE)\r\n\r\nuzun_vektor <- paste0(\r\n  \"II.2. Yurt iÃ§i para karÅŸÄ±lÄ±ÄŸÄ±nda dÃ¶viz forward ve future'larÄ±n \",\r\n  \"toplam kÄ±sa ve fazla pozisyon bÃ¼yÃ¼klÃ¼kleri \",\r\n  \"(para swaplarÄ±nÄ±n gelecekteki bacaÄŸÄ±nÄ± da kapsar.) (Milyon ABD DolarÄ±)\"\r\n)\r\n\r\nseri_3 <- df_seri_3 %>% \r\n  filter(SERIE_NAME %in% c(uzun_vektor,\r\n                           'II.3. DiÄŸer (Milyon ABD DolarÄ±)')) %>% \r\n  pull(SERIE_CODE)\r\n\r\naylikTarih <- \"01-02-2021\"\r\nfrekans_2 <- 5\r\n\r\nurl_veri_3 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                     seri_3[1],\r\n                     \"-\",\r\n                     seri_3[2],\r\n                     \"&startDate=\",\r\n                     aylikTarih,\r\n                     \"&endDate=\",\r\n                     aylikTarih,\r\n                     \"&frequency=\",\r\n                     frekans_2,\r\n                     \"&type=json&key=\",\r\n                     api_key)\r\n\r\ndf_veri_3 <- fromJSON(url_veri_3) %>% \r\n  as.data.frame() %>% \r\n  select(2,3,4) %>% \r\n  rename(\r\n    \"Tarih\"=1,\r\n    \"II.2. Yurt iÃ§i para karÅŸÄ±lÄ±ÄŸÄ±nda...\"=2,\r\n    \"II.3. DiÄŸer (Milyon ABD DolarÄ±)\"=3\r\n  )\r\n\r\n\r\n\r\nYukarÄ±da veriyi aylÄ±k olarak Ã§ekeceÄŸimiz iÃ§in frekansÄ± 5 ve tarihi\r\nbaÅŸÄ±nda 1 olacak ÅŸekilde yazdÄ±k.\r\nSwap tutarÄ±nÄ± aÅŸaÄŸÄ±daki gibi hesaplayabiliriz.\r\n\r\n\r\n# Birimler Milyon ABD DolarÄ±dÄ±r.\r\n\r\ndoviz_swap <- as.numeric(df_veri_3$`II.2. Yurt iÃ§i para karÅŸÄ±lÄ±ÄŸÄ±nda...`)\r\naltin_swap <- as.numeric(df_veri_3$`II.3. DiÄŸer (Milyon ABD DolarÄ±)`)\r\n\r\nswap <- doviz_swap + altin_swap\r\n\r\n\r\n\r\nSwap tutarÄ± = -58024 ya da -58,1 milyar dolar.\r\nSwap HariÃ§ Net Rezervler\r\nSwap HariÃ§ Net Rezervler = Net Rezervler - Swaplar\r\n\r\n\r\nrezerv <- net_rezerv + swap*1000 #birim farklÄ±lÄ±ÄŸÄ± giderildi.\r\n\r\n\r\n\r\nNet rezervler (-) olduÄŸu ve swaplar ile yÃ¼kÃ¼mlÃ¼lÃ¼ÄŸÃ¼mÃ¼z arttÄ±ÄŸÄ± iÃ§in\r\niki deÄŸeri topluyoruz.\r\nSwap hariÃ§ net rezervler -60271086 ya da -60,3 milyar dolardÄ±r.\r\nSon olarak, yazdÄ±klarÄ±mÄ±zÄ± bir fonksiyonda toplayalÄ±m ve gÃ¼ncel\r\nrezerv miktarÄ±mÄ±zÄ± hesaplayalÄ±m.\r\n\r\n\r\nrezerv_hesapla <- function(api_key = NULL, haftalikTarih = NULL, aylikTarih = NULL){\r\n  \r\n  # Net Rezerv\r\n  \r\n  url_veri <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                     \"TP.AB.A02-TP.AB.A10\",\r\n                     \"&startDate=\",\r\n                     haftalikTarih,\r\n                     \"&endDate=\",\r\n                     haftalikTarih,\r\n                     \"frequency=3\",\r\n                     \"&type=json&key=\",\r\n                     api_key)\r\n  \r\n  df_veri <- fromJSON(url_veri) %>% \r\n    as.data.frame() %>% \r\n    select(2,3,4) %>% \r\n    rename(\r\n      \"Tarih\"=1,\r\n      \"A.1-DIÅž VARLIKLAR(Bin TL)\"=2,\r\n      \"P.1-TOPLAM DÃ–VÄ°Z YÃœKÃœMLÃœLÃœKLERÄ°(Bin TL)\"=3\r\n    )\r\n  \r\n  url_veri_2 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                       \"TP.DK.USD.A.YTL\",\r\n                       \"&startDate=\",\r\n                       haftalikTarih,\r\n                       \"&endDate=\",\r\n                       haftalikTarih,\r\n                       \"&type=json&key=\",\r\n                       api_key)\r\n  \r\n  df_veri_2 <- fromJSON(url_veri_2) %>% \r\n    as.data.frame() %>% \r\n    select(2,3) %>% \r\n    rename(\r\n      \"Tarih\"=1,\r\n      \"(USD) ABD DolarÄ± (DÃ¶viz AlÄ±ÅŸ)\"=2\r\n    )\r\n  \r\n  dis_varliklar <- as.numeric(df_veri$`A.1-DIÅž VARLIKLAR(Bin TL)`)\r\n  doviz_yukumluluk <- as.numeric(df_veri$`P.1-TOPLAM DÃ–VÄ°Z YÃœKÃœMLÃœLÃœKLERÄ°(Bin TL)`)\r\n  kur <- as.numeric(df_veri_2$`(USD) ABD DolarÄ± (DÃ¶viz AlÄ±ÅŸ)`)\r\n  \r\n  net_rezerv <- (dis_varliklar - doviz_yukumluluk) / kur\r\n  \r\n  # Swap\r\n  \r\n  url_veri_3 <- paste0(\"https://evds2.tcmb.gov.tr/service/evds/series=\",\r\n                       \"TP.DOVVARNC.K14-TP.DOVVARNC.K23\",\r\n                       \"&startDate=\",\r\n                       aylikTarih,\r\n                       \"&endDate=\",\r\n                       aylikTarih,\r\n                       \"&frequency=5\",\r\n                       \"&type=json&key=\",\r\n                       api_key)\r\n  \r\n  df_veri_3 <- fromJSON(url_veri_3) %>% \r\n    as.data.frame() %>% \r\n    select(2,3,4) %>% \r\n    rename(\r\n      \"Tarih\"=1,\r\n      \"II.2. Yurt iÃ§i para karÅŸÄ±lÄ±ÄŸÄ±nda...\"=2,\r\n      \"II.3. DiÄŸer (Milyon ABD DolarÄ±)\"=3\r\n    )\r\n  \r\n  doviz_swap <- as.numeric(df_veri_3$`II.2. Yurt iÃ§i para karÅŸÄ±lÄ±ÄŸÄ±nda...`)\r\n  altin_swap <- as.numeric(df_veri_3$`II.3. DiÄŸer (Milyon ABD DolarÄ±)`)\r\n  \r\n  swap <- doviz_swap + altin_swap\r\n  \r\n  # Swap HariÃ§ Net Rezerv\r\n  \r\n  rezerv <- net_rezerv + swap*1000\r\n  \r\n  return(rezerv)\r\n  \r\n}\r\n\r\nrezerv_hesapla(api_key = \"api_anahtariniz\",\r\n               haftalikTarih = \"28-04-2022\",\r\n               aylikTarih = \"01-03-2022\")\r\n\r\n\r\n\r\nFonksiyonun sonucu her ne kadar Ã¶nceki Ã¶rnek ile bir Ã§Ä±ksa da yine de\r\ngÃ¼nceli kontrol edelim.\r\nElimizdeki son haftalÄ±k veriler 28 Nisan 2022â€™ye; Ã§ekebildiÄŸimiz swap\r\nverileri ise Mart 2022â€™ye ait.\r\nNet Rezervler = (1639818009 / 14.7962) - (1548217098 / 14.7962) =\r\n(1639818009 - 1548217098) / 14.7962 = 6190840 ya da 6,2 milyar dolar\r\nSwaplar = (-58373) + (-3768) = -62141 ya da -62,1 milyar dolar\r\nSwap HariÃ§ Net Rezervler = 6,2 + (-62,1) = -55,9 milyar dolar\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-05-04-post2/img1.PNG",
    "last_modified": "2022-05-22T19:21:56+03:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-05-02-post1/",
    "title": "Event Study (Olay Ã‡alÄ±ÅŸmasÄ±): FED ve Gezi'nin KÄ±sa Vadede Kura Etkisi",
    "description": "#GeziyiSavunacaÄŸÄ±z",
    "author": [
      {
        "name": "A. Uraz AkgÃ¼l",
        "url": {}
      }
    ],
    "date": "2022-05-02",
    "categories": [
      "Finance"
    ],
    "contents": "\r\n\r\n\r\n\r\n\r\n\r\n\r\nGeziâ€™nin 9. yÄ±ldÃ¶nÃ¼mÃ¼ yaklaÅŸÄ±rken â€˜kurun Gezi nedeniyle arttÄ±ÄŸÄ±â€™\r\nsÃ¶zleri duyulmaya baÅŸlandÄ± ki bu da devam edecektir. Ben de blogumun ilk\r\nyazÄ±sÄ±nda bu konuya bilimsel bir bakÄ±ÅŸ aÃ§Ä±sÄ± katmak\r\nistedim.\r\nNormal ÅŸartlarda bu konuyu incelemek kolay olabilirdi ancak Geziâ€™nin\r\nbaÅŸladÄ±ÄŸÄ± 28 MayÄ±s gÃ¼nÃ¼nden Ã¶nce 22 MayÄ±sâ€™ta FEDâ€™in aÃ§Ä±klamalarÄ±\r\ngeliÅŸmekte olan Ã¼lke piyasalarÄ± iÃ§in kritikti. DÃ¶nemin FED BaÅŸkanÄ± Ben\r\nBernanke Merkez BankasÄ±â€™nÄ±n tahvil alÄ±mlarÄ±nÄ± azaltabileceÄŸini\r\nsÃ¶ylemiÅŸti. Bu da parasal geniÅŸlemeden (Quantitative Easing, QE) Ã§Ä±kÄ±ÅŸÄ±n\r\nilk adÄ±mÄ±ydÄ±.\r\nGeziâ€™nin FEDâ€™in aÃ§Ä±klamasÄ±na yakÄ±n bir tarihte baÅŸlamasÄ± iÅŸleri biraz\r\nzorlaÅŸtÄ±rÄ±yor. Bu tip durumlarda TÃ¼rkiye ile benzer Ã¼lkeleri de\r\nÃ§alÄ±ÅŸmaya katmak faydalÄ± olabilir. Bunu gÃ¶z Ã¶nÃ¼ne alarak iki grup Ã¼lkeyi\r\nÃ§alÄ±ÅŸmaya dahil ettim: KÄ±rÄ±lgan BeÅŸli (Fragile Five) ve Zordaki Onlu\r\n(Troubled Ten).\r\nKÄ±rÄ±lgan BeÅŸli Ã¼lkeleri (Morgan Stanley, 2013): Brezilya, Endonezya,\r\nGÃ¼ney Afrika, Hindistan ve TÃ¼rkiye.\r\nZordaki Onlu Ã¼lkeleri (Morgan Stanley, 2015): Brezilya, GÃ¼ney Afrika,\r\nGÃ¼ney Kore, Kolombiya, Peru, Rusya, Singapur, Åžili, Tayland ve\r\nTayvan.\r\nÄ°ki grubu birleÅŸtirirsek Ã§alÄ±ÅŸmaya toplamda 13 Ã¼lkeyi dahil etmiÅŸ\r\nolacaÄŸÄ±z.\r\nTartÄ±ÅŸmalar dolar Ã¼zerinden ilerlediÄŸi iÃ§in TÃ¼rkiye de dahil 13\r\nÃ¼lkenin para birimlerinin dolar karÅŸÄ±sÄ±ndaki deÄŸeri baz alÄ±ndÄ±. DeÄŸerler\r\nReutersâ€™tan alÄ±nmÄ±ÅŸtÄ±r. Verilere (post1.xlsx) GitHub\r\nhesabÄ±mdan ulaÅŸabilirsiniz.\r\n\r\n\r\nÃœlke\r\n\r\n\r\nDÃ¶viz Kodu\r\n\r\n\r\nBrezilya\r\n\r\n\r\nUSDBRL\r\n\r\n\r\nEndonezya\r\n\r\n\r\nUSDIDR\r\n\r\n\r\nGÃ¼ney Afrika\r\n\r\n\r\nUSDZAR\r\n\r\n\r\nGÃ¼ney Kore\r\n\r\n\r\nUSDKRW\r\n\r\n\r\nHindistan\r\n\r\n\r\nUSDINR\r\n\r\n\r\nKolombiya\r\n\r\n\r\nUSDCOP\r\n\r\n\r\nPeru\r\n\r\n\r\nUSDPEN\r\n\r\n\r\nRusya\r\n\r\n\r\nUSDRUB\r\n\r\n\r\nSingapur\r\n\r\n\r\nUSDSGD\r\n\r\n\r\nÅžili\r\n\r\n\r\nUSDCLP\r\n\r\n\r\nTayland\r\n\r\n\r\nUSDTHB\r\n\r\n\r\nTayvan\r\n\r\n\r\nUSDTWD\r\n\r\n\r\nTÃ¼rkiye\r\n\r\n\r\nUSDTRY\r\n\r\n\r\nÃ–ncelikle Ã¼lkelerin performanslarÄ±na bakalÄ±m. 2013 yÄ±lÄ±nÄ±n baÅŸÄ±ndan\r\nsonuna kadar bir aralÄ±k belirledim ve her bir Ã¼lke kurunu 100 ile\r\nbaÅŸlatarak bir endeks oluÅŸturdum. TÃ¼m kurlarÄ±n yer aldÄ±ÄŸÄ± gÃ¶rsel\r\naÅŸaÄŸÄ±daki gibidir.\r\n\r\n\r\n\r\nYukarÄ±daki grafiÄŸe bir de ayrÄ± ayrÄ± bakalÄ±m.\r\n\r\n\r\n\r\n22 MayÄ±s 2013 tarihi baz alÄ±ndÄ±ÄŸÄ±nda genel resimde bir\r\nhareketlenmenin yaÅŸandÄ±ÄŸÄ±nÄ± sÃ¶yleyebiliriz ancak tam olarak yeterli ve\r\ngÃ¼venilir bir yorum olmayacaktÄ±r. Bu noktada son bir gÃ¶rsel ile olay\r\nÃ§alÄ±ÅŸmasÄ±na geÃ§ebiliriz. AÅŸaÄŸÄ±daki gÃ¶rselde 13 Ã¼lkenin endeks\r\nortalamasÄ±nÄ±n USDTRY ile olan iliÅŸkisi zaman serisi olarak\r\nverilmiÅŸtir.\r\n\r\n\r\n\r\nYukarÄ±daki gÃ¶rsel, yoruma diÄŸerlerine gÃ¶re biraz daha kolaylÄ±k\r\nkatÄ±yor. Hareketlenmenin 22 MayÄ±s 2013 Ã¶ncesinde baÅŸladÄ±ÄŸÄ±nÄ± ve diÄŸer\r\nEMâ€™ler ile korele bir ÅŸekilde hareket ettiÄŸimizi gÃ¶rebiliriz. Kur ile\r\nendeks arasÄ±ndaki farkÄ± (USDTRY - Endeks > 0, pozitif bÃ¶lge) ise\r\naÅŸaÄŸÄ±daki gibi verebiliriz.\r\n\r\n\r\n\r\nYazÄ±nÄ±n bundan sonraki kÄ±smÄ±nda Event Studyâ€™e geÃ§ebiliriz.\r\nOlay Ã§alÄ±ÅŸmasÄ± da diyebileceÄŸimiz Event Study iÃ§in kÄ±saca herhangi\r\nbir olayÄ±n finansal piyasalar Ã¼zerine etkisini tespit etmek iÃ§in\r\nkullanÄ±lan istatistiksel bir yÃ¶ntemdir tanÄ±mÄ±nÄ± yapabiliriz. LiteratÃ¼re\r\nbakÄ±ldÄ±ÄŸÄ±nda yapÄ±lan Ã§alÄ±ÅŸmalarÄ±n hisse/borsa aÄŸÄ±rlÄ±klÄ± olduÄŸunu\r\ngÃ¶rebiliriz. Ancak bu Ã§alÄ±ÅŸmada yazÄ±nÄ±n baÅŸÄ±nda da belirttiÄŸim nedenden\r\ndolayÄ± Ã¼lke kurlarÄ± Ã¼zerinden gitmeyi tercih ettim.\r\nOlay Ã§alÄ±ÅŸmasÄ±nÄ± Ã¼Ã§ parÃ§ada inceliyoruz.\r\nEvent Studies in Economics and Finance,\r\nA. Craig MacKinlayEstimation Window denilen Tahmin Penceresi.\r\nTahmin penceresinde ortada henÃ¼z bir olay yoktur. Bu adÄ±mda USDTRY\r\ngetirilerinin piyasa (13 Ã¼lke kurundan hesaplanan endeks) getirisine\r\nkÄ±yasla gerÃ§ekleÅŸen normal davranÄ±ÅŸÄ± belirlenir. Tahmin penceresinde\r\npiyasaya gÃ¶re dÃ¼zeltilmiÅŸ getiri (market adjusted return) yÃ¶ntemini\r\nkullanacaÄŸÄ±z. AslÄ±nda bu nedenle tahmin penceresi bÃ¶lÃ¼mÃ¼ne ihtiyacÄ±mÄ±z\r\nolmayacak (diÄŸer bazÄ± yÃ¶ntemlerde olabiliyor).\r\n\\(AR_{it} = R_{it} - R_{mt}\\)\r\n\\(AR_{it}:\\) t gÃ¼nÃ¼ne ait anormal\r\ngetiri (AR: Abnormal Return)\r\n\\(R_{it}:\\) t gÃ¼nÃ¼ne ait USDTRY\r\ngetirisi\r\n\\(R_{mt}:\\) t gÃ¼nÃ¼ne ait endeks\r\ngetirisi\r\nTahmin penceresi iÃ§in bir baÅŸlangÄ±Ã§ ve bir bitiÅŸ tarihi vardÄ±r.\r\nEvent Window denilen Olay Penceresi.\r\nOlay penceresi olaydan sonraki aralÄ±ÄŸÄ± ifade ediyor. Ä°lgili olayÄ±n\r\nolduktan sonra kaÃ§ gÃ¼n daha USDTRY Ã¼zerinde etkisinin olduÄŸu\r\ngÃ¶sterilir.\r\nOlay penceresinde tÄ±pkÄ± tahmin penceresinde olduÄŸu gibi bir baÅŸlangÄ±Ã§\r\nve bir de bitiÅŸ tarihi olmak ile beraber bir de olay gÃ¼nÃ¼ vardÄ±r.\r\nPostevent Window denilen Olay SonrasÄ± Pencere.\r\nOlay sonrasÄ± pencerede ise USDTRYâ€™nin uzun vadeli performansÄ±\r\ngÃ¶sterilir.\r\nOlay sonrasÄ± pencerede de diÄŸer iki pencerede olduÄŸu gibi bir\r\nbaÅŸlangÄ±Ã§ ve bir de bitiÅŸ tarihi vardÄ±r.\r\nOlay Ã§alÄ±ÅŸmasÄ± ile FED ve Geziâ€™nin herhangi bir anormal getiriye yol\r\naÃ§Ä±p aÃ§madÄ±ÄŸÄ± inceleyeceÄŸiz.\r\nAdÄ±m adÄ±m neler yapacaÄŸÄ±z?\r\nUSDTRY ve EM endeksinin getirilerini hesaplayarak baÅŸlÄ±yoruz. Bunun\r\niÃ§in logaritmik getiriyi kullanacaÄŸÄ±z.\r\n\r\n\r\n\r\n\r\n\r\n\r\nUSDTRY getirilerinden hesaplanan EM endeks getirilerini Ã§Ä±karÄ±yoruz\r\nve anormal getirileri (abnormal return) elde ediyoruz.\r\n\r\n\r\n\r\nBir Ã¶nceki adÄ±mda hesaplanan anormal getirilerden kÃ¼mÃ¼latif anormal\r\ngetirileri (cumulative abnormal return) hesaplÄ±yoruz. Anormal getiri\r\ndeÄŸerlerini gÃ¼nlÃ¼k olarak hesapladÄ±k ve bu da piyasanÄ±n tepkisini tek\r\nbir gÃ¼n iÃ§in Ã¶lÃ§er. Uzun dÃ¶nemdeki olay etkisine bakabilmek iÃ§in olay\r\npenceresi sÃ¼resindeki anormal getiriler toplanarak kÃ¼mÃ¼latif anormal\r\ngetiri deÄŸerleri hesaplanÄ±r. Bu da piyasanÄ±n olay penceresi dÃ¶nemindeki\r\ngenel fiyat eÄŸilimini gÃ¶sterir.\r\n\r\n\r\n\r\nÃ‡alÄ±ÅŸmada, FED iÃ§in olay penceresi, -5 gÃ¼n olay Ã¶ncesi, +5 gÃ¼n\r\nolay sonrasÄ± ve olay gÃ¼nÃ¼ olmak Ã¼zere 11 gÃ¼n olarak; Gezi iÃ§in (Geziâ€™nin\r\n31 MayÄ±sâ€™ta aktif olduÄŸunu gÃ¶z Ã¶nÃ¼ne alÄ±rsak) olay penceresi, -5 gÃ¼n\r\nolay Ã¶ncesi, +5 gÃ¼n olay sonrasÄ± ve olay gÃ¼nÃ¼ olmak Ã¼zere 11 gÃ¼n olarak\r\nbelirlenmiÅŸtir.\r\nHesapladÄ±ÄŸÄ±mÄ±z kÃ¼mÃ¼latif anormal getiri deÄŸerleri istatistiksel\r\nolarak sÄ±fÄ±rdan farklÄ± ise ilgili olayÄ±n deÄŸiÅŸkenler Ã¼zerinde etkili\r\nolduÄŸunu ve anormal deÄŸiÅŸimi ortaya Ã§Ä±kardÄ±ÄŸÄ±nÄ± sÃ¶yleyeceÄŸiz. Ancak,\r\nelde edilen kÃ¼mÃ¼latif anormal getiri 0â€™a eÅŸit ya da 0â€™a Ã§ok yakÄ±n\r\ndeÄŸerler alÄ±yorsa ilgili olayÄ±n deÄŸiÅŸkenler Ã¼zerinde etkili olmadÄ±ÄŸÄ±\r\nifade edebileceÄŸiz.\r\nTeste karar vermek iÃ§in Ã¶ncelikle getirilerin normal daÄŸÄ±lÄ±p\r\ndaÄŸÄ±lmadÄ±ÄŸÄ±nÄ± inceleyeceÄŸiz. Normallik varsayÄ±mÄ±nÄ±n kontrolÃ¼ iÃ§in\r\nShapiro-Wilk normallik testi kullanÄ±lmÄ±ÅŸtÄ±r. Ã‡Ã¼nkÃ¼ Ã¶rnek bÃ¼yÃ¼klÃ¼ÄŸÃ¼nÃ¼n\r\n50â€™den kÃ¼Ã§Ã¼k olmasÄ± durumunda Shapiro-Wilk; bÃ¼yÃ¼k olmasÄ± durumunda ise\r\nKolmogorov Smirnov kullanÄ±lÄ±r gibi bir kullanÄ±m algoritmasÄ± vardÄ±r.\r\nOlay penceresi FED(-5,+5) iÃ§in;\r\n\\(H_0:\\) Olay penceresi iÃ§erisinde,\r\nolay gÃ¼nÃ¼nden 5 gÃ¼n Ã¶ncesi ve 5 gÃ¼n sonrasÄ± kÃ¼mÃ¼latif aÅŸÄ±rÄ± getiriler\r\nnormal daÄŸÄ±lÄ±m gÃ¶stermektedir.\r\n\\(H_1:\\) Olay penceresi iÃ§erisinde,\r\nolay gÃ¼nÃ¼nden 5 gÃ¼n Ã¶ncesi ve 5 gÃ¼n sonrasÄ± kÃ¼mÃ¼latif aÅŸÄ±rÄ± getiriler\r\nnormal daÄŸÄ±lÄ±m gÃ¶stermemektedir.\r\n\r\n\r\n    Shapiro-Wilk normality test\r\n\r\ndata:  obs_fed\r\nW = 0.89606, p-value = 0.1654\r\n\r\nOlay penceresi Gezi(-5,+5) iÃ§in;\r\n\\(H_0:\\) Olay penceresi iÃ§erisinde,\r\nolay gÃ¼nÃ¼nden 5 gÃ¼n Ã¶ncesi ve 5 gÃ¼n sonrasÄ± kÃ¼mÃ¼latif aÅŸÄ±rÄ± getiriler\r\nnormal daÄŸÄ±lÄ±m gÃ¶stermektedir.\r\n\\(H_1:\\) Olay penceresi iÃ§erisinde,\r\nolay gÃ¼nÃ¼nden 5 gÃ¼n Ã¶ncesi ve 5 gÃ¼n sonrasÄ± kÃ¼mÃ¼latif aÅŸÄ±rÄ± getiriler\r\nnormal daÄŸÄ±lÄ±m gÃ¶stermemektedir.\r\n\r\n\r\n    Shapiro-Wilk normality test\r\n\r\ndata:  obs_gezi\r\nW = 0.85286, p-value = 0.0465\r\n\r\nShapiro-Wilk testine gÃ¶re p deÄŸerleri sÄ±rasÄ±yla 0.1653741 ve 0.046503\r\n%5â€™ten bÃ¼yÃ¼k Ã§Ä±ktÄ±ÄŸÄ± iÃ§in (ikincisi yaklaÅŸÄ±k %5) normallik varsayÄ±mÄ±nÄ±n\r\nsaÄŸlandÄ±ÄŸÄ±nÄ± sÃ¶yleyebiliriz. Bu durumda parametrik olmayan testler\r\ngrubundaki baÄŸÄ±mlÄ± Ã¶rneklem t testi (Paired Samples T-test) ile bir\r\ngrubun belirli bir olaydan Ã¶nceki ve sonraki ortalamalarÄ± arasÄ±ndaki\r\nfarkÄ±n anlamlÄ±lÄ±ÄŸÄ± test edilebilir.\r\nOlay penceresi FED(-5,+5) iÃ§in;\r\n\\(H_{0,(\\pm5)}: CAR_{-5} =\r\nCAR_{+5}\\)\r\nOlay gÃ¼nÃ¼ tarihinden Ã¶nceki 5 gÃ¼nlÃ¼k kÃ¼mÃ¼latif ortalama anormal\r\ngetirileriyle olay gÃ¼nÃ¼nden sonraki 5 gÃ¼nlÃ¼k kÃ¼mÃ¼latif anormal\r\ngetirileri arasÄ±nda fark yoktur.\r\n\\(H_{1,(\\pm5)}: CAR_{-5} \\neq\r\nCAR_{+5}\\)\r\nOlay gÃ¼nÃ¼ tarihinden Ã¶nceki 5 gÃ¼nlÃ¼k kÃ¼mÃ¼latif ortalama anormal\r\ngetirileriyle olay gÃ¼nÃ¼nden sonraki 5 gÃ¼nlÃ¼k kÃ¼mÃ¼latif anormal\r\ngetirileri arasÄ±nda fark vardÄ±r.\r\n\r\n\r\n    Paired t-test\r\n\r\ndata:  before_fed and after_fed\r\nt = 1.5718, df = 4, p-value = 0.1911\r\nalternative hypothesis: true difference in means is not equal to 0\r\n95 percent confidence interval:\r\n -0.002125328  0.007671368\r\nsample estimates:\r\nmean of the differences \r\n             0.00277302 \r\n\r\nOlay penceresi Gezi(-5,+5) iÃ§in;\r\n\\(H_{0,(\\pm5)}: CAR_{-5} =\r\nCAR_{+5}\\)\r\nOlay gÃ¼nÃ¼ tarihinden Ã¶nceki 5 gÃ¼nlÃ¼k kÃ¼mÃ¼latif ortalama anormal\r\ngetirileriyle olay gÃ¼nÃ¼nden sonraki 5 gÃ¼nlÃ¼k kÃ¼mÃ¼latif anormal\r\ngetirileri arasÄ±nda fark yoktur.\r\n\\(H_{1,(\\pm5)}: CAR_{-5} \\neq\r\nCAR_{+5}\\)\r\nOlay gÃ¼nÃ¼ tarihinden Ã¶nceki 5 gÃ¼nlÃ¼k kÃ¼mÃ¼latif ortalama anormal\r\ngetirileriyle olay gÃ¼nÃ¼nden sonraki 5 gÃ¼nlÃ¼k kÃ¼mÃ¼latif anormal\r\ngetirileri arasÄ±nda fark vardÄ±r.\r\n\r\n\r\n    Paired t-test\r\n\r\ndata:  before_gezi and after_gezi\r\nt = -2.2407, df = 4, p-value = 0.08855\r\nalternative hypothesis: true difference in means is not equal to 0\r\n95 percent confidence interval:\r\n -0.012374046  0.001321203\r\nsample estimates:\r\nmean of the differences \r\n           -0.005526422 \r\n\r\np deÄŸerleri olay penceresi FED(-5,+5) iÃ§in 0.1911003 ve Gezi(-5,+5)\r\niÃ§in 0.0885484 %5â€™ten bÃ¼yÃ¼k olduÄŸu iÃ§in sÄ±fÄ±r hipotezi reddedilemez; bu\r\nda olay Ã¶ncesi ile sonrasÄ± ortalama getirilerinde fark olmadÄ±ÄŸÄ±nÄ±\r\ngÃ¶sterir.\r\nOrtalama getiriler FED(-5,+5) iÃ§in olay Ã¶ncesi 0.0039657 iken; olay\r\nsonrasÄ± 0.0011927; Gezi(-5,+5) iÃ§in olay Ã¶ncesi -0.0013321 iken; olay\r\nsonrasÄ± 0.0041943 olmuÅŸtur.\r\nBir de kÃ¼mÃ¼latif anormal getirilerin istatistiksel olarak anlamlÄ±\r\nolup olmadÄ±klarÄ±na bireysel olarak bakalÄ±m. Bu durumda t istatistiÄŸi\r\n\\(\\frac{CAR}{\\sigma(CAR)*\\sqrt{GÃ¼n\\\r\nSayÄ±sÄ±}}\\) olacak.\r\nUSING DAILY STOCK RETURNS The Case of\r\nEvent Studies*, S.J.Brown, J.B.Warner\r\n\r\n\r\n\r\n\r\n\r\nFED iÃ§in olay Ã¶ncesinde 3 kÃ¼mÃ¼latif anormal getiri istatistiksel\r\nolarak anlamlÄ± Ã§Ä±karken; Gezi iÃ§in olay sonrasÄ±nda 2 kÃ¼mÃ¼latif anormal\r\ngetiri istatistiksel olarak anlamlÄ± Ã§Ä±kmÄ±ÅŸtÄ±r.\r\nOlay penceresi iÃ§in FED(-5,+5) ve Gezi(-5,+5) demiÅŸtik. BunlarÄ±n\r\nistatistiksel anlamlÄ±lÄ±ÄŸÄ±na bakalÄ±m.\r\n\r\n\r\n\r\nOlay penceresinde FED(,-5,+5) ve Gezi(-5,+5) iÃ§in |-0.0389315| >\r\n1.96 ve |-0.1593087| > 1.96 olmadÄ±ÄŸÄ± iÃ§in istatistiksel olarak\r\nanlamlÄ± Ã§Ä±kmamÄ±ÅŸtÄ±r.\r\nSonuÃ§ olarak ÅŸunlarÄ± sÃ¶yleyebilirim: Bu Ã§alÄ±ÅŸma, FED ve Geziâ€™nin kÄ±sa\r\nvadeli etkilerini gÃ¶stermektedir. KÄ±sa vadede her iki olayda da\r\nistatistiksel olarak anlamlÄ± bir etki olmasa da TÃ¼rkiyeâ€™nin diÄŸer EMâ€™ler\r\nile 22 MayÄ±s 2013â€™ten Ã¶nce baÅŸlayarak korele bir ÅŸekilde hareket ettiÄŸi\r\ndikkate alÄ±nmalÄ±dÄ±r. Belirlenen olay gÃ¼nlerinin farklÄ± olay\r\npencerelerinde de deÄŸerlendirilmesini tavsiye ederim. AyrÄ±ca tercih\r\nettiÄŸim market adjusted returns dÄ±ÅŸÄ±nda farklÄ± yÃ¶ntemlerin de\r\nkullanÄ±ldÄ±ÄŸÄ±nÄ± hatÄ±rlatmak isterim. Daha uzun vadedeki etkilere bakmak\r\niÃ§in farklÄ± istatistiksel yÃ¶ntemlerin uygulanmasÄ± yazÄ±nÄ±n baÅŸÄ±nda\r\nbelirtilen tartÄ±ÅŸmaya farklÄ± bir aÃ§Ä± katacaktÄ±r.\r\nÃ‡alÄ±ÅŸmanÄ±n R kodlarÄ±na aÅŸaÄŸÄ±dan ulaÅŸÄ±labilir.\r\n\r\n\r\noptions(scipen = 999)\r\nlibrary(tidyverse)\r\n\r\ndf <- readxl::read_excel(\"data.xlsx\")\r\n\r\nmaster <- df %>% \r\n  mutate(Date = as.Date(Date)) %>% \r\n  filter(Date >= as.Date(\"2013-01-01\") & Date <= as.Date(\"2013-12-31\"))\r\n\r\nemergingMarket <- master %>% \r\n  pivot_longer(!Date, names_to = \"Currencies\", values_to = \"Values\") %>% \r\n  arrange(Currencies)\r\n\r\ninitialValues <- emergingMarket %>% \r\n  group_by(Currencies) %>% \r\n  slice_min(Date) %>% \r\n  rename(\"Initial\"=3)\r\n\r\nemergingMarketFinal <- emergingMarket %>% \r\n  left_join(initialValues, by = c(\"Date\",\"Currencies\")) %>% \r\n  mutate(Initial = zoo::na.locf(Initial)) %>% \r\n  mutate(\"SubIndex\" = Values / Initial * 100) %>% \r\n  mutate(\"ColGr\" = ifelse(Currencies == \"USDTRY\", \"USDTRY\", \"DiÄŸer EM'ler\"))\r\n\r\nggplot(emergingMarketFinal,\r\n       aes(x = Date, y = SubIndex, group = Currencies, color = ColGr)) +\r\n  geom_line() +\r\n  geom_hline(yintercept = 100) +\r\n  geom_vline(xintercept = as.Date(\"2013-05-22\"), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(legend.title = element_blank(),\r\n        legend.position = \"bottom\",\r\n        axis.title = element_blank(),\r\n        plot.caption = element_text(face = \"italic\")) +\r\n  scale_color_manual(values = c(\"gray80\",\"red\")) +\r\n  labs(caption = \"EM: Emerging Market\")\r\n\r\nggplot(emergingMarketFinal,\r\n       aes(x = Date, y = SubIndex, group = Currencies, color = ColGr)) +\r\n  geom_line() +\r\n  geom_hline(yintercept = 100) +\r\n  geom_vline(xintercept = as.Date(\"2013-05-22\"), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(legend.title = element_blank(),\r\n        legend.position = \"none\",\r\n        axis.title = element_blank(),\r\n        strip.text = element_text(size = 20)) +\r\n  scale_color_manual(values = c(\"gray30\",\"red\")) +\r\n  scale_x_date(date_labels = \"%m-%Y\") +\r\n  facet_wrap(~Currencies, ncol = 3)\r\n\r\nemIndex <- emergingMarketFinal %>% \r\n  select(Date,Currencies,SubIndex) %>% \r\n  pivot_wider(names_from = \"Currencies\", values_from = \"SubIndex\") %>% \r\n  mutate(\"EMIndex\" = rowMeans(.[,-1], na.rm = TRUE))\r\n\r\nemIndex %>% \r\n  select(Date,USDTRY,EMIndex) %>% \r\n  pivot_longer(!Date, names_to = \"Currencies\", values_to = \"Index\") %>% \r\n  ggplot(aes(x = Date, y = Index, group = Currencies, color = Currencies)) +\r\n  geom_line() +\r\n  geom_hline(yintercept = 100) +\r\n  geom_vline(xintercept = as.Date(\"2013-05-22\"), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank(),\r\n        legend.position = \"bottom\",\r\n        plot.caption = element_text(face = \"italic\")) +\r\n  scale_color_manual(values = c(\"gray30\",\"red\")) +\r\n  labs(caption = \"EMIndex: 13 Emerging Market'Ä±n OrtalamasÄ±\")\r\n\r\nemIndex %>% \r\n  select(Date,USDTRY,EMIndex) %>% \r\n  mutate(Diff = USDTRY - EMIndex) %>% \r\n  ggplot(aes(x = Date, y = Diff)) +\r\n  geom_area(fill = \"gray40\") +\r\n  geom_vline(xintercept = as.Date(\"2013-05-22\"), linetype = \"dashed\") +\r\n  geom_hline(yintercept = 0) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank())\r\n\r\ndf_event <- emIndex %>% \r\n  select(Date,USDTRY,EMIndex) %>% \r\n  mutate(\r\n    \"USDTRY Return\" = lag(log(lead(USDTRY)/USDTRY)),\r\n    \"EMIndex Return\" = lag(log(lead(EMIndex)/EMIndex))\r\n  ) %>% \r\n  na.omit()\r\n\r\ndf_event %>% \r\n  select(Date,`USDTRY Return`,`EMIndex Return`) %>% \r\n  pivot_longer(!Date, names_to = \"Vars\", values_to = \"Return\") %>% \r\n  ggplot(aes(x = Date, y = Return, group = Vars, color = Vars)) +\r\n  geom_line() +\r\n  geom_vline(xintercept = as.Date(\"2013-05-22\"), linetype = \"dashed\") +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.position = \"none\") +\r\n  facet_wrap(~Vars, ncol = 1) +\r\n  scale_color_manual(values = c(\"blue\",\"red\"))\r\n\r\ndf_event <- df_event %>% \r\n  mutate(\"Abnormal Return\" = `USDTRY Return` - `EMIndex Return`)\r\n\r\n# -5,5 (FED iÃ§in)\r\n\r\ndf_event_fed <- df_event %>% \r\n  filter(Date >= as.Date(\"2013-05-15\") & Date <= as.Date(\"2013-05-29\")) %>% \r\n  mutate(\"Cumulative Abnormal Return\" = cumsum(`Abnormal Return`))\r\n\r\n# -5,5 (Gezi iÃ§in)\r\n\r\ndf_event_gezi <- df_event %>% \r\n  filter(Date >= as.Date(\"2013-05-24\") & Date <= as.Date(\"2013-06-07\")) %>% \r\n  mutate(\"Cumulative Abnormal Return\" = cumsum(`Abnormal Return`))\r\n\r\nobs_fed <- df_event_fed %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nshapiro.test(obs_fed)\r\nshapiro.test(obs_fed)$p.value\r\n\r\nobs_gezi <- df_event_gezi %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nshapiro.test(obs_gezi)\r\nshapiro.test(obs_gezi)$p.value\r\n\r\nbefore_fed <- df_event_fed %>% \r\n  filter(Date < as.Date(\"2013-05-22\")) %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nafter_fed <- df_event_fed %>% \r\n  filter(Date > as.Date(\"2013-05-22\")) %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nt.test(before_fed, after_fed, paired = TRUE)\r\nt.test(before_fed, after_fed, paired = TRUE)$p.value\r\n\r\nbefore_gezi <- df_event_gezi %>% \r\n  filter(Date < as.Date(\"2013-05-31\")) %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nafter_gezi <- df_event_gezi %>% \r\n  filter(Date > as.Date(\"2013-05-31\")) %>% \r\n  pull(`Cumulative Abnormal Return`)\r\n\r\nt.test(before_gezi, after_gezi, paired = TRUE)\r\nt.test(before_gezi, after_gezi, paired = TRUE)$p.value\r\n\r\nmean(before_fed)\r\nmean(after_fed)\r\n\r\nmean(before_gezi)\r\nmean(after_gezi)\r\n\r\nsigma_fed <- df_event_fed %>% \r\n  summarise(sd = sd(`Abnormal Return`)) %>% \r\n  pull(sd)\r\n\r\ndf_event_fed <- df_event_fed %>% \r\n  mutate(t = seq(-5,5,1)) %>% \r\n  mutate(\"t_stat\" = `Cumulative Abnormal Return`/sigma_fed*sqrt(abs(t))) %>% \r\n  mutate(\"Result\" = ifelse(abs(t_stat) > 1.96, \"SIGNIFICANT\",\"INSIGNIFICANT\"))\r\n\r\ndf_event_fed %>% \r\n  ggplot(aes(x = factor(t), y = `Cumulative Abnormal Return`, group = 1)) +\r\n  geom_line() +\r\n  geom_point(aes(color = Result), size = 7) +\r\n  geom_vline(xintercept = factor(0)) +\r\n  geom_hline(yintercept = 0) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank(),\r\n        plot.title = element_text(size = 20),\r\n        plot.subtitle = element_text(size = 15)) +\r\n  scale_color_manual(values = c(\"gray40\",\"red\")) +\r\n  labs(title = \"FED\",\r\n       subtitle = \"t0: 22 MayÄ±s 2013\")\r\n\r\nsigma_gezi <- df_event_gezi %>% \r\n  summarise(sd = sd(`Abnormal Return`)) %>% \r\n  pull(sd)\r\n\r\ndf_event_gezi <- df_event_gezi %>% \r\n  mutate(t = seq(-5,5,1)) %>% \r\n  mutate(\"t_stat\" = `Cumulative Abnormal Return`/sigma_gezi*sqrt(abs(t))) %>% \r\n  mutate(\"Result\" = ifelse(abs(t_stat) > 1.96, \"SIGNIFICANT\",\"INSIGNIFICANT\"))\r\n\r\ndf_event_gezi %>% \r\n  ggplot(aes(x = factor(t), y = `Cumulative Abnormal Return`, group = 1)) +\r\n  geom_line() +\r\n  geom_point(aes(color = Result), size = 7) +\r\n  geom_vline(xintercept = factor(0)) +\r\n  geom_hline(yintercept = 0) +\r\n  theme_minimal() +\r\n  theme(axis.title = element_blank(),\r\n        legend.title = element_blank(),\r\n        plot.title = element_text(size = 20),\r\n        plot.subtitle = element_text(size = 15)) +\r\n  scale_color_manual(values = c(\"gray40\",\"red\")) +\r\n  labs(title = \"GEZÄ°\",\r\n       subtitle = \"t0: 31 MayÄ±s 2013\")\r\n\r\new_sum_fed <- sum(df_event_fed$`Abnormal Return`)\r\new_tstat_fed <- ew_sum_fed / (sigma_fed * sqrt(11))\r\n\r\new_sum_gezi <- sum(df_event_gezi$`Abnormal Return`)\r\new_tstat_gezi <- ew_sum_gezi / (sigma_gezi * sqrt(11))\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2022-05-02-post1/post1_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2022-05-22T19:22:32+03:00",
    "input_file": {}
  }
]
